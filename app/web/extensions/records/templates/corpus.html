{% load collection_date_range wagtailcore_tags %}

<section class="corpus">
    <div
      id="{{ corpus.title|slugify }}"
      class="u-subsection u-flex"
      data-collapsed="{{ corpus.collapsed|yesno:"true,false" }}"
      onclick="window.CustomUtils.toggleSection(this)"
    >
      <a href="#{{ corpus.title|slugify }}" class="anchor">
        <h3>{{ corpus.title }}</h3>
      </a>
      <i class="fas {% if corpus.collapsed %}fa-caret-down{% else %}fa-caret-up{% endif %} subsection corpus"></i>
    </div>
    <div class="subsection-container corpus-container {% if corpus.collapsed %}u-none{% endif %}">
        <div class="collection-description text-expandable-container">
            <div class="show-button show-more u-none" onclick="window.CustomUtils.toggleShowMore(this)"></div>
            {{ corpus.description|richtext }}
        </div>
        <div class="collections-container">
        <h4>Collections</h4>
        {% for collection in collections %}
            <a class="u-flex" href="{% pageurl collection %}">
            <div class="title">{{ collection.title }}</div>
            <div class="count">
                {% collection_date_range collection %} | {{ collection.count }} Records
            </div>
            </a>
        {% endfor %}
        </div>
    </div>
  </section>
