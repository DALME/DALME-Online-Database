<b-popover
  :show.sync="show_menu"
  target="cite-button"
  placement="right"
  v-cloak>
  <div class="form-group">
      <div class="form-control" v-html="formatted_citation" id="citation"></div>
  </div>
  <div class="form-button d-flex">
      <b-dropdown
        id="cite_format_menu"
        size="sm"
        variant="secondary"
        text="Change format">
        <template v-for="format in formats">
          <b-dropdown-divider v-if="format.divider"></b-dropdown-divider>
          <b-dropdown-item
            v-else
            v-bind:class="{ active: template == format.name }"
            @click="updateCitation(format.name)">
            ${format.label}
          </b-dropdown-item>
        </template>
      </b-dropdown>
      <b-button
        id="clip_copy"
        variant="secondary"
        size="sm"
        class="ml-auto mr-auto"
        data-clipboard-target="#citation"
        @click="showCopiedTooltip">
        Copy to clipboard
      </b-button>
      <b-dropdown
        id="cite_download"
        size="sm"
        variant="secondary"
        text="Download">
        <b-dropdown-item @click="downloadCitation('bibtex')">BibTeX</b-dropdown-item>
        <b-dropdown-item @click="downloadCitation('ris')">RIS/Endnote</b-dropdown-item>
        <b-dropdown-item @click="downloadCitation('bibtex')">Zotero</b-dropdown-item>
      </b-dropdown>
  </div>
</b-popover>
