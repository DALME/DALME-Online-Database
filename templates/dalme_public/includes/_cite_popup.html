<b-popover
  :show.sync="showCitePanel"
  target="cite-button"
  :placement="popoverPlacement"
  custom-class="form-popover"
  v-cloak>
  <div v-on-clickaway="closeCitePanel">
  <div class="mb-2">
      <div class="form-control h-auto" v-html="formatted_citation" id="citation"></div>
  </div>
  <div class="form-button d-flex">
      <b-dropdown
        size="sm"
        variant="secondary"
        text="Change format"
        class="flex-fill">
        <template v-for="format in formats">
          <b-dropdown-divider v-if="format.divider"></b-dropdown-divider>
          <b-dropdown-item
            v-else
            v-bind:class="{ active: template == format.name }"
            @click="updateCitation(format.name, format.output_format)">
            ${format.label}
          </b-dropdown-item>
        </template>
      </b-dropdown>
      <b-button
        id="clip_copy"
        variant="secondary"
        size="sm"
        class="flex-fill ml-1 mr-1"
        data-clipboard-target="#citation"
        @click="showCopiedTooltip">
        Copy
      </b-button>
      <b-dropdown
        size="sm"
        variant="secondary"
        text="Download"
        class="flex-fill">
        <b-dropdown-item @click="downloadCitation('bibtex')">BibTeX</b-dropdown-item>
        <b-dropdown-item @click="downloadCitation('ris')">RIS/Endnote</b-dropdown-item>
      </b-dropdown>
  </div>
  </div>
</b-popover>
