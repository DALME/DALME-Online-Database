{% load wagtailcore_tags %}

<div class="u-flex">
  <div class="metadata">
    <div class="doc-title">
      {% if value.page %}
        <a href="{% pageurl value.page %}" target="_blank">{{ value.title }}</a>
      {% elif value.url %}
        <a href="{{ value.url }}" target="_blank">{{ value.title }}</a>
      {% else %}
        <h4>{{ value.title }}</h4>
      {% endif %}
      {% if value.document %}
        <a href="{{ value.document.url }}" target="_blank" class="doc-icon"><i class="fas fa-download"></i></a>
      {% endif %}
    </div>
    <div class="doc-detail">
        {% if value.type == 'publication' or value.type == 'talk' %}
          <span>{{ value.author }}{% if value.detail %} | {{ value.detail }}{% endif %}</span>
          {% if value.type == 'publication' %}
            <div class="doc-date">{{ value.date.year }}</div>
          {% elif value.type == 'talk' %}
            <div class="doc-date">{{ value.date|date:"M Y" }}</div>
          {% endif %}
        {% else %}
          {% if value.version %}
            <span>v.{{value.version}}</span>
          {% endif %}
          <div class="doc-date">{{ value.date|date:"j M Y" }}</div>
        {% endif %}
      </div>
      {% if value.abstract %}
        <div class="abstract-container">
          <div class="show-more d-none">Show more</div>
          <div class="abstract-text">{{ value.abstract }}</div>
        </div>
      {% endif %}
  </div>
</div>
