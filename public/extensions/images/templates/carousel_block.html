{% load wagtailimages_tags %}

{% with value as slides %}
<div id="carousel" class="carousel block-carousel" data-ride="carousel">
  <div class="carousel-inner">
    {% for slide in slides %}
      {% if forloop.counter0 == 0 %}
        <div class="carousel-item active">
          <div class="carousel-item-container u-flex">
            <div class="carousel-image-container u-flex">
              {% image slide max-1000x500 %}
            </div>
        {% if slide.caption %}
        <div class="carousel-caption-container">
          <div class="carousel-caption">
            {{ slide.caption }}
          </div>
        </div>
        {% endif %}
      </div>
    </div>
    {% else %}
    <div class="carousel-item">
      <div class="carousel-item-container u-flex">
        <div class="carousel-image-container u-flex">
          {% image slide max-1000x500 %}
        </div>
        {% if slide.caption %}
        <div class="carousel-caption-container">
          <div class="carousel-caption">
            {{ slide.caption }}
          </div>
        </div>
        {% endif %}
      </div>
    </div>
    {% endif %}
    {% endfor %}
  </div>

  {% if slides|length > 1 %}
  <a class="carousel-control-prev" href="#carousel" data-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </a>
  <a class="carousel-control-next" href="#carousel" data-slide="next">
    <span class="carousel-control-next-icon"></span>
  </a>
  {% endif %}
  {% if slides|length > 1 %}
  <ol class="carousel-indicators">
    {% for slide in slides %}
    {% if forloop.counter0 == 0 %}
    <li data-target="#carousel" data-slide-to="0" class="active"></li>
    {% else %}
    <li data-target="#carousel" data-slide-to="{{ forloop.counter0 }}"></li>
    {% endif %}
    {% endfor %}
  </ol>
  {% endif %}
  </div>
{% endwith %}
