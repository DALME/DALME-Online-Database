container_commands:
  01_load_venv:
    command: source /opt/python/run/venv/bin/activate
  02_collect_static_and_compress:
    command: python manage.py collectstatic --noinput && python manage.py compress --verbosity=0
  03_set_app_logfile_permissions_and_owner:
    command: chmod a+w /opt/python/log/dalme_app.log && chown root:wsgi /opt/python/log/dalme_app.log
  04_create_djangoq_log:
    command: touch /opt/python/log/djangoq.log
  05_set_djangoq_logfile_permissions and owner:
    command: chmod a+w /opt/python/log/djangoq.log && chown root:wsgi /opt/python/log/djangoq.log
  06_start_djangoq:
    command: python manage.py qcluster
option_settings:
  "aws:elasticbeanstalk:application:environment":
    PYTHONPATH: "/opt/python/current/app:$PYTHONPATH"
