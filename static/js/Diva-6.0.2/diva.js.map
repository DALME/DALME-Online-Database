{"version":3,"file":"diva.js","sources":["webpack:///diva.js"],"sourcesContent":["!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/build/\",n(n.s=2)}([function(e,t,n){(function(e,i){var r;\n/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */(function(){var o=\"Expected a function\",s=\"__lodash_placeholder__\",a=[[\"ary\",128],[\"bind\",1],[\"bindKey\",2],[\"curry\",8],[\"curryRight\",16],[\"flip\",512],[\"partial\",32],[\"partialRight\",64],[\"rearg\",256]],l=\"[object Arguments]\",u=\"[object Array]\",c=\"[object Boolean]\",h=\"[object Date]\",f=\"[object Error]\",d=\"[object Function]\",v=\"[object GeneratorFunction]\",g=\"[object Map]\",p=\"[object Number]\",m=\"[object Object]\",w=\"[object RegExp]\",_=\"[object Set]\",y=\"[object String]\",b=\"[object Symbol]\",S=\"[object WeakMap]\",C=\"[object ArrayBuffer]\",P=\"[object DataView]\",x=\"[object Float32Array]\",L=\"[object Float64Array]\",O=\"[object Int8Array]\",E=\"[object Int16Array]\",I=\"[object Int32Array]\",T=\"[object Uint8Array]\",D=\"[object Uint16Array]\",z=\"[object Uint32Array]\",M=/\\b__p \\+= '';/g,k=/\\b(__p \\+=) '' \\+/g,A=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>\"']/g,V=RegExp(j.source),R=RegExp(F.source),B=/<%-([\\s\\S]+?)%>/g,Z=/<%([\\s\\S]+?)%>/g,H=/<%=([\\s\\S]+?)%>/g,N=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,W=/^\\w*$/,G=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,U=/[\\\\^$.*+?()[\\]{}|]/g,Y=RegExp(U.source),q=/^\\s+|\\s+$/g,$=/^\\s+/,X=/\\s+$/,K=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,J=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,Q=/,? & /,ee=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,te=/\\\\(\\\\)?/g,ne=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,ie=/\\w*$/,re=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,se=/^\\[object .+?Constructor\\]$/,ae=/^0o[0-7]+$/i,le=/^(?:0|[1-9]\\d*)$/,ue=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,ce=/($^)/,he=/['\\n\\r\\u2028\\u2029\\\\]/g,fe=\"\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\",de=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\\\\u2000-\\\\u206f \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",ve=\"[\\\\ud800-\\\\udfff]\",ge=\"[\"+de+\"]\",pe=\"[\"+fe+\"]\",me=\"\\\\d+\",we=\"[\\\\u2700-\\\\u27bf]\",_e=\"[a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff]\",ye=\"[^\\\\ud800-\\\\udfff\"+de+me+\"\\\\u2700-\\\\u27bfa-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xffA-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]\",be=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",Se=\"[^\\\\ud800-\\\\udfff]\",Ce=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",Pe=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",xe=\"[A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]\",Le=\"(?:\"+_e+\"|\"+ye+\")\",Oe=\"(?:\"+xe+\"|\"+ye+\")\",Ee=\"(?:\"+pe+\"|\"+be+\")\"+\"?\",Ie=\"[\\\\ufe0e\\\\ufe0f]?\"+Ee+(\"(?:\\\\u200d(?:\"+[Se,Ce,Pe].join(\"|\")+\")[\\\\ufe0e\\\\ufe0f]?\"+Ee+\")*\"),Te=\"(?:\"+[we,Ce,Pe].join(\"|\")+\")\"+Ie,De=\"(?:\"+[Se+pe+\"?\",pe,Ce,Pe,ve].join(\"|\")+\")\",ze=RegExp(\"['’]\",\"g\"),Me=RegExp(pe,\"g\"),ke=RegExp(be+\"(?=\"+be+\")|\"+De+Ie,\"g\"),Ae=RegExp([xe+\"?\"+_e+\"+(?:['’](?:d|ll|m|re|s|t|ve))?(?=\"+[ge,xe,\"$\"].join(\"|\")+\")\",Oe+\"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=\"+[ge,xe+Le,\"$\"].join(\"|\")+\")\",xe+\"?\"+Le+\"+(?:['’](?:d|ll|m|re|s|t|ve))?\",xe+\"+(?:['’](?:D|LL|M|RE|S|T|VE))?\",\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",me,Te].join(\"|\"),\"g\"),je=RegExp(\"[\\\\u200d\\\\ud800-\\\\udfff\"+fe+\"\\\\ufe0e\\\\ufe0f]\"),Fe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ve=[\"Array\",\"Buffer\",\"DataView\",\"Date\",\"Error\",\"Float32Array\",\"Float64Array\",\"Function\",\"Int8Array\",\"Int16Array\",\"Int32Array\",\"Map\",\"Math\",\"Object\",\"Promise\",\"RegExp\",\"Set\",\"String\",\"Symbol\",\"TypeError\",\"Uint8Array\",\"Uint8ClampedArray\",\"Uint16Array\",\"Uint32Array\",\"WeakMap\",\"_\",\"clearTimeout\",\"isFinite\",\"parseInt\",\"setTimeout\"],Re=-1,Be={};Be[x]=Be[L]=Be[O]=Be[E]=Be[I]=Be[T]=Be[\"[object Uint8ClampedArray]\"]=Be[D]=Be[z]=!0,Be[l]=Be[u]=Be[C]=Be[c]=Be[P]=Be[h]=Be[f]=Be[d]=Be[g]=Be[p]=Be[m]=Be[w]=Be[_]=Be[y]=Be[S]=!1;var Ze={};Ze[l]=Ze[u]=Ze[C]=Ze[P]=Ze[c]=Ze[h]=Ze[x]=Ze[L]=Ze[O]=Ze[E]=Ze[I]=Ze[g]=Ze[p]=Ze[m]=Ze[w]=Ze[_]=Ze[y]=Ze[b]=Ze[T]=Ze[\"[object Uint8ClampedArray]\"]=Ze[D]=Ze[z]=!0,Ze[f]=Ze[d]=Ze[S]=!1;var He={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},Ne=parseFloat,We=parseInt,Ge=\"object\"==typeof e&&e&&e.Object===Object&&e,Ue=\"object\"==typeof self&&self&&self.Object===Object&&self,Ye=Ge||Ue||Function(\"return this\")(),qe=t&&!t.nodeType&&t,$e=qe&&\"object\"==typeof i&&i&&!i.nodeType&&i,Xe=$e&&$e.exports===qe,Ke=Xe&&Ge.process,Je=function(){try{var e=$e&&$e.require&&$e.require(\"util\").types;return e||Ke&&Ke.binding&&Ke.binding(\"util\")}catch(e){}}(),Qe=Je&&Je.isArrayBuffer,et=Je&&Je.isDate,tt=Je&&Je.isMap,nt=Je&&Je.isRegExp,it=Je&&Je.isSet,rt=Je&&Je.isTypedArray;function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function st(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var s=e[r];t(i,s,n(s),e)}return i}function at(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function lt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function ct(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}function ht(e,t){return!!(null==e?0:e.length)&&bt(e,t,0)>-1}function ft(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function dt(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function vt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function gt(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function pt(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function mt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var wt=xt(\"length\");function _t(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function yt(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function bt(e,t,n){return t==t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):yt(e,Ct,n)}function St(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function Ct(e){return e!=e}function Pt(e,t){var n=null==e?0:e.length;return n?Et(e,t)/n:NaN}function xt(e){return function(t){return null==t?void 0:t[e]}}function Lt(e){return function(t){return null==e?void 0:e[t]}}function Ot(e,t,n,i,r){return r(e,(function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)})),n}function Et(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function It(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Tt(e){return function(t){return e(t)}}function Dt(e,t){return dt(t,(function(t){return e[t]}))}function zt(e,t){return e.has(t)}function Mt(e,t){for(var n=-1,i=e.length;++n<i&&bt(t,e[n],0)>-1;);return n}function kt(e,t){for(var n=e.length;n--&&bt(t,e[n],0)>-1;);return n}function At(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var jt=Lt({\"À\":\"A\",\"Á\":\"A\",\"Â\":\"A\",\"Ã\":\"A\",\"Ä\":\"A\",\"Å\":\"A\",\"à\":\"a\",\"á\":\"a\",\"â\":\"a\",\"ã\":\"a\",\"ä\":\"a\",\"å\":\"a\",\"Ç\":\"C\",\"ç\":\"c\",\"Ð\":\"D\",\"ð\":\"d\",\"È\":\"E\",\"É\":\"E\",\"Ê\":\"E\",\"Ë\":\"E\",\"è\":\"e\",\"é\":\"e\",\"ê\":\"e\",\"ë\":\"e\",\"Ì\":\"I\",\"Í\":\"I\",\"Î\":\"I\",\"Ï\":\"I\",\"ì\":\"i\",\"í\":\"i\",\"î\":\"i\",\"ï\":\"i\",\"Ñ\":\"N\",\"ñ\":\"n\",\"Ò\":\"O\",\"Ó\":\"O\",\"Ô\":\"O\",\"Õ\":\"O\",\"Ö\":\"O\",\"Ø\":\"O\",\"ò\":\"o\",\"ó\":\"o\",\"ô\":\"o\",\"õ\":\"o\",\"ö\":\"o\",\"ø\":\"o\",\"Ù\":\"U\",\"Ú\":\"U\",\"Û\":\"U\",\"Ü\":\"U\",\"ù\":\"u\",\"ú\":\"u\",\"û\":\"u\",\"ü\":\"u\",\"Ý\":\"Y\",\"ý\":\"y\",\"ÿ\":\"y\",\"Æ\":\"Ae\",\"æ\":\"ae\",\"Þ\":\"Th\",\"þ\":\"th\",\"ß\":\"ss\",\"Ā\":\"A\",\"Ă\":\"A\",\"Ą\":\"A\",\"ā\":\"a\",\"ă\":\"a\",\"ą\":\"a\",\"Ć\":\"C\",\"Ĉ\":\"C\",\"Ċ\":\"C\",\"Č\":\"C\",\"ć\":\"c\",\"ĉ\":\"c\",\"ċ\":\"c\",\"č\":\"c\",\"Ď\":\"D\",\"Đ\":\"D\",\"ď\":\"d\",\"đ\":\"d\",\"Ē\":\"E\",\"Ĕ\":\"E\",\"Ė\":\"E\",\"Ę\":\"E\",\"Ě\":\"E\",\"ē\":\"e\",\"ĕ\":\"e\",\"ė\":\"e\",\"ę\":\"e\",\"ě\":\"e\",\"Ĝ\":\"G\",\"Ğ\":\"G\",\"Ġ\":\"G\",\"Ģ\":\"G\",\"ĝ\":\"g\",\"ğ\":\"g\",\"ġ\":\"g\",\"ģ\":\"g\",\"Ĥ\":\"H\",\"Ħ\":\"H\",\"ĥ\":\"h\",\"ħ\":\"h\",\"Ĩ\":\"I\",\"Ī\":\"I\",\"Ĭ\":\"I\",\"Į\":\"I\",\"İ\":\"I\",\"ĩ\":\"i\",\"ī\":\"i\",\"ĭ\":\"i\",\"į\":\"i\",\"ı\":\"i\",\"Ĵ\":\"J\",\"ĵ\":\"j\",\"Ķ\":\"K\",\"ķ\":\"k\",\"ĸ\":\"k\",\"Ĺ\":\"L\",\"Ļ\":\"L\",\"Ľ\":\"L\",\"Ŀ\":\"L\",\"Ł\":\"L\",\"ĺ\":\"l\",\"ļ\":\"l\",\"ľ\":\"l\",\"ŀ\":\"l\",\"ł\":\"l\",\"Ń\":\"N\",\"Ņ\":\"N\",\"Ň\":\"N\",\"Ŋ\":\"N\",\"ń\":\"n\",\"ņ\":\"n\",\"ň\":\"n\",\"ŋ\":\"n\",\"Ō\":\"O\",\"Ŏ\":\"O\",\"Ő\":\"O\",\"ō\":\"o\",\"ŏ\":\"o\",\"ő\":\"o\",\"Ŕ\":\"R\",\"Ŗ\":\"R\",\"Ř\":\"R\",\"ŕ\":\"r\",\"ŗ\":\"r\",\"ř\":\"r\",\"Ś\":\"S\",\"Ŝ\":\"S\",\"Ş\":\"S\",\"Š\":\"S\",\"ś\":\"s\",\"ŝ\":\"s\",\"ş\":\"s\",\"š\":\"s\",\"Ţ\":\"T\",\"Ť\":\"T\",\"Ŧ\":\"T\",\"ţ\":\"t\",\"ť\":\"t\",\"ŧ\":\"t\",\"Ũ\":\"U\",\"Ū\":\"U\",\"Ŭ\":\"U\",\"Ů\":\"U\",\"Ű\":\"U\",\"Ų\":\"U\",\"ũ\":\"u\",\"ū\":\"u\",\"ŭ\":\"u\",\"ů\":\"u\",\"ű\":\"u\",\"ų\":\"u\",\"Ŵ\":\"W\",\"ŵ\":\"w\",\"Ŷ\":\"Y\",\"ŷ\":\"y\",\"Ÿ\":\"Y\",\"Ź\":\"Z\",\"Ż\":\"Z\",\"Ž\":\"Z\",\"ź\":\"z\",\"ż\":\"z\",\"ž\":\"z\",\"Ĳ\":\"IJ\",\"ĳ\":\"ij\",\"Œ\":\"Oe\",\"œ\":\"oe\",\"ŉ\":\"'n\",\"ſ\":\"s\"}),Ft=Lt({\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"});function Vt(e){return\"\\\\\"+He[e]}function Rt(e){return je.test(e)}function Bt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function Zt(e,t){return function(n){return e(t(n))}}function Ht(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[r++]=n)}return o}function Nt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Wt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Gt(e){return Rt(e)?function(e){var t=ke.lastIndex=0;for(;ke.test(e);)++t;return t}(e):wt(e)}function Ut(e){return Rt(e)?function(e){return e.match(ke)||[]}(e):function(e){return e.split(\"\")}(e)}var Yt=Lt({\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"',\"&#39;\":\"'\"});var qt=function e(t){var n,i=(t=null==t?Ye:qt.defaults(Ye.Object(),t,qt.pick(Ye,Ve))).Array,r=t.Date,fe=t.Error,de=t.Function,ve=t.Math,ge=t.Object,pe=t.RegExp,me=t.String,we=t.TypeError,_e=i.prototype,ye=de.prototype,be=ge.prototype,Se=t[\"__core-js_shared__\"],Ce=ye.toString,Pe=be.hasOwnProperty,xe=0,Le=(n=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+n:\"\",Oe=be.toString,Ee=Ce.call(ge),Ie=Ye._,Te=pe(\"^\"+Ce.call(Pe).replace(U,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),De=Xe?t.Buffer:void 0,ke=t.Symbol,je=t.Uint8Array,He=De?De.allocUnsafe:void 0,Ge=Zt(ge.getPrototypeOf,ge),Ue=ge.create,qe=be.propertyIsEnumerable,$e=_e.splice,Ke=ke?ke.isConcatSpreadable:void 0,Je=ke?ke.iterator:void 0,wt=ke?ke.toStringTag:void 0,Lt=function(){try{var e=Qr(ge,\"defineProperty\");return e({},\"\",{}),e}catch(e){}}(),$t=t.clearTimeout!==Ye.clearTimeout&&t.clearTimeout,Xt=r&&r.now!==Ye.Date.now&&r.now,Kt=t.setTimeout!==Ye.setTimeout&&t.setTimeout,Jt=ve.ceil,Qt=ve.floor,en=ge.getOwnPropertySymbols,tn=De?De.isBuffer:void 0,nn=t.isFinite,rn=_e.join,on=Zt(ge.keys,ge),sn=ve.max,an=ve.min,ln=r.now,un=t.parseInt,cn=ve.random,hn=_e.reverse,fn=Qr(t,\"DataView\"),dn=Qr(t,\"Map\"),vn=Qr(t,\"Promise\"),gn=Qr(t,\"Set\"),pn=Qr(t,\"WeakMap\"),mn=Qr(ge,\"create\"),wn=pn&&new pn,_n={},yn=Oo(fn),bn=Oo(dn),Sn=Oo(vn),Cn=Oo(gn),Pn=Oo(pn),xn=ke?ke.prototype:void 0,Ln=xn?xn.valueOf:void 0,On=xn?xn.toString:void 0;function En(e){if(Ws(e)&&!Ms(e)&&!(e instanceof zn)){if(e instanceof Dn)return e;if(Pe.call(e,\"__wrapped__\"))return Eo(e)}return new Dn(e)}var In=function(){function e(){}return function(t){if(!Ns(t))return{};if(Ue)return Ue(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Tn(){}function Dn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function An(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new An;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new kn(e);this.size=t.size}function Vn(e,t){var n=Ms(e),i=!n&&zs(e),r=!n&&!i&&Fs(e),o=!n&&!i&&!r&&Js(e),s=n||i||r||o,a=s?It(e.length,me):[],l=a.length;for(var u in e)!t&&!Pe.call(e,u)||s&&(\"length\"==u||r&&(\"offset\"==u||\"parent\"==u)||o&&(\"buffer\"==u||\"byteLength\"==u||\"byteOffset\"==u)||so(u,l))||a.push(u);return a}function Rn(e){var t=e.length;return t?e[ji(0,t-1)]:void 0}function Bn(e,t){return Po(mr(e),$n(t,0,e.length))}function Zn(e){return Po(mr(e))}function Hn(e,t,n){(void 0===n||Is(e[t],n))&&(void 0!==n||t in e)||Yn(e,t,n)}function Nn(e,t,n){var i=e[t];Pe.call(e,t)&&Is(i,n)&&(void 0!==n||t in e)||Yn(e,t,n)}function Wn(e,t){for(var n=e.length;n--;)if(Is(e[n][0],t))return n;return-1}function Gn(e,t,n,i){return ei(e,(function(e,r,o){t(i,e,n(e),o)})),i}function Un(e,t){return e&&wr(t,ya(t),e)}function Yn(e,t,n){\"__proto__\"==t&&Lt?Lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function qn(e,t){for(var n=-1,r=t.length,o=i(r),s=null==e;++n<r;)o[n]=s?void 0:ga(e,t[n]);return o}function $n(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Xn(e,t,n,i,r,o){var s,a=1&t,u=2&t,f=4&t;if(n&&(s=r?n(e,i,r,o):n(e)),void 0!==s)return s;if(!Ns(e))return e;var S=Ms(e);if(S){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&\"string\"==typeof e[0]&&Pe.call(e,\"index\")&&(n.index=e.index,n.input=e.input);return n}(e),!a)return mr(e,s)}else{var M=no(e),k=M==d||M==v;if(Fs(e))return hr(e,a);if(M==m||M==l||k&&!r){if(s=u||k?{}:ro(e),!a)return u?function(e,t){return wr(e,to(e),t)}(e,function(e,t){return e&&wr(t,ba(t),e)}(s,e)):function(e,t){return wr(e,eo(e),t)}(e,Un(s,e))}else{if(!Ze[M])return r?e:{};s=function(e,t,n){var i=e.constructor;switch(t){case C:return fr(e);case c:case h:return new i(+e);case P:return function(e,t){var n=t?fr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case x:case L:case O:case E:case I:case T:case\"[object Uint8ClampedArray]\":case D:case z:return dr(e,n);case g:return new i;case p:case y:return new i(e);case w:return function(e){var t=new e.constructor(e.source,ie.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new i;case b:return r=e,Ln?ge(Ln.call(r)):{}}var r}(e,M,a)}}o||(o=new Fn);var A=o.get(e);if(A)return A;o.set(e,s),$s(e)?e.forEach((function(i){s.add(Xn(i,t,n,i,e,o))})):Gs(e)&&e.forEach((function(i,r){s.set(r,Xn(i,t,n,r,e,o))}));var j=S?void 0:(f?u?Ur:Gr:u?ba:ya)(e);return at(j||e,(function(i,r){j&&(i=e[r=i]),Nn(s,r,Xn(i,t,n,r,e,o))})),s}function Kn(e,t,n){var i=n.length;if(null==e)return!i;for(e=ge(e);i--;){var r=n[i],o=t[r],s=e[r];if(void 0===s&&!(r in e)||!o(s))return!1}return!0}function Jn(e,t,n){if(\"function\"!=typeof e)throw new we(o);return yo((function(){e.apply(void 0,n)}),t)}function Qn(e,t,n,i){var r=-1,o=ht,s=!0,a=e.length,l=[],u=t.length;if(!a)return l;n&&(t=dt(t,Tt(n))),i?(o=ft,s=!1):t.length>=200&&(o=zt,s=!1,t=new jn(t));e:for(;++r<a;){var c=e[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,s&&h==h){for(var f=u;f--;)if(t[f]===h)continue e;l.push(c)}else o(t,h,i)||l.push(c)}return l}En.templateSettings={escape:B,evaluate:Z,interpolate:H,variable:\"\",imports:{_:En}},En.prototype=Tn.prototype,En.prototype.constructor=En,Dn.prototype=In(Tn.prototype),Dn.prototype.constructor=Dn,zn.prototype=In(Tn.prototype),zn.prototype.constructor=zn,Mn.prototype.clear=function(){this.__data__=mn?mn(null):{},this.size=0},Mn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Mn.prototype.get=function(e){var t=this.__data__;if(mn){var n=t[e];return\"__lodash_hash_undefined__\"===n?void 0:n}return Pe.call(t,e)?t[e]:void 0},Mn.prototype.has=function(e){var t=this.__data__;return mn?void 0!==t[e]:Pe.call(t,e)},Mn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mn&&void 0===t?\"__lodash_hash_undefined__\":t,this},kn.prototype.clear=function(){this.__data__=[],this.size=0},kn.prototype.delete=function(e){var t=this.__data__,n=Wn(t,e);return!(n<0)&&(n==t.length-1?t.pop():$e.call(t,n,1),--this.size,!0)},kn.prototype.get=function(e){var t=this.__data__,n=Wn(t,e);return n<0?void 0:t[n][1]},kn.prototype.has=function(e){return Wn(this.__data__,e)>-1},kn.prototype.set=function(e,t){var n=this.__data__,i=Wn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},An.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(dn||kn),string:new Mn}},An.prototype.delete=function(e){var t=Kr(this,e).delete(e);return this.size-=t?1:0,t},An.prototype.get=function(e){return Kr(this,e).get(e)},An.prototype.has=function(e){return Kr(this,e).has(e)},An.prototype.set=function(e,t){var n=Kr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},jn.prototype.add=jn.prototype.push=function(e){return this.__data__.set(e,\"__lodash_hash_undefined__\"),this},jn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new kn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof kn){var i=n.__data__;if(!dn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new An(i)}return n.set(e,t),this.size=n.size,this};var ei=br(li),ti=br(ui,!0);function ni(e,t){var n=!0;return ei(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function ii(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],s=t(o);if(null!=s&&(void 0===a?s==s&&!Ks(s):n(s,a)))var a=s,l=o}return l}function ri(e,t){var n=[];return ei(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function oi(e,t,n,i,r){var o=-1,s=e.length;for(n||(n=oo),r||(r=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?oi(a,t-1,n,i,r):vt(r,a):i||(r[r.length]=a)}return r}var si=Sr(),ai=Sr(!0);function li(e,t){return e&&si(e,t,ya)}function ui(e,t){return e&&ai(e,t,ya)}function ci(e,t){return ct(t,(function(t){return Bs(e[t])}))}function hi(e,t){for(var n=0,i=(t=ar(t,e)).length;null!=e&&n<i;)e=e[Lo(t[n++])];return n&&n==i?e:void 0}function fi(e,t,n){var i=t(e);return Ms(e)?i:vt(i,n(e))}function di(e){return null==e?void 0===e?\"[object Undefined]\":\"[object Null]\":wt&&wt in ge(e)?function(e){var t=Pe.call(e,wt),n=e[wt];try{e[wt]=void 0;var i=!0}catch(e){}var r=Oe.call(e);i&&(t?e[wt]=n:delete e[wt]);return r}(e):function(e){return Oe.call(e)}(e)}function vi(e,t){return e>t}function gi(e,t){return null!=e&&Pe.call(e,t)}function pi(e,t){return null!=e&&t in ge(e)}function mi(e,t,n){for(var r=n?ft:ht,o=e[0].length,s=e.length,a=s,l=i(s),u=1/0,c=[];a--;){var h=e[a];a&&t&&(h=dt(h,Tt(t))),u=an(h.length,u),l[a]=!n&&(t||o>=120&&h.length>=120)?new jn(a&&h):void 0}h=e[0];var f=-1,d=l[0];e:for(;++f<o&&c.length<u;){var v=h[f],g=t?t(v):v;if(v=n||0!==v?v:0,!(d?zt(d,g):r(c,g,n))){for(a=s;--a;){var p=l[a];if(!(p?zt(p,g):r(e[a],g,n)))continue e}d&&d.push(g),c.push(v)}}return c}function wi(e,t,n){var i=null==(e=po(e,t=ar(t,e)))?e:e[Lo(Ro(t))];return null==i?void 0:ot(i,e,n)}function _i(e){return Ws(e)&&di(e)==l}function yi(e,t,n,i,r){return e===t||(null==e||null==t||!Ws(e)&&!Ws(t)?e!=e&&t!=t:function(e,t,n,i,r,o){var s=Ms(e),a=Ms(t),d=s?u:no(e),v=a?u:no(t),S=(d=d==l?m:d)==m,x=(v=v==l?m:v)==m,L=d==v;if(L&&Fs(e)){if(!Fs(t))return!1;s=!0,S=!1}if(L&&!S)return o||(o=new Fn),s||Js(e)?Nr(e,t,n,i,r,o):function(e,t,n,i,r,o,s){switch(n){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!o(new je(e),new je(t)));case c:case h:case p:return Is(+e,+t);case f:return e.name==t.name&&e.message==t.message;case w:case y:return e==t+\"\";case g:var a=Bt;case _:var l=1&i;if(a||(a=Nt),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;i|=2,s.set(e,t);var d=Nr(a(e),a(t),i,r,o,s);return s.delete(e),d;case b:if(Ln)return Ln.call(e)==Ln.call(t)}return!1}(e,t,d,n,i,r,o);if(!(1&n)){var O=S&&Pe.call(e,\"__wrapped__\"),E=x&&Pe.call(t,\"__wrapped__\");if(O||E){var I=O?e.value():e,T=E?t.value():t;return o||(o=new Fn),r(I,T,n,i,o)}}if(!L)return!1;return o||(o=new Fn),function(e,t,n,i,r,o){var s=1&n,a=Gr(e),l=a.length,u=Gr(t).length;if(l!=u&&!s)return!1;var c=l;for(;c--;){var h=a[c];if(!(s?h in t:Pe.call(t,h)))return!1}var f=o.get(e),d=o.get(t);if(f&&d)return f==t&&d==e;var v=!0;o.set(e,t),o.set(t,e);var g=s;for(;++c<l;){h=a[c];var p=e[h],m=t[h];if(i)var w=s?i(m,p,h,t,e,o):i(p,m,h,e,t,o);if(!(void 0===w?p===m||r(p,m,n,i,o):w)){v=!1;break}g||(g=\"constructor\"==h)}if(v&&!g){var _=e.constructor,y=t.constructor;_!=y&&\"constructor\"in e&&\"constructor\"in t&&!(\"function\"==typeof _&&_ instanceof _&&\"function\"==typeof y&&y instanceof y)&&(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,i,r,o)}(e,t,n,i,yi,r))}function bi(e,t,n,i){var r=n.length,o=r,s=!i;if(null==e)return!o;for(e=ge(e);r--;){var a=n[r];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<o;){var l=(a=n[r])[0],u=e[l],c=a[1];if(s&&a[2]){if(void 0===u&&!(l in e))return!1}else{var h=new Fn;if(i)var f=i(u,c,l,e,t,h);if(!(void 0===f?yi(c,u,3,i,h):f))return!1}}return!0}function Si(e){return!(!Ns(e)||(t=e,Le&&Le in t))&&(Bs(e)?Te:se).test(Oo(e));var t}function Ci(e){return\"function\"==typeof e?e:null==e?Ua:\"object\"==typeof e?Ms(e)?Ii(e[0],e[1]):Ei(e):tl(e)}function Pi(e){if(!ho(e))return on(e);var t=[];for(var n in ge(e))Pe.call(e,n)&&\"constructor\"!=n&&t.push(n);return t}function xi(e){if(!Ns(e))return function(e){var t=[];if(null!=e)for(var n in ge(e))t.push(n);return t}(e);var t=ho(e),n=[];for(var i in e)(\"constructor\"!=i||!t&&Pe.call(e,i))&&n.push(i);return n}function Li(e,t){return e<t}function Oi(e,t){var n=-1,r=As(e)?i(e.length):[];return ei(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Ei(e){var t=Jr(e);return 1==t.length&&t[0][2]?vo(t[0][0],t[0][1]):function(n){return n===e||bi(n,e,t)}}function Ii(e,t){return lo(e)&&fo(t)?vo(Lo(e),t):function(n){var i=ga(n,e);return void 0===i&&i===t?pa(n,e):yi(t,i,3)}}function Ti(e,t,n,i,r){e!==t&&si(t,(function(o,s){if(r||(r=new Fn),Ns(o))!function(e,t,n,i,r,o,s){var a=wo(e,n),l=wo(t,n),u=s.get(l);if(u)return void Hn(e,n,u);var c=o?o(a,l,n+\"\",e,t,s):void 0,h=void 0===c;if(h){var f=Ms(l),d=!f&&Fs(l),v=!f&&!d&&Js(l);c=l,f||d||v?Ms(a)?c=a:js(a)?c=mr(a):d?(h=!1,c=hr(l,!0)):v?(h=!1,c=dr(l,!0)):c=[]:Ys(l)||zs(l)?(c=a,zs(a)?c=sa(a):Ns(a)&&!Bs(a)||(c=ro(l))):h=!1}h&&(s.set(l,c),r(c,l,i,o,s),s.delete(l));Hn(e,n,c)}(e,t,s,n,Ti,i,r);else{var a=i?i(wo(e,s),o,s+\"\",e,t,r):void 0;void 0===a&&(a=o),Hn(e,s,a)}}),ba)}function Di(e,t){var n=e.length;if(n)return so(t+=t<0?n:0,n)?e[t]:void 0}function zi(e,t,n){t=t.length?dt(t,(function(e){return Ms(e)?function(t){return hi(t,1===e.length?e[0]:e)}:e})):[Ua];var i=-1;return t=dt(t,Tt(Xr())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Oi(e,(function(e,n,r){return{criteria:dt(t,(function(t){return t(e)})),index:++i,value:e}})),(function(e,t){return function(e,t,n){var i=-1,r=e.criteria,o=t.criteria,s=r.length,a=n.length;for(;++i<s;){var l=vr(r[i],o[i]);if(l){if(i>=a)return l;var u=n[i];return l*(\"desc\"==u?-1:1)}}return e.index-t.index}(e,t,n)}))}function Mi(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var s=t[i],a=hi(e,s);n(a,s)&&Zi(o,ar(s,e),a)}return o}function ki(e,t,n,i){var r=i?St:bt,o=-1,s=t.length,a=e;for(e===t&&(t=mr(t)),n&&(a=dt(e,Tt(n)));++o<s;)for(var l=0,u=t[o],c=n?n(u):u;(l=r(a,c,l,i))>-1;)a!==e&&$e.call(a,l,1),$e.call(e,l,1);return e}function Ai(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;so(r)?$e.call(e,r,1):Qi(e,r)}}return e}function ji(e,t){return e+Qt(cn()*(t-e+1))}function Fi(e,t){var n=\"\";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Qt(t/2))&&(e+=e)}while(t);return n}function Vi(e,t){return bo(go(e,t,Ua),e+\"\")}function Ri(e){return Rn(Ia(e))}function Bi(e,t){var n=Ia(e);return Po(n,$n(t,0,n.length))}function Zi(e,t,n,i){if(!Ns(e))return e;for(var r=-1,o=(t=ar(t,e)).length,s=o-1,a=e;null!=a&&++r<o;){var l=Lo(t[r]),u=n;if(\"__proto__\"===l||\"constructor\"===l||\"prototype\"===l)return e;if(r!=s){var c=a[l];void 0===(u=i?i(c,l,a):void 0)&&(u=Ns(c)?c:so(t[r+1])?[]:{})}Nn(a,l,u),a=a[l]}return e}var Hi=wn?function(e,t){return wn.set(e,t),e}:Ua,Ni=Lt?function(e,t){return Lt(e,\"toString\",{configurable:!0,enumerable:!1,value:Na(t),writable:!0})}:Ua;function Wi(e){return Po(Ia(e))}function Gi(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=i(o);++r<o;)s[r]=e[r+t];return s}function Ui(e,t){var n;return ei(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function Yi(e,t,n){var i=0,r=null==e?i:e.length;if(\"number\"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=e[o];null!==s&&!Ks(s)&&(n?s<=t:s<t)?i=o+1:r=o}return r}return qi(e,t,Ua,n)}function qi(e,t,n,i){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,a=null===t,l=Ks(t),u=void 0===t;r<o;){var c=Qt((r+o)/2),h=n(e[c]),f=void 0!==h,d=null===h,v=h==h,g=Ks(h);if(s)var p=i||v;else p=u?v&&(i||f):a?v&&f&&(i||!d):l?v&&f&&!d&&(i||!g):!d&&!g&&(i?h<=t:h<t);p?r=c+1:o=c}return an(o,4294967294)}function $i(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!Is(a,l)){var l=a;o[r++]=0===s?0:s}}return o}function Xi(e){return\"number\"==typeof e?e:Ks(e)?NaN:+e}function Ki(e){if(\"string\"==typeof e)return e;if(Ms(e))return dt(e,Ki)+\"\";if(Ks(e))return On?On.call(e):\"\";var t=e+\"\";return\"0\"==t&&1/e==-1/0?\"-0\":t}function Ji(e,t,n){var i=-1,r=ht,o=e.length,s=!0,a=[],l=a;if(n)s=!1,r=ft;else if(o>=200){var u=t?null:Fr(e);if(u)return Nt(u);s=!1,r=zt,l=new jn}else l=t?[]:a;e:for(;++i<o;){var c=e[i],h=t?t(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var f=l.length;f--;)if(l[f]===h)continue e;t&&l.push(h),a.push(c)}else r(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}function Qi(e,t){return null==(e=po(e,t=ar(t,e)))||delete e[Lo(Ro(t))]}function er(e,t,n,i){return Zi(e,t,n(hi(e,t)),i)}function tr(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?Gi(e,i?0:o,i?o+1:r):Gi(e,i?o+1:0,i?r:o)}function nr(e,t){var n=e;return n instanceof zn&&(n=n.value()),gt(t,(function(e,t){return t.func.apply(t.thisArg,vt([e],t.args))}),n)}function ir(e,t,n){var r=e.length;if(r<2)return r?Ji(e[0]):[];for(var o=-1,s=i(r);++o<r;)for(var a=e[o],l=-1;++l<r;)l!=o&&(s[o]=Qn(s[o]||a,e[l],t,n));return Ji(oi(s,1),t,n)}function rr(e,t,n){for(var i=-1,r=e.length,o=t.length,s={};++i<r;){var a=i<o?t[i]:void 0;n(s,e[i],a)}return s}function or(e){return js(e)?e:[]}function sr(e){return\"function\"==typeof e?e:Ua}function ar(e,t){return Ms(e)?e:lo(e,t)?[e]:xo(aa(e))}var lr=Vi;function ur(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:Gi(e,t,n)}var cr=$t||function(e){return Ye.clearTimeout(e)};function hr(e,t){if(t)return e.slice();var n=e.length,i=He?He(n):new e.constructor(n);return e.copy(i),i}function fr(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function dr(e,t){var n=t?fr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function vr(e,t){if(e!==t){var n=void 0!==e,i=null===e,r=e==e,o=Ks(e),s=void 0!==t,a=null===t,l=t==t,u=Ks(t);if(!a&&!u&&!o&&e>t||o&&s&&l&&!a&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!o&&!u&&e<t||u&&n&&r&&!i&&!o||a&&n&&r||!s&&r||!l)return-1}return 0}function gr(e,t,n,r){for(var o=-1,s=e.length,a=n.length,l=-1,u=t.length,c=sn(s-a,0),h=i(u+c),f=!r;++l<u;)h[l]=t[l];for(;++o<a;)(f||o<s)&&(h[n[o]]=e[o]);for(;c--;)h[l++]=e[o++];return h}function pr(e,t,n,r){for(var o=-1,s=e.length,a=-1,l=n.length,u=-1,c=t.length,h=sn(s-l,0),f=i(h+c),d=!r;++o<h;)f[o]=e[o];for(var v=o;++u<c;)f[v+u]=t[u];for(;++a<l;)(d||o<s)&&(f[v+n[a]]=e[o++]);return f}function mr(e,t){var n=-1,r=e.length;for(t||(t=i(r));++n<r;)t[n]=e[n];return t}function wr(e,t,n,i){var r=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=i?i(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),r?Yn(n,a,l):Nn(n,a,l)}return n}function _r(e,t){return function(n,i){var r=Ms(n)?st:Gn,o=t?t():{};return r(n,e,Xr(i,2),o)}}function yr(e){return Vi((function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=e.length>3&&\"function\"==typeof o?(r--,o):void 0,s&&ao(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),t=ge(t);++i<r;){var a=n[i];a&&e(t,a,i,o)}return t}))}function br(e,t){return function(n,i){if(null==n)return n;if(!As(n))return e(n,i);for(var r=n.length,o=t?r:-1,s=ge(n);(t?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function Sr(e){return function(t,n,i){for(var r=-1,o=ge(t),s=i(t),a=s.length;a--;){var l=s[e?a:++r];if(!1===n(o[l],l,o))break}return t}}function Cr(e){return function(t){var n=Rt(t=aa(t))?Ut(t):void 0,i=n?n[0]:t.charAt(0),r=n?ur(n,1).join(\"\"):t.slice(1);return i[e]()+r}}function Pr(e){return function(t){return gt(Ba(za(t).replace(ze,\"\")),e,\"\")}}function xr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=In(e.prototype),i=e.apply(n,t);return Ns(i)?i:n}}function Lr(e){return function(t,n,i){var r=ge(t);if(!As(t)){var o=Xr(n,3);t=ya(t),n=function(e){return o(r[e],e,r)}}var s=e(t,n,i);return s>-1?r[o?t[s]:s]:void 0}}function Or(e){return Wr((function(t){var n=t.length,i=n,r=Dn.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if(\"function\"!=typeof s)throw new we(o);if(r&&!a&&\"wrapper\"==qr(s))var a=new Dn([],!0)}for(i=a?i:n;++i<n;){var l=qr(s=t[i]),u=\"wrapper\"==l?Yr(s):void 0;a=u&&uo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[qr(u[0])].apply(a,u[3]):1==s.length&&uo(s)?a[l]():a.thru(s)}return function(){var e=arguments,i=e[0];if(a&&1==e.length&&Ms(i))return a.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}}))}function Er(e,t,n,r,o,s,a,l,u,c){var h=128&t,f=1&t,d=2&t,v=24&t,g=512&t,p=d?void 0:xr(e);return function m(){for(var w=arguments.length,_=i(w),y=w;y--;)_[y]=arguments[y];if(v)var b=$r(m),S=At(_,b);if(r&&(_=gr(_,r,o,v)),s&&(_=pr(_,s,a,v)),w-=S,v&&w<c){var C=Ht(_,b);return Ar(e,t,Er,m.placeholder,n,_,C,l,u,c-w)}var P=f?n:this,x=d?P[e]:e;return w=_.length,l?_=mo(_,l):g&&w>1&&_.reverse(),h&&u<w&&(_.length=u),this&&this!==Ye&&this instanceof m&&(x=p||xr(x)),x.apply(P,_)}}function Ir(e,t){return function(n,i){return function(e,t,n,i){return li(e,(function(e,r,o){t(i,n(e),r,o)})),i}(n,e,t(i),{})}}function Tr(e,t){return function(n,i){var r;if(void 0===n&&void 0===i)return t;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;\"string\"==typeof n||\"string\"==typeof i?(n=Ki(n),i=Ki(i)):(n=Xi(n),i=Xi(i)),r=e(n,i)}return r}}function Dr(e){return Wr((function(t){return t=dt(t,Tt(Xr())),Vi((function(n){var i=this;return e(t,(function(e){return ot(e,i,n)}))}))}))}function zr(e,t){var n=(t=void 0===t?\" \":Ki(t)).length;if(n<2)return n?Fi(t,e):t;var i=Fi(t,Jt(e/Gt(t)));return Rt(t)?ur(Ut(i),0,e).join(\"\"):i.slice(0,e)}function Mr(e){return function(t,n,r){return r&&\"number\"!=typeof r&&ao(t,n,r)&&(n=r=void 0),t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n,r){for(var o=-1,s=sn(Jt((t-e)/(n||1)),0),a=i(s);s--;)a[r?s:++o]=e,e+=n;return a}(t,n,r=void 0===r?t<n?1:-1:na(r),e)}}function kr(e){return function(t,n){return\"string\"==typeof t&&\"string\"==typeof n||(t=oa(t),n=oa(n)),e(t,n)}}function Ar(e,t,n,i,r,o,s,a,l,u){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);var h=[e,t,r,c?o:void 0,c?s:void 0,c?void 0:o,c?void 0:s,a,l,u],f=n.apply(void 0,h);return uo(e)&&_o(f,h),f.placeholder=i,So(f,e,t)}function jr(e){var t=ve[e];return function(e,n){if(e=oa(e),(n=null==n?0:an(ia(n),292))&&nn(e)){var i=(aa(e)+\"e\").split(\"e\");return+((i=(aa(t(i[0]+\"e\"+(+i[1]+n)))+\"e\").split(\"e\"))[0]+\"e\"+(+i[1]-n))}return t(e)}}var Fr=gn&&1/Nt(new gn([,-0]))[1]==1/0?function(e){return new gn(e)}:Ka;function Vr(e){return function(t){var n=no(t);return n==g?Bt(t):n==_?Wt(t):function(e,t){return dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Rr(e,t,n,r,a,l,u,c){var h=2&t;if(!h&&\"function\"!=typeof e)throw new we(o);var f=r?r.length:0;if(f||(t&=-97,r=a=void 0),u=void 0===u?u:sn(ia(u),0),c=void 0===c?c:ia(c),f-=a?a.length:0,64&t){var d=r,v=a;r=a=void 0}var g=h?void 0:Yr(e),p=[e,t,n,r,a,d,v,l,u,c];if(g&&function(e,t){var n=e[1],i=t[1],r=n|i,o=r<131,a=128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?gr(u,l,t[4]):l,e[4]=u?Ht(e[3],s):t[4]}(l=t[5])&&(u=e[5],e[5]=u?pr(u,l,t[6]):l,e[6]=u?Ht(e[5],s):t[6]);(l=t[7])&&(e[7]=l);128&i&&(e[8]=null==e[8]?t[8]:an(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(p,g),e=p[0],t=p[1],n=p[2],r=p[3],a=p[4],!(c=p[9]=void 0===p[9]?h?0:e.length:sn(p[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)m=8==t||16==t?function(e,t,n){var r=xr(e);return function o(){for(var s=arguments.length,a=i(s),l=s,u=$r(o);l--;)a[l]=arguments[l];var c=s<3&&a[0]!==u&&a[s-1]!==u?[]:Ht(a,u);if((s-=c.length)<n)return Ar(e,t,Er,o.placeholder,void 0,a,c,void 0,void 0,n-s);var h=this&&this!==Ye&&this instanceof o?r:e;return ot(h,this,a)}}(e,t,c):32!=t&&33!=t||a.length?Er.apply(void 0,p):function(e,t,n,r){var o=1&t,s=xr(e);return function t(){for(var a=-1,l=arguments.length,u=-1,c=r.length,h=i(c+l),f=this&&this!==Ye&&this instanceof t?s:e;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++a];return ot(f,o?n:this,h)}}(e,t,n,r);else var m=function(e,t,n){var i=1&t,r=xr(e);return function t(){var o=this&&this!==Ye&&this instanceof t?r:e;return o.apply(i?n:this,arguments)}}(e,t,n);return So((g?Hi:_o)(m,p),e,t)}function Br(e,t,n,i){return void 0===e||Is(e,be[n])&&!Pe.call(i,n)?t:e}function Zr(e,t,n,i,r,o){return Ns(e)&&Ns(t)&&(o.set(t,e),Ti(e,t,void 0,Zr,o),o.delete(t)),e}function Hr(e){return Ys(e)?void 0:e}function Nr(e,t,n,i,r,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var h=-1,f=!0,d=2&n?new jn:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var v=e[h],g=t[h];if(i)var p=s?i(g,v,h,t,e,o):i(v,g,h,e,t,o);if(void 0!==p){if(p)continue;f=!1;break}if(d){if(!mt(t,(function(e,t){if(!zt(d,t)&&(v===e||r(v,e,n,i,o)))return d.push(t)}))){f=!1;break}}else if(v!==g&&!r(v,g,n,i,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Wr(e){return bo(go(e,void 0,ko),e+\"\")}function Gr(e){return fi(e,ya,eo)}function Ur(e){return fi(e,ba,to)}var Yr=wn?function(e){return wn.get(e)}:Ka;function qr(e){for(var t=e.name+\"\",n=_n[t],i=Pe.call(_n,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function $r(e){return(Pe.call(En,\"placeholder\")?En:e).placeholder}function Xr(){var e=En.iteratee||Ya;return e=e===Ya?Ci:e,arguments.length?e(arguments[0],arguments[1]):e}function Kr(e,t){var n,i,r=e.__data__;return(\"string\"==(i=typeof(n=t))||\"number\"==i||\"symbol\"==i||\"boolean\"==i?\"__proto__\"!==n:null===n)?r[\"string\"==typeof t?\"string\":\"hash\"]:r.map}function Jr(e){for(var t=ya(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,fo(r)]}return t}function Qr(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Si(n)?n:void 0}var eo=en?function(e){return null==e?[]:(e=ge(e),ct(en(e),(function(t){return qe.call(e,t)})))}:rl,to=en?function(e){for(var t=[];e;)vt(t,eo(e)),e=Ge(e);return t}:rl,no=di;function io(e,t,n){for(var i=-1,r=(t=ar(t,e)).length,o=!1;++i<r;){var s=Lo(t[i]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&Hs(r)&&so(s,r)&&(Ms(e)||zs(e))}function ro(e){return\"function\"!=typeof e.constructor||ho(e)?{}:In(Ge(e))}function oo(e){return Ms(e)||zs(e)||!!(Ke&&e&&e[Ke])}function so(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&(\"number\"==n||\"symbol\"!=n&&le.test(e))&&e>-1&&e%1==0&&e<t}function ao(e,t,n){if(!Ns(n))return!1;var i=typeof t;return!!(\"number\"==i?As(n)&&so(t,n.length):\"string\"==i&&t in n)&&Is(n[t],e)}function lo(e,t){if(Ms(e))return!1;var n=typeof e;return!(\"number\"!=n&&\"symbol\"!=n&&\"boolean\"!=n&&null!=e&&!Ks(e))||(W.test(e)||!N.test(e)||null!=t&&e in ge(t))}function uo(e){var t=qr(e),n=En[t];if(\"function\"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var i=Yr(n);return!!i&&e===i[0]}(fn&&no(new fn(new ArrayBuffer(1)))!=P||dn&&no(new dn)!=g||vn&&\"[object Promise]\"!=no(vn.resolve())||gn&&no(new gn)!=_||pn&&no(new pn)!=S)&&(no=function(e){var t=di(e),n=t==m?e.constructor:void 0,i=n?Oo(n):\"\";if(i)switch(i){case yn:return P;case bn:return g;case Sn:return\"[object Promise]\";case Cn:return _;case Pn:return S}return t});var co=Se?Bs:ol;function ho(e){var t=e&&e.constructor;return e===(\"function\"==typeof t&&t.prototype||be)}function fo(e){return e==e&&!Ns(e)}function vo(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ge(n)))}}function go(e,t,n){return t=sn(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=sn(r.length-t,0),a=i(s);++o<s;)a[o]=r[t+o];o=-1;for(var l=i(t+1);++o<t;)l[o]=r[o];return l[t]=n(a),ot(e,this,l)}}function po(e,t){return t.length<2?e:hi(e,Gi(t,0,-1))}function mo(e,t){for(var n=e.length,i=an(t.length,n),r=mr(e);i--;){var o=t[i];e[i]=so(o,n)?r[o]:void 0}return e}function wo(e,t){if((\"constructor\"!==t||\"function\"!=typeof e[t])&&\"__proto__\"!=t)return e[t]}var _o=Co(Hi),yo=Kt||function(e,t){return Ye.setTimeout(e,t)},bo=Co(Ni);function So(e,t,n){var i=t+\"\";return bo(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?\"& \":\"\")+t[i],t=t.join(n>2?\", \":\" \"),e.replace(K,\"{\\n/* [wrapped with \"+t+\"] */\\n\")}(i,function(e,t){return at(a,(function(n){var i=\"_.\"+n[0];t&n[1]&&!ht(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(J);return t?t[1].split(Q):[]}(i),n)))}function Co(e){var t=0,n=0;return function(){var i=ln(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Po(e,t){var n=-1,i=e.length,r=i-1;for(t=void 0===t?i:t;++n<t;){var o=ji(n,r),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var xo=function(e){var t=Cs(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(\"\"),e.replace(G,(function(e,n,i,r){t.push(i?r.replace(te,\"$1\"):n||e)})),t}));function Lo(e){if(\"string\"==typeof e||Ks(e))return e;var t=e+\"\";return\"0\"==t&&1/e==-1/0?\"-0\":t}function Oo(e){if(null!=e){try{return Ce.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"}function Eo(e){if(e instanceof zn)return e.clone();var t=new Dn(e.__wrapped__,e.__chain__);return t.__actions__=mr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Io=Vi((function(e,t){return js(e)?Qn(e,oi(t,1,js,!0)):[]})),To=Vi((function(e,t){var n=Ro(t);return js(n)&&(n=void 0),js(e)?Qn(e,oi(t,1,js,!0),Xr(n,2)):[]})),Do=Vi((function(e,t){var n=Ro(t);return js(n)&&(n=void 0),js(e)?Qn(e,oi(t,1,js,!0),void 0,n):[]}));function zo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ia(n);return r<0&&(r=sn(i+r,0)),yt(e,Xr(t,3),r)}function Mo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=ia(n),r=n<0?sn(i+r,0):an(r,i-1)),yt(e,Xr(t,3),r,!0)}function ko(e){return(null==e?0:e.length)?oi(e,1):[]}function Ao(e){return e&&e.length?e[0]:void 0}var jo=Vi((function(e){var t=dt(e,or);return t.length&&t[0]===e[0]?mi(t):[]})),Fo=Vi((function(e){var t=Ro(e),n=dt(e,or);return t===Ro(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mi(n,Xr(t,2)):[]})),Vo=Vi((function(e){var t=Ro(e),n=dt(e,or);return(t=\"function\"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?mi(n,void 0,t):[]}));function Ro(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Bo=Vi(Zo);function Zo(e,t){return e&&e.length&&t&&t.length?ki(e,t):e}var Ho=Wr((function(e,t){var n=null==e?0:e.length,i=qn(e,t);return Ai(e,dt(t,(function(e){return so(e,n)?+e:e})).sort(vr)),i}));function No(e){return null==e?e:hn.call(e)}var Wo=Vi((function(e){return Ji(oi(e,1,js,!0))})),Go=Vi((function(e){var t=Ro(e);return js(t)&&(t=void 0),Ji(oi(e,1,js,!0),Xr(t,2))})),Uo=Vi((function(e){var t=Ro(e);return t=\"function\"==typeof t?t:void 0,Ji(oi(e,1,js,!0),void 0,t)}));function Yo(e){if(!e||!e.length)return[];var t=0;return e=ct(e,(function(e){if(js(e))return t=sn(e.length,t),!0})),It(t,(function(t){return dt(e,xt(t))}))}function qo(e,t){if(!e||!e.length)return[];var n=Yo(e);return null==t?n:dt(n,(function(e){return ot(t,void 0,e)}))}var $o=Vi((function(e,t){return js(e)?Qn(e,t):[]})),Xo=Vi((function(e){return ir(ct(e,js))})),Ko=Vi((function(e){var t=Ro(e);return js(t)&&(t=void 0),ir(ct(e,js),Xr(t,2))})),Jo=Vi((function(e){var t=Ro(e);return t=\"function\"==typeof t?t:void 0,ir(ct(e,js),void 0,t)})),Qo=Vi(Yo);var es=Vi((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=\"function\"==typeof n?(e.pop(),n):void 0,qo(e,n)}));function ts(e){var t=En(e);return t.__chain__=!0,t}function ns(e,t){return t(e)}var is=Wr((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return qn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof zn&&so(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:ns,args:[r],thisArg:void 0}),new Dn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(r)}));var rs=_r((function(e,t,n){Pe.call(e,n)?++e[n]:Yn(e,n,1)}));var os=Lr(zo),ss=Lr(Mo);function as(e,t){return(Ms(e)?at:ei)(e,Xr(t,3))}function ls(e,t){return(Ms(e)?lt:ti)(e,Xr(t,3))}var us=_r((function(e,t,n){Pe.call(e,n)?e[n].push(t):Yn(e,n,[t])}));var cs=Vi((function(e,t,n){var r=-1,o=\"function\"==typeof t,s=As(e)?i(e.length):[];return ei(e,(function(e){s[++r]=o?ot(t,e,n):wi(e,t,n)})),s})),hs=_r((function(e,t,n){Yn(e,n,t)}));function fs(e,t){return(Ms(e)?dt:Oi)(e,Xr(t,3))}var ds=_r((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var vs=Vi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ao(e,t[0],t[1])?t=[]:n>2&&ao(t[0],t[1],t[2])&&(t=[t[0]]),zi(e,oi(t,1),[])})),gs=Xt||function(){return Ye.Date.now()};function ps(e,t,n){return t=n?void 0:t,Rr(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ms(e,t){var n;if(\"function\"!=typeof t)throw new we(o);return e=ia(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ws=Vi((function(e,t,n){var i=1;if(n.length){var r=Ht(n,$r(ws));i|=32}return Rr(e,i,t,n,r)})),_s=Vi((function(e,t,n){var i=3;if(n.length){var r=Ht(n,$r(_s));i|=32}return Rr(t,i,e,n,r)}));function ys(e,t,n){var i,r,s,a,l,u,c=0,h=!1,f=!1,d=!0;if(\"function\"!=typeof e)throw new we(o);function v(t){var n=i,o=r;return i=r=void 0,c=t,a=e.apply(o,n)}function g(e){return c=e,l=yo(m,t),h?v(e):a}function p(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=s}function m(){var e=gs();if(p(e))return w(e);l=yo(m,function(e){var n=t-(e-u);return f?an(n,s-(e-c)):n}(e))}function w(e){return l=void 0,d&&i?v(e):(i=r=void 0,a)}function _(){var e=gs(),n=p(e);if(i=arguments,r=this,u=e,n){if(void 0===l)return g(u);if(f)return cr(l),l=yo(m,t),v(u)}return void 0===l&&(l=yo(m,t)),a}return t=oa(t)||0,Ns(n)&&(h=!!n.leading,s=(f=\"maxWait\"in n)?sn(oa(n.maxWait)||0,t):s,d=\"trailing\"in n?!!n.trailing:d),_.cancel=function(){void 0!==l&&cr(l),c=0,i=u=r=l=void 0},_.flush=function(){return void 0===l?a:w(gs())},_}var bs=Vi((function(e,t){return Jn(e,1,t)})),Ss=Vi((function(e,t,n){return Jn(e,oa(t)||0,n)}));function Cs(e,t){if(\"function\"!=typeof e||null!=t&&\"function\"!=typeof t)throw new we(o);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Cs.Cache||An),n}function Ps(e){if(\"function\"!=typeof e)throw new we(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Cs.Cache=An;var xs=lr((function(e,t){var n=(t=1==t.length&&Ms(t[0])?dt(t[0],Tt(Xr())):dt(oi(t,1),Tt(Xr()))).length;return Vi((function(i){for(var r=-1,o=an(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return ot(e,this,i)}))})),Ls=Vi((function(e,t){return Rr(e,32,void 0,t,Ht(t,$r(Ls)))})),Os=Vi((function(e,t){return Rr(e,64,void 0,t,Ht(t,$r(Os)))})),Es=Wr((function(e,t){return Rr(e,256,void 0,void 0,void 0,t)}));function Is(e,t){return e===t||e!=e&&t!=t}var Ts=kr(vi),Ds=kr((function(e,t){return e>=t})),zs=_i(function(){return arguments}())?_i:function(e){return Ws(e)&&Pe.call(e,\"callee\")&&!qe.call(e,\"callee\")},Ms=i.isArray,ks=Qe?Tt(Qe):function(e){return Ws(e)&&di(e)==C};function As(e){return null!=e&&Hs(e.length)&&!Bs(e)}function js(e){return Ws(e)&&As(e)}var Fs=tn||ol,Vs=et?Tt(et):function(e){return Ws(e)&&di(e)==h};function Rs(e){if(!Ws(e))return!1;var t=di(e);return t==f||\"[object DOMException]\"==t||\"string\"==typeof e.message&&\"string\"==typeof e.name&&!Ys(e)}function Bs(e){if(!Ns(e))return!1;var t=di(e);return t==d||t==v||\"[object AsyncFunction]\"==t||\"[object Proxy]\"==t}function Zs(e){return\"number\"==typeof e&&e==ia(e)}function Hs(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ns(e){var t=typeof e;return null!=e&&(\"object\"==t||\"function\"==t)}function Ws(e){return null!=e&&\"object\"==typeof e}var Gs=tt?Tt(tt):function(e){return Ws(e)&&no(e)==g};function Us(e){return\"number\"==typeof e||Ws(e)&&di(e)==p}function Ys(e){if(!Ws(e)||di(e)!=m)return!1;var t=Ge(e);if(null===t)return!0;var n=Pe.call(t,\"constructor\")&&t.constructor;return\"function\"==typeof n&&n instanceof n&&Ce.call(n)==Ee}var qs=nt?Tt(nt):function(e){return Ws(e)&&di(e)==w};var $s=it?Tt(it):function(e){return Ws(e)&&no(e)==_};function Xs(e){return\"string\"==typeof e||!Ms(e)&&Ws(e)&&di(e)==y}function Ks(e){return\"symbol\"==typeof e||Ws(e)&&di(e)==b}var Js=rt?Tt(rt):function(e){return Ws(e)&&Hs(e.length)&&!!Be[di(e)]};var Qs=kr(Li),ea=kr((function(e,t){return e<=t}));function ta(e){if(!e)return[];if(As(e))return Xs(e)?Ut(e):mr(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=no(e);return(t==g?Bt:t==_?Nt:Ia)(e)}function na(e){return e?(e=oa(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ia(e){var t=na(e),n=t%1;return t==t?n?t-n:t:0}function ra(e){return e?$n(ia(e),0,4294967295):0}function oa(e){if(\"number\"==typeof e)return e;if(Ks(e))return NaN;if(Ns(e)){var t=\"function\"==typeof e.valueOf?e.valueOf():e;e=Ns(t)?t+\"\":t}if(\"string\"!=typeof e)return 0===e?e:+e;e=e.replace(q,\"\");var n=oe.test(e);return n||ae.test(e)?We(e.slice(2),n?2:8):re.test(e)?NaN:+e}function sa(e){return wr(e,ba(e))}function aa(e){return null==e?\"\":Ki(e)}var la=yr((function(e,t){if(ho(t)||As(t))wr(t,ya(t),e);else for(var n in t)Pe.call(t,n)&&Nn(e,n,t[n])})),ua=yr((function(e,t){wr(t,ba(t),e)})),ca=yr((function(e,t,n,i){wr(t,ba(t),e,i)})),ha=yr((function(e,t,n,i){wr(t,ya(t),e,i)})),fa=Wr(qn);var da=Vi((function(e,t){e=ge(e);var n=-1,i=t.length,r=i>2?t[2]:void 0;for(r&&ao(t[0],t[1],r)&&(i=1);++n<i;)for(var o=t[n],s=ba(o),a=-1,l=s.length;++a<l;){var u=s[a],c=e[u];(void 0===c||Is(c,be[u])&&!Pe.call(e,u))&&(e[u]=o[u])}return e})),va=Vi((function(e){return e.push(void 0,Zr),ot(Ca,void 0,e)}));function ga(e,t,n){var i=null==e?void 0:hi(e,t);return void 0===i?n:i}function pa(e,t){return null!=e&&io(e,t,pi)}var ma=Ir((function(e,t,n){null!=t&&\"function\"!=typeof t.toString&&(t=Oe.call(t)),e[t]=n}),Na(Ua)),wa=Ir((function(e,t,n){null!=t&&\"function\"!=typeof t.toString&&(t=Oe.call(t)),Pe.call(e,t)?e[t].push(n):e[t]=[n]}),Xr),_a=Vi(wi);function ya(e){return As(e)?Vn(e):Pi(e)}function ba(e){return As(e)?Vn(e,!0):xi(e)}var Sa=yr((function(e,t,n){Ti(e,t,n)})),Ca=yr((function(e,t,n,i){Ti(e,t,n,i)})),Pa=Wr((function(e,t){var n={};if(null==e)return n;var i=!1;t=dt(t,(function(t){return t=ar(t,e),i||(i=t.length>1),t})),wr(e,Ur(e),n),i&&(n=Xn(n,7,Hr));for(var r=t.length;r--;)Qi(n,t[r]);return n}));var xa=Wr((function(e,t){return null==e?{}:function(e,t){return Mi(e,t,(function(t,n){return pa(e,n)}))}(e,t)}));function La(e,t){if(null==e)return{};var n=dt(Ur(e),(function(e){return[e]}));return t=Xr(t),Mi(e,n,(function(e,n){return t(e,n[0])}))}var Oa=Vr(ya),Ea=Vr(ba);function Ia(e){return null==e?[]:Dt(e,ya(e))}var Ta=Pr((function(e,t,n){return t=t.toLowerCase(),e+(n?Da(t):t)}));function Da(e){return Ra(aa(e).toLowerCase())}function za(e){return(e=aa(e))&&e.replace(ue,jt).replace(Me,\"\")}var Ma=Pr((function(e,t,n){return e+(n?\"-\":\"\")+t.toLowerCase()})),ka=Pr((function(e,t,n){return e+(n?\" \":\"\")+t.toLowerCase()})),Aa=Cr(\"toLowerCase\");var ja=Pr((function(e,t,n){return e+(n?\"_\":\"\")+t.toLowerCase()}));var Fa=Pr((function(e,t,n){return e+(n?\" \":\"\")+Ra(t)}));var Va=Pr((function(e,t,n){return e+(n?\" \":\"\")+t.toUpperCase()})),Ra=Cr(\"toUpperCase\");function Ba(e,t,n){return e=aa(e),void 0===(t=n?void 0:t)?function(e){return Fe.test(e)}(e)?function(e){return e.match(Ae)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var Za=Vi((function(e,t){try{return ot(e,void 0,t)}catch(e){return Rs(e)?e:new fe(e)}})),Ha=Wr((function(e,t){return at(t,(function(t){t=Lo(t),Yn(e,t,ws(e[t],e))})),e}));function Na(e){return function(){return e}}var Wa=Or(),Ga=Or(!0);function Ua(e){return e}function Ya(e){return Ci(\"function\"==typeof e?e:Xn(e,1))}var qa=Vi((function(e,t){return function(n){return wi(n,e,t)}})),$a=Vi((function(e,t){return function(n){return wi(e,n,t)}}));function Xa(e,t,n){var i=ya(t),r=ci(t,i);null!=n||Ns(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=ci(t,ya(t)));var o=!(Ns(n)&&\"chain\"in n&&!n.chain),s=Bs(e);return at(r,(function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),r=n.__actions__=mr(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,vt([this.value()],arguments))})})),e}function Ka(){}var Ja=Dr(dt),Qa=Dr(ut),el=Dr(mt);function tl(e){return lo(e)?xt(Lo(e)):function(e){return function(t){return hi(t,e)}}(e)}var nl=Mr(),il=Mr(!0);function rl(){return[]}function ol(){return!1}var sl=Tr((function(e,t){return e+t}),0),al=jr(\"ceil\"),ll=Tr((function(e,t){return e/t}),1),ul=jr(\"floor\");var cl,hl=Tr((function(e,t){return e*t}),1),fl=jr(\"round\"),dl=Tr((function(e,t){return e-t}),0);return En.after=function(e,t){if(\"function\"!=typeof t)throw new we(o);return e=ia(e),function(){if(--e<1)return t.apply(this,arguments)}},En.ary=ps,En.assign=la,En.assignIn=ua,En.assignInWith=ca,En.assignWith=ha,En.at=fa,En.before=ms,En.bind=ws,En.bindAll=Ha,En.bindKey=_s,En.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ms(e)?e:[e]},En.chain=ts,En.chunk=function(e,t,n){t=(n?ao(e,t,n):void 0===t)?1:sn(ia(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,s=0,a=i(Jt(r/t));o<r;)a[s++]=Gi(e,o,o+=t);return a},En.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},En.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return vt(Ms(n)?mr(n):[n],oi(t,1))},En.cond=function(e){var t=null==e?0:e.length,n=Xr();return e=t?dt(e,(function(e){if(\"function\"!=typeof e[1])throw new we(o);return[n(e[0]),e[1]]})):[],Vi((function(n){for(var i=-1;++i<t;){var r=e[i];if(ot(r[0],this,n))return ot(r[1],this,n)}}))},En.conforms=function(e){return function(e){var t=ya(e);return function(n){return Kn(n,e,t)}}(Xn(e,1))},En.constant=Na,En.countBy=rs,En.create=function(e,t){var n=In(e);return null==t?n:Un(n,t)},En.curry=function e(t,n,i){var r=Rr(t,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=e.placeholder,r},En.curryRight=function e(t,n,i){var r=Rr(t,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=e.placeholder,r},En.debounce=ys,En.defaults=da,En.defaultsDeep=va,En.defer=bs,En.delay=Ss,En.difference=Io,En.differenceBy=To,En.differenceWith=Do,En.drop=function(e,t,n){var i=null==e?0:e.length;return i?Gi(e,(t=n||void 0===t?1:ia(t))<0?0:t,i):[]},En.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Gi(e,0,(t=i-(t=n||void 0===t?1:ia(t)))<0?0:t):[]},En.dropRightWhile=function(e,t){return e&&e.length?tr(e,Xr(t,3),!0,!0):[]},En.dropWhile=function(e,t){return e&&e.length?tr(e,Xr(t,3),!0):[]},En.fill=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&\"number\"!=typeof n&&ao(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=ia(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:ia(i))<0&&(i+=r),i=n>i?0:ra(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},En.filter=function(e,t){return(Ms(e)?ct:ri)(e,Xr(t,3))},En.flatMap=function(e,t){return oi(fs(e,t),1)},En.flatMapDeep=function(e,t){return oi(fs(e,t),1/0)},En.flatMapDepth=function(e,t,n){return n=void 0===n?1:ia(n),oi(fs(e,t),n)},En.flatten=ko,En.flattenDeep=function(e){return(null==e?0:e.length)?oi(e,1/0):[]},En.flattenDepth=function(e,t){return(null==e?0:e.length)?oi(e,t=void 0===t?1:ia(t)):[]},En.flip=function(e){return Rr(e,512)},En.flow=Wa,En.flowRight=Ga,En.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},En.functions=function(e){return null==e?[]:ci(e,ya(e))},En.functionsIn=function(e){return null==e?[]:ci(e,ba(e))},En.groupBy=us,En.initial=function(e){return(null==e?0:e.length)?Gi(e,0,-1):[]},En.intersection=jo,En.intersectionBy=Fo,En.intersectionWith=Vo,En.invert=ma,En.invertBy=wa,En.invokeMap=cs,En.iteratee=Ya,En.keyBy=hs,En.keys=ya,En.keysIn=ba,En.map=fs,En.mapKeys=function(e,t){var n={};return t=Xr(t,3),li(e,(function(e,i,r){Yn(n,t(e,i,r),e)})),n},En.mapValues=function(e,t){var n={};return t=Xr(t,3),li(e,(function(e,i,r){Yn(n,i,t(e,i,r))})),n},En.matches=function(e){return Ei(Xn(e,1))},En.matchesProperty=function(e,t){return Ii(e,Xn(t,1))},En.memoize=Cs,En.merge=Sa,En.mergeWith=Ca,En.method=qa,En.methodOf=$a,En.mixin=Xa,En.negate=Ps,En.nthArg=function(e){return e=ia(e),Vi((function(t){return Di(t,e)}))},En.omit=Pa,En.omitBy=function(e,t){return La(e,Ps(Xr(t)))},En.once=function(e){return ms(2,e)},En.orderBy=function(e,t,n,i){return null==e?[]:(Ms(t)||(t=null==t?[]:[t]),Ms(n=i?void 0:n)||(n=null==n?[]:[n]),zi(e,t,n))},En.over=Ja,En.overArgs=xs,En.overEvery=Qa,En.overSome=el,En.partial=Ls,En.partialRight=Os,En.partition=ds,En.pick=xa,En.pickBy=La,En.property=tl,En.propertyOf=function(e){return function(t){return null==e?void 0:hi(e,t)}},En.pull=Bo,En.pullAll=Zo,En.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?ki(e,t,Xr(n,2)):e},En.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?ki(e,t,void 0,n):e},En.pullAt=Ho,En.range=nl,En.rangeRight=il,En.rearg=Es,En.reject=function(e,t){return(Ms(e)?ct:ri)(e,Ps(Xr(t,3)))},En.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=Xr(t,3);++i<o;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return Ai(e,r),n},En.rest=function(e,t){if(\"function\"!=typeof e)throw new we(o);return Vi(e,t=void 0===t?t:ia(t))},En.reverse=No,En.sampleSize=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ia(t),(Ms(e)?Bn:Bi)(e,t)},En.set=function(e,t,n){return null==e?e:Zi(e,t,n)},En.setWith=function(e,t,n,i){return i=\"function\"==typeof i?i:void 0,null==e?e:Zi(e,t,n,i)},En.shuffle=function(e){return(Ms(e)?Zn:Wi)(e)},En.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&\"number\"!=typeof n&&ao(e,t,n)?(t=0,n=i):(t=null==t?0:ia(t),n=void 0===n?i:ia(n)),Gi(e,t,n)):[]},En.sortBy=vs,En.sortedUniq=function(e){return e&&e.length?$i(e):[]},En.sortedUniqBy=function(e,t){return e&&e.length?$i(e,Xr(t,2)):[]},En.split=function(e,t,n){return n&&\"number\"!=typeof n&&ao(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=aa(e))&&(\"string\"==typeof t||null!=t&&!qs(t))&&!(t=Ki(t))&&Rt(e)?ur(Ut(e),0,n):e.split(t,n):[]},En.spread=function(e,t){if(\"function\"!=typeof e)throw new we(o);return t=null==t?0:sn(ia(t),0),Vi((function(n){var i=n[t],r=ur(n,0,t);return i&&vt(r,i),ot(e,this,r)}))},En.tail=function(e){var t=null==e?0:e.length;return t?Gi(e,1,t):[]},En.take=function(e,t,n){return e&&e.length?Gi(e,0,(t=n||void 0===t?1:ia(t))<0?0:t):[]},En.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Gi(e,(t=i-(t=n||void 0===t?1:ia(t)))<0?0:t,i):[]},En.takeRightWhile=function(e,t){return e&&e.length?tr(e,Xr(t,3),!1,!0):[]},En.takeWhile=function(e,t){return e&&e.length?tr(e,Xr(t,3)):[]},En.tap=function(e,t){return t(e),e},En.throttle=function(e,t,n){var i=!0,r=!0;if(\"function\"!=typeof e)throw new we(o);return Ns(n)&&(i=\"leading\"in n?!!n.leading:i,r=\"trailing\"in n?!!n.trailing:r),ys(e,t,{leading:i,maxWait:t,trailing:r})},En.thru=ns,En.toArray=ta,En.toPairs=Oa,En.toPairsIn=Ea,En.toPath=function(e){return Ms(e)?dt(e,Lo):Ks(e)?[e]:mr(xo(aa(e)))},En.toPlainObject=sa,En.transform=function(e,t,n){var i=Ms(e),r=i||Fs(e)||Js(e);if(t=Xr(t,4),null==n){var o=e&&e.constructor;n=r?i?new o:[]:Ns(e)&&Bs(o)?In(Ge(e)):{}}return(r?at:li)(e,(function(e,i,r){return t(n,e,i,r)})),n},En.unary=function(e){return ps(e,1)},En.union=Wo,En.unionBy=Go,En.unionWith=Uo,En.uniq=function(e){return e&&e.length?Ji(e):[]},En.uniqBy=function(e,t){return e&&e.length?Ji(e,Xr(t,2)):[]},En.uniqWith=function(e,t){return t=\"function\"==typeof t?t:void 0,e&&e.length?Ji(e,void 0,t):[]},En.unset=function(e,t){return null==e||Qi(e,t)},En.unzip=Yo,En.unzipWith=qo,En.update=function(e,t,n){return null==e?e:er(e,t,sr(n))},En.updateWith=function(e,t,n,i){return i=\"function\"==typeof i?i:void 0,null==e?e:er(e,t,sr(n),i)},En.values=Ia,En.valuesIn=function(e){return null==e?[]:Dt(e,ba(e))},En.without=$o,En.words=Ba,En.wrap=function(e,t){return Ls(sr(t),e)},En.xor=Xo,En.xorBy=Ko,En.xorWith=Jo,En.zip=Qo,En.zipObject=function(e,t){return rr(e||[],t||[],Nn)},En.zipObjectDeep=function(e,t){return rr(e||[],t||[],Zi)},En.zipWith=es,En.entries=Oa,En.entriesIn=Ea,En.extend=ua,En.extendWith=ca,Xa(En,En),En.add=sl,En.attempt=Za,En.camelCase=Ta,En.capitalize=Da,En.ceil=al,En.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=oa(n))==n?n:0),void 0!==t&&(t=(t=oa(t))==t?t:0),$n(oa(e),t,n)},En.clone=function(e){return Xn(e,4)},En.cloneDeep=function(e){return Xn(e,5)},En.cloneDeepWith=function(e,t){return Xn(e,5,t=\"function\"==typeof t?t:void 0)},En.cloneWith=function(e,t){return Xn(e,4,t=\"function\"==typeof t?t:void 0)},En.conformsTo=function(e,t){return null==t||Kn(e,t,ya(t))},En.deburr=za,En.defaultTo=function(e,t){return null==e||e!=e?t:e},En.divide=ll,En.endsWith=function(e,t,n){e=aa(e),t=Ki(t);var i=e.length,r=n=void 0===n?i:$n(ia(n),0,i);return(n-=t.length)>=0&&e.slice(n,r)==t},En.eq=Is,En.escape=function(e){return(e=aa(e))&&R.test(e)?e.replace(F,Ft):e},En.escapeRegExp=function(e){return(e=aa(e))&&Y.test(e)?e.replace(U,\"\\\\$&\"):e},En.every=function(e,t,n){var i=Ms(e)?ut:ni;return n&&ao(e,t,n)&&(t=void 0),i(e,Xr(t,3))},En.find=os,En.findIndex=zo,En.findKey=function(e,t){return _t(e,Xr(t,3),li)},En.findLast=ss,En.findLastIndex=Mo,En.findLastKey=function(e,t){return _t(e,Xr(t,3),ui)},En.floor=ul,En.forEach=as,En.forEachRight=ls,En.forIn=function(e,t){return null==e?e:si(e,Xr(t,3),ba)},En.forInRight=function(e,t){return null==e?e:ai(e,Xr(t,3),ba)},En.forOwn=function(e,t){return e&&li(e,Xr(t,3))},En.forOwnRight=function(e,t){return e&&ui(e,Xr(t,3))},En.get=ga,En.gt=Ts,En.gte=Ds,En.has=function(e,t){return null!=e&&io(e,t,gi)},En.hasIn=pa,En.head=Ao,En.identity=Ua,En.includes=function(e,t,n,i){e=As(e)?e:Ia(e),n=n&&!i?ia(n):0;var r=e.length;return n<0&&(n=sn(r+n,0)),Xs(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&bt(e,t,n)>-1},En.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ia(n);return r<0&&(r=sn(i+r,0)),bt(e,t,r)},En.inRange=function(e,t,n){return t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n){return e>=an(t,n)&&e<sn(t,n)}(e=oa(e),t,n)},En.invoke=_a,En.isArguments=zs,En.isArray=Ms,En.isArrayBuffer=ks,En.isArrayLike=As,En.isArrayLikeObject=js,En.isBoolean=function(e){return!0===e||!1===e||Ws(e)&&di(e)==c},En.isBuffer=Fs,En.isDate=Vs,En.isElement=function(e){return Ws(e)&&1===e.nodeType&&!Ys(e)},En.isEmpty=function(e){if(null==e)return!0;if(As(e)&&(Ms(e)||\"string\"==typeof e||\"function\"==typeof e.splice||Fs(e)||Js(e)||zs(e)))return!e.length;var t=no(e);if(t==g||t==_)return!e.size;if(ho(e))return!Pi(e).length;for(var n in e)if(Pe.call(e,n))return!1;return!0},En.isEqual=function(e,t){return yi(e,t)},En.isEqualWith=function(e,t,n){var i=(n=\"function\"==typeof n?n:void 0)?n(e,t):void 0;return void 0===i?yi(e,t,void 0,n):!!i},En.isError=Rs,En.isFinite=function(e){return\"number\"==typeof e&&nn(e)},En.isFunction=Bs,En.isInteger=Zs,En.isLength=Hs,En.isMap=Gs,En.isMatch=function(e,t){return e===t||bi(e,t,Jr(t))},En.isMatchWith=function(e,t,n){return n=\"function\"==typeof n?n:void 0,bi(e,t,Jr(t),n)},En.isNaN=function(e){return Us(e)&&e!=+e},En.isNative=function(e){if(co(e))throw new fe(\"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\");return Si(e)},En.isNil=function(e){return null==e},En.isNull=function(e){return null===e},En.isNumber=Us,En.isObject=Ns,En.isObjectLike=Ws,En.isPlainObject=Ys,En.isRegExp=qs,En.isSafeInteger=function(e){return Zs(e)&&e>=-9007199254740991&&e<=9007199254740991},En.isSet=$s,En.isString=Xs,En.isSymbol=Ks,En.isTypedArray=Js,En.isUndefined=function(e){return void 0===e},En.isWeakMap=function(e){return Ws(e)&&no(e)==S},En.isWeakSet=function(e){return Ws(e)&&\"[object WeakSet]\"==di(e)},En.join=function(e,t){return null==e?\"\":rn.call(e,t)},En.kebabCase=Ma,En.last=Ro,En.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=ia(n))<0?sn(i+r,0):an(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):yt(e,Ct,r,!0)},En.lowerCase=ka,En.lowerFirst=Aa,En.lt=Qs,En.lte=ea,En.max=function(e){return e&&e.length?ii(e,Ua,vi):void 0},En.maxBy=function(e,t){return e&&e.length?ii(e,Xr(t,2),vi):void 0},En.mean=function(e){return Pt(e,Ua)},En.meanBy=function(e,t){return Pt(e,Xr(t,2))},En.min=function(e){return e&&e.length?ii(e,Ua,Li):void 0},En.minBy=function(e,t){return e&&e.length?ii(e,Xr(t,2),Li):void 0},En.stubArray=rl,En.stubFalse=ol,En.stubObject=function(){return{}},En.stubString=function(){return\"\"},En.stubTrue=function(){return!0},En.multiply=hl,En.nth=function(e,t){return e&&e.length?Di(e,ia(t)):void 0},En.noConflict=function(){return Ye._===this&&(Ye._=Ie),this},En.noop=Ka,En.now=gs,En.pad=function(e,t,n){e=aa(e);var i=(t=ia(t))?Gt(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return zr(Qt(r),n)+e+zr(Jt(r),n)},En.padEnd=function(e,t,n){e=aa(e);var i=(t=ia(t))?Gt(e):0;return t&&i<t?e+zr(t-i,n):e},En.padStart=function(e,t,n){e=aa(e);var i=(t=ia(t))?Gt(e):0;return t&&i<t?zr(t-i,n)+e:e},En.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),un(aa(e).replace($,\"\"),t||0)},En.random=function(e,t,n){if(n&&\"boolean\"!=typeof n&&ao(e,t,n)&&(t=n=void 0),void 0===n&&(\"boolean\"==typeof t?(n=t,t=void 0):\"boolean\"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=na(e),void 0===t?(t=e,e=0):t=na(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=cn();return an(e+r*(t-e+Ne(\"1e-\"+((r+\"\").length-1))),t)}return ji(e,t)},En.reduce=function(e,t,n){var i=Ms(e)?gt:Ot,r=arguments.length<3;return i(e,Xr(t,4),n,r,ei)},En.reduceRight=function(e,t,n){var i=Ms(e)?pt:Ot,r=arguments.length<3;return i(e,Xr(t,4),n,r,ti)},En.repeat=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ia(t),Fi(aa(e),t)},En.replace=function(){var e=arguments,t=aa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},En.result=function(e,t,n){var i=-1,r=(t=ar(t,e)).length;for(r||(r=1,e=void 0);++i<r;){var o=null==e?void 0:e[Lo(t[i])];void 0===o&&(i=r,o=n),e=Bs(o)?o.call(e):o}return e},En.round=fl,En.runInContext=e,En.sample=function(e){return(Ms(e)?Rn:Ri)(e)},En.size=function(e){if(null==e)return 0;if(As(e))return Xs(e)?Gt(e):e.length;var t=no(e);return t==g||t==_?e.size:Pi(e).length},En.snakeCase=ja,En.some=function(e,t,n){var i=Ms(e)?mt:Ui;return n&&ao(e,t,n)&&(t=void 0),i(e,Xr(t,3))},En.sortedIndex=function(e,t){return Yi(e,t)},En.sortedIndexBy=function(e,t,n){return qi(e,t,Xr(n,2))},En.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Yi(e,t);if(i<n&&Is(e[i],t))return i}return-1},En.sortedLastIndex=function(e,t){return Yi(e,t,!0)},En.sortedLastIndexBy=function(e,t,n){return qi(e,t,Xr(n,2),!0)},En.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Yi(e,t,!0)-1;if(Is(e[n],t))return n}return-1},En.startCase=Fa,En.startsWith=function(e,t,n){return e=aa(e),n=null==n?0:$n(ia(n),0,e.length),t=Ki(t),e.slice(n,n+t.length)==t},En.subtract=dl,En.sum=function(e){return e&&e.length?Et(e,Ua):0},En.sumBy=function(e,t){return e&&e.length?Et(e,Xr(t,2)):0},En.template=function(e,t,n){var i=En.templateSettings;n&&ao(e,t,n)&&(t=void 0),e=aa(e),t=ca({},t,i,Br);var r,o,s=ca({},t.imports,i.imports,Br),a=ya(s),l=Dt(s,a),u=0,c=t.interpolate||ce,h=\"__p += '\",f=pe((t.escape||ce).source+\"|\"+c.source+\"|\"+(c===H?ne:ce).source+\"|\"+(t.evaluate||ce).source+\"|$\",\"g\"),d=\"//# sourceURL=\"+(Pe.call(t,\"sourceURL\")?(t.sourceURL+\"\").replace(/\\s/g,\" \"):\"lodash.templateSources[\"+ ++Re+\"]\")+\"\\n\";e.replace(f,(function(t,n,i,s,a,l){return i||(i=s),h+=e.slice(u,l).replace(he,Vt),n&&(r=!0,h+=\"' +\\n__e(\"+n+\") +\\n'\"),a&&(o=!0,h+=\"';\\n\"+a+\";\\n__p += '\"),i&&(h+=\"' +\\n((__t = (\"+i+\")) == null ? '' : __t) +\\n'\"),u=l+t.length,t})),h+=\"';\\n\";var v=Pe.call(t,\"variable\")&&t.variable;v||(h=\"with (obj) {\\n\"+h+\"\\n}\\n\"),h=(o?h.replace(M,\"\"):h).replace(k,\"$1\").replace(A,\"$1;\"),h=\"function(\"+(v||\"obj\")+\") {\\n\"+(v?\"\":\"obj || (obj = {});\\n\")+\"var __t, __p = ''\"+(r?\", __e = _.escape\":\"\")+(o?\", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\":\";\\n\")+h+\"return __p\\n}\";var g=Za((function(){return de(a,d+\"return \"+h).apply(void 0,l)}));if(g.source=h,Rs(g))throw g;return g},En.times=function(e,t){if((e=ia(e))<1||e>9007199254740991)return[];var n=4294967295,i=an(e,4294967295);e-=4294967295;for(var r=It(i,t=Xr(t));++n<e;)t(n);return r},En.toFinite=na,En.toInteger=ia,En.toLength=ra,En.toLower=function(e){return aa(e).toLowerCase()},En.toNumber=oa,En.toSafeInteger=function(e){return e?$n(ia(e),-9007199254740991,9007199254740991):0===e?e:0},En.toString=aa,En.toUpper=function(e){return aa(e).toUpperCase()},En.trim=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(q,\"\");if(!e||!(t=Ki(t)))return e;var i=Ut(e),r=Ut(t);return ur(i,Mt(i,r),kt(i,r)+1).join(\"\")},En.trimEnd=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(X,\"\");if(!e||!(t=Ki(t)))return e;var i=Ut(e);return ur(i,0,kt(i,Ut(t))+1).join(\"\")},En.trimStart=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace($,\"\");if(!e||!(t=Ki(t)))return e;var i=Ut(e);return ur(i,Mt(i,Ut(t))).join(\"\")},En.truncate=function(e,t){var n=30,i=\"...\";if(Ns(t)){var r=\"separator\"in t?t.separator:r;n=\"length\"in t?ia(t.length):n,i=\"omission\"in t?Ki(t.omission):i}var o=(e=aa(e)).length;if(Rt(e)){var s=Ut(e);o=s.length}if(n>=o)return e;var a=n-Gt(i);if(a<1)return i;var l=s?ur(s,0,a).join(\"\"):e.slice(0,a);if(void 0===r)return l+i;if(s&&(a+=l.length-a),qs(r)){if(e.slice(a).search(r)){var u,c=l;for(r.global||(r=pe(r.source,aa(ie.exec(r))+\"g\")),r.lastIndex=0;u=r.exec(c);)var h=u.index;l=l.slice(0,void 0===h?a:h)}}else if(e.indexOf(Ki(r),a)!=a){var f=l.lastIndexOf(r);f>-1&&(l=l.slice(0,f))}return l+i},En.unescape=function(e){return(e=aa(e))&&V.test(e)?e.replace(j,Yt):e},En.uniqueId=function(e){var t=++xe;return aa(e)+t},En.upperCase=Va,En.upperFirst=Ra,En.each=as,En.eachRight=ls,En.first=Ao,Xa(En,(cl={},li(En,(function(e,t){Pe.call(En.prototype,t)||(cl[t]=e)})),cl),{chain:!1}),En.VERSION=\"4.17.19\",at([\"bind\",\"bindKey\",\"curry\",\"curryRight\",\"partial\",\"partialRight\"],(function(e){En[e].placeholder=En})),at([\"drop\",\"take\"],(function(e,t){zn.prototype[e]=function(n){n=void 0===n?1:sn(ia(n),0);var i=this.__filtered__&&!t?new zn(this):this.clone();return i.__filtered__?i.__takeCount__=an(n,i.__takeCount__):i.__views__.push({size:an(n,4294967295),type:e+(i.__dir__<0?\"Right\":\"\")}),i},zn.prototype[e+\"Right\"]=function(t){return this.reverse()[e](t).reverse()}})),at([\"filter\",\"map\",\"takeWhile\"],(function(e,t){var n=t+1,i=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Xr(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),at([\"head\",\"last\"],(function(e,t){var n=\"take\"+(t?\"Right\":\"\");zn.prototype[e]=function(){return this[n](1).value()[0]}})),at([\"initial\",\"tail\"],(function(e,t){var n=\"drop\"+(t?\"\":\"Right\");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(Ua)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=Vi((function(e,t){return\"function\"==typeof e?new zn(this):this.map((function(n){return wi(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(Ps(Xr(e)))},zn.prototype.slice=function(e,t){e=ia(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ia(t))<0?n.dropRight(-t):n.take(t-e)),n)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(4294967295)},li(zn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=En[i?\"take\"+(\"last\"==t?\"Right\":\"\"):t],o=i||/^find/.test(t);r&&(En.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,a=t instanceof zn,l=s[0],u=a||Ms(t),c=function(e){var t=r.apply(En,vt([e],s));return i&&h?t[0]:t};u&&n&&\"function\"==typeof l&&1!=l.length&&(a=u=!1);var h=this.__chain__,f=!!this.__actions__.length,d=o&&!h,v=a&&!f;if(!o&&u){t=v?t:new zn(this);var g=e.apply(t,s);return g.__actions__.push({func:ns,args:[c],thisArg:void 0}),new Dn(g,h)}return d&&v?e.apply(this,s):(g=this.thru(c),d?i?g.value()[0]:g.value():g)})})),at([\"pop\",\"push\",\"shift\",\"sort\",\"splice\",\"unshift\"],(function(e){var t=_e[e],n=/^(?:push|sort|unshift)$/.test(e)?\"tap\":\"thru\",i=/^(?:pop|shift)$/.test(e);En.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Ms(r)?r:[],e)}return this[n]((function(n){return t.apply(Ms(n)?n:[],e)}))}})),li(zn.prototype,(function(e,t){var n=En[t];if(n){var i=n.name+\"\";Pe.call(_n,i)||(_n[i]=[]),_n[i].push({name:t,func:n})}})),_n[Er(void 0,2).name]=[{name:\"wrapper\",func:void 0}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=mr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mr(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ms(e),i=t<0,r=n?e.length:0,o=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var o=n[i],s=o.size;switch(o.type){case\"drop\":e+=s;break;case\"dropRight\":t-=s;break;case\"take\":t=an(t,e+s);break;case\"takeRight\":e=sn(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=o.start,a=o.end,l=a-s,u=i?a:s-1,c=this.__iteratees__,h=c.length,f=0,d=an(l,this.__takeCount__);if(!n||!i&&r==l&&d==l)return nr(e,this.__actions__);var v=[];e:for(;l--&&f<d;){for(var g=-1,p=e[u+=t];++g<h;){var m=c[g],w=m.iteratee,_=m.type,y=w(p);if(2==_)p=y;else if(!y){if(1==_)continue e;break e}}v[f++]=p}return v},En.prototype.at=is,En.prototype.chain=function(){return ts(this)},En.prototype.commit=function(){return new Dn(this.value(),this.__chain__)},En.prototype.next=function(){void 0===this.__values__&&(this.__values__=ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},En.prototype.plant=function(e){for(var t,n=this;n instanceof Tn;){var i=Eo(n);i.__index__=0,i.__values__=void 0,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},En.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var t=e;return this.__actions__.length&&(t=new zn(this)),(t=t.reverse()).__actions__.push({func:ns,args:[No],thisArg:void 0}),new Dn(t,this.__chain__)}return this.thru(No)},En.prototype.toJSON=En.prototype.valueOf=En.prototype.value=function(){return nr(this.__wrapped__,this.__actions__)},En.prototype.first=En.prototype.head,Je&&(En.prototype[Je]=function(){return this}),En}();Ye._=qt,void 0===(r=function(){return qt}.call(t,n,t,i))||(i.exports=r)}).call(this)}).call(this,n(6),n(7)(e))},function(e,t,n){\"use strict\";(function(i){function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}t.log=function(){var e;return\"object\"===(\"undefined\"==typeof console?\"undefined\":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?\"%c\":\"\")+this.namespace+(this.useColors?\" %c\":\" \")+t[0]+(this.useColors?\"%c \":\" \")+\"+\"+e.exports.humanize(this.diff),!this.useColors)return;var n=\"color: \"+this.color;t.splice(1,0,n,\"color: inherit\");var i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){\"%%\"!==e&&(i++,\"%c\"===e&&(r=i))})),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem(\"debug\",e):t.storage.removeItem(\"debug\")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem(\"debug\")}catch(e){}!e&&void 0!==i&&\"env\"in i&&(e=i.env.DEBUG);return e},t.useColors=function(){if(\"undefined\"!=typeof window&&window.process&&(\"renderer\"===window.process.type||window.process.__nwjs))return!0;if(\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))return!1;return\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],e.exports=n(9)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return\"[UnexpectedJSONParseError]: \"+e.message}}}).call(this,n(8))},function(e,t,n){n(3),n(14),e.exports=n(11)},function(e,t){!function(){if(!Array.prototype.fill){var e=function(e){if(null==this)throw new TypeError(\"this is null or not defined\");for(var t=Object(this),n=t.length>>>0,i=arguments[1],r=i>>0,o=r<0?Math.max(n+r,0):Math.min(r,n),s=arguments[2],a=void 0===s?n:s>>0,l=a<0?Math.max(n+a,0):Math.min(a,n);o<l;)t[o]=e,o++;return t};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,\"fill\",{value:e,configurable:!0,enumerable:!1,writable:!0})}catch(e){}Array.prototype.fill||(Array.prototype.fill=e)}}()},function(e,t){var n,i,r,o;n=window.requestAnimationFrame,i=\"ontouchend\"in document,r=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},(o=function(e,t){return this.settings=r({},o.DEFAULTS,t),this.el=e,this.ACTIVE_CLASS=\"kinetic-active\",this._initElements(),this.el._VanillaKinetic=this,this}).DEFAULTS={cursor:\"move\",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,invert:!1,movingClass:{up:\"kinetic-moving-up\",down:\"kinetic-moving-down\",left:\"kinetic-moving-left\",right:\"kinetic-moving-right\"},deceleratingClass:{up:\"kinetic-decelerating-up\",down:\"kinetic-decelerating-down\",left:\"kinetic-decelerating-left\",right:\"kinetic-decelerating-right\"}},o.prototype.start=function(e){this.settings=r(this.settings,e),this.velocity=e.velocity||this.velocity,this.velocityY=e.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},o.prototype.end=function(){this.settings.decelerate=!0},o.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,\"function\"==typeof this.settings.stopped&&this.settings.stopped.call(this)},o.prototype.detach=function(){this._detachListeners(),this.el.classList.remove(this.ACTIVE_CLASS),this.el.style.cursor=\"\"},o.prototype.attach=function(){this.el.classList.contains(this.ACTIVE_CLASS)||(this._attachListeners(),this.el.classList.add(this.ACTIVE_CLASS),this.el.style.cursor=this.settings.cursor)},o.prototype._initElements=function(){this.el.classList.add(this.ACTIVE_CLASS),r(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0;var e=this;this.documentResetHandler=function(){e._resetMouse.apply(e)};var t=document.documentElement;if(t.addEventListener(\"mouseup\",this.documentResetHandler,!1),t.addEventListener(\"click\",this.documentResetHandler,!1),this._initEvents(),this.el.style.cursor=this.settings.cursor,this.settings.triggerHardware)for(var n=[\"\",\"-ms-\",\"-webkit-\",\"-moz-\"],i={transform:\"translate3d(0,0,0)\",perspective:\"1000\",\"backface-visibility\":\"hidden\"},o=0;o<n.length;o++){var s=n[o];for(var a in i)i.hasOwnProperty(a)&&(this.el.style[s+a]=i[a])}},o.prototype._initEvents=function(){var e=this;this.settings.events={touchStart:function(t){var n;e._useTarget(t.target,t)&&(n=t.originalEvent.touches[0],e.threshold=e._threshold(t.target,t),e._start(n.clientX,n.clientY),t.stopPropagation())},touchMove:function(t){var n;e.mouseDown&&(n=t.originalEvent.touches[0],e._inputmove(n.clientX,n.clientY),t.preventDefault&&t.preventDefault())},inputDown:function(t){e._useTarget(t.target,t)&&(e.threshold=e._threshold(t.target,t),e._start(t.clientX,t.clientY),e.elementFocused=t.target,\"IMG\"===t.target.nodeName&&t.preventDefault(),t.stopPropagation())},inputEnd:function(t){e._useTarget(t.target,t)&&(e._end(),e.elementFocused=null,t.preventDefault&&t.preventDefault())},inputMove:function(t){e.mouseDown&&(e._inputmove(t.clientX,t.clientY),t.preventDefault&&t.preventDefault())},scroll:function(t){\"function\"==typeof e.settings.moved&&e.settings.moved.call(e,e.settings),t.preventDefault&&t.preventDefault()},inputClick:function(t){if(Math.abs(e.velocity)>0||Math.abs(e.velocityY)>0)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1},dragStart:function(t){if(e._useTarget(t.target,t)&&e.elementFocused)return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1},selectStart:function(t){return\"function\"==typeof e.settings.selectStart?e.settings.selectStart.apply(e,arguments):e._useTarget(t.target,t)?(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1):void 0}},this._attachListeners()},o.prototype._inputmove=function(e,t){if((!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var n=e-this.xpos,i=t-this.ypos;if(this.settings.invert&&(n*=-1,i*=-1),this.threshold>0){var r=Math.sqrt(n*n+i*i);if(this.threshold>r)return;this.threshold=0}this.elementFocused&&(this.elementFocused.blur(),this.elementFocused=null,this.el.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var o=this.scrollLeft(),s=this.scrollTop();this.scrollLeft(this.settings.x?o-n:o),this.scrollTop(this.settings.y?s-i:s),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=e,this.ypos=t,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),\"function\"==typeof this.settings.moved&&this.settings.moved.call(this,this.settings)}},o.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity),this.settings.invert&&(this.velocity*=-1,this.velocityY*=-1)},o.prototype._end=function(){this.xpos&&this.prevXPos&&!1===this.settings.decelerate&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},o.prototype._useTarget=function(e,t){return\"function\"!=typeof this.settings.filterTarget||!1!==this.settings.filterTarget.call(this,e,t)},o.prototype._threshold=function(e,t){return\"function\"==typeof this.settings.threshold?this.settings.threshold.call(this,e,t):this.settings.threshold},o.prototype._start=function(e,t){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=e,this.ypos=t},o.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},o.prototype._decelerateVelocity=function(e,t){return 0===Math.floor(Math.abs(e))?0:e*t},o.prototype._capVelocity=function(e,t){var n=e;return e>0?e>t&&(n=t):e<0-t&&(n=0-t),n},o.prototype._setMoveClasses=function(e){var t=this.settings,n=this.el;n.classList.remove(t.movingClass.up),n.classList.remove(t.movingClass.down),n.classList.remove(t.movingClass.left),n.classList.remove(t.movingClass.right),n.classList.remove(t.deceleratingClass.up),n.classList.remove(t.deceleratingClass.down),n.classList.remove(t.deceleratingClass.left),n.classList.remove(t.deceleratingClass.right),this.velocity>0&&n.classList.add(e.right),this.velocity<0&&n.classList.add(e.left),this.velocityY>0&&n.classList.add(e.down),this.velocityY<0&&n.classList.add(e.up)},o.prototype._move=function(){var e=this._getScroller(),t=this,i=this.settings;i.x&&e.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=i.decelerate?t._decelerateVelocity(this.velocity,i.slowdown):this.velocity)):this.velocity=0,i.y&&e.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=i.decelerate?t._decelerateVelocity(this.velocityY,i.slowdown):this.velocityY)):this.velocityY=0,t._setMoveClasses(i.deceleratingClass),\"function\"==typeof i.moved&&i.moved.call(this,i),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,n((function(){t.moving=!1,t._move()}))):t.stop()},o.prototype._getScroller=function(){return this.el},o.prototype.scrollLeft=function(e){var t=this._getScroller();if(\"number\"!=typeof e)return t.scrollLeft;t.scrollLeft=e,this.settings.scrollLeft=e},o.prototype.scrollTop=function(e){var t=this._getScroller();if(\"number\"!=typeof e)return t.scrollTop;t.scrollTop=e,this.settings.scrollTop=e},o.prototype._attachListeners=function(){var e=this.el,t=this.settings;i&&(e.addEventListener(\"touchstart\",t.events.touchStart,!1),e.addEventListener(\"touchend\",t.events.inputEnd,!1),e.addEventListener(\"touchmove\",t.events.touchMove,!1)),e.addEventListener(\"mousedown\",t.events.inputDown,!1),e.addEventListener(\"mouseup\",t.events.inputEnd,!1),e.addEventListener(\"mousemove\",t.events.inputMove,!1),e.addEventListener(\"click\",t.events.inputClick,!1),e.addEventListener(\"scroll\",t.events.scroll,!1),e.addEventListener(\"selectstart\",t.events.selectStart,!1),e.addEventListener(\"dragstart\",t.events.dragStart,!1)},o.prototype._detachListeners=function(){var e=this.el,t=this.settings;i&&(e.removeEventListener(\"touchstart\",t.events.touchStart,!1),e.removeEventListener(\"touchend\",t.events.inputEnd,!1),e.removeEventListener(\"touchmove\",t.events.touchMove,!1)),e.removeEventListener(\"mousedown\",t.events.inputDown,!1),e.removeEventListener(\"mouseup\",t.events.inputEnd,!1),e.removeEventListener(\"mousemove\",t.events.inputMove,!1),e.removeEventListener(\"click\",t.events.inputClick,!1),e.removeEventListener(\"scroll\",t.events.scroll,!1),e.removeEventListener(\"selectstart\",t.events.selectStart,!1),e.removeEventListener(\"dragstart\",t.events.dragStart,!1)},window.VanillaKinetic=o},function(e,t,n){var i,r,o;\n/**\n * @fileoverview dragscroll - scroll area by dragging\n * @version 0.0.8\n *\n * @license MIT, see http://github.com/asvd/dragscroll\n * @copyright 2015 asvd <heliosframework@gmail.com>\n */r=[t],void 0===(o=\"function\"==typeof(i=function(e){var t,n,i=window,r=document,o=[],s=function(e,s){for(e=0;e<o.length;)(s=(s=o[e++]).container||s).removeEventListener(\"mousedown\",s.md,0),i.removeEventListener(\"mouseup\",s.mu,0),i.removeEventListener(\"mousemove\",s.mm,0);for(o=[].slice.call(r.getElementsByClassName(\"dragscroll\")),e=0;e<o.length;)!function(e,o,s,a,l,u){(u=e.container||e).addEventListener(\"mousedown\",u.md=function(t){e.hasAttribute(\"nochilddrag\")&&r.elementFromPoint(t.pageX,t.pageY)!==u||(a=1,o=t.clientX,s=t.clientY,t.preventDefault())},0),i.addEventListener(\"mouseup\",u.mu=function(){a=0},0),i.addEventListener(\"mousemove\",u.mm=function(i){a&&((l=e.scroller||e).scrollLeft-=t=-o+(o=i.clientX),l.scrollTop-=n=-s+(s=i.clientY),e===r.body&&((l=r.documentElement).scrollLeft-=t,l.scrollTop-=n))},0)}(o[e++])};\"complete\"===r.readyState?s():i.addEventListener(\"load\",s,0),e.reset=s,window.resetDragscroll=s})?i.apply(t,r):i)||(e.exports=o)},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,\"loaded\",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,\"id\",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n,i,r=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function s(){throw new Error(\"clearTimeout has not been defined\")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i=\"function\"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,u=[],c=!1,h=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&d())}function d(){if(!c){var e=a(f);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new v(e,t)),1!==u.length||c||a(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},r.title=\"browser\",r.browser=!0,r.env={},r.argv=[],r.version=\"\",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error(\"process.binding is not supported\")},r.cwd=function(){return\"/\"},r.chdir=function(e){throw new Error(\"process.chdir is not supported\")},r.umask=function(){return 0}},function(e,t,n){\"use strict\";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return i.colors[Math.abs(t)%i.colors.length]}function i(e){var n;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=s,a=Number(new Date),l=a-(n||a);o.diff=l,o.prev=n,o.curr=a,n=a,t[0]=i.coerce(t[0]),\"string\"!=typeof t[0]&&t.unshift(\"%O\");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if(\"%%\"===e)return e;u++;var r=i.formatters[n];if(\"function\"==typeof r){var s=t[u];e=r.call(o,s),t.splice(u,1),u--}return e})),i.formatArgs.call(o,t);var c=o.log||i.log;c.apply(o,t)}}return s.namespace=e,s.enabled=i.enabled(e),s.useColors=i.useColors(),s.color=t(e),s.destroy=r,s.extend=o,\"function\"==typeof i.init&&i.init(s),i.instances.push(s),s}function r(){var e=i.instances.indexOf(this);return-1!==e&&(i.instances.splice(e,1),!0)}function o(e,t){return i(this.namespace+(void 0===t?\":\":t)+e)}return i.debug=i,i.default=i,i.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},i.disable=function(){i.enable(\"\")},i.enable=function(e){var t;i.save(e),i.names=[],i.skips=[];var n=(\"string\"==typeof e?e:\"\").split(/[\\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&(\"-\"===(e=n[t].replace(/\\*/g,\".*?\"))[0]?i.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):i.names.push(new RegExp(\"^\"+e+\"$\")));for(t=0;t<i.instances.length;t++){var o=i.instances[t];o.enabled=i.enabled(o.namespace)}},i.enabled=function(e){if(\"*\"===e[e.length-1])return!0;var t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=n(10),Object.keys(e).forEach((function(t){i[t]=e[t]})),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=t,i.enable(i.load()),i}},function(e,t){var n=1e3,i=6e4,r=36e5,o=24*r;function s(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+\" \"+i+(r?\"s\":\"\")}e.exports=function(e,t){t=t||{};var a=typeof e;if(\"string\"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return 315576e5*s;case\"weeks\":case\"week\":case\"w\":return 6048e5*s;case\"days\":case\"day\":case\"d\":return s*o;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return s*r;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return s*i;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return s*n;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return s;default:return}}(e);if(\"number\"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return s(e,t,o,\"day\");if(t>=r)return s(e,t,r,\"hour\");if(t>=i)return s(e,t,i,\"minute\");if(t>=n)return s(e,t,n,\"second\");return e+\" ms\"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+\"d\";if(t>=r)return Math.round(e/r)+\"h\";if(t>=i)return Math.round(e/i)+\"m\";if(t>=n)return Math.round(e/n)+\"s\";return e+\"ms\"}(e);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(e))}},function(e,t,n){var i=n(12),r=n(13);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,\"\"]]);var o={insert:\"head\",singleton:!1},s=(i(r,o),r.locals?r.locals:{});e.exports=s},function(e,t,n){\"use strict\";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],r=0;r<e.length;r++){var o=e[r],l=t.base?o[0]+t.base:o[0],u=n[l]||0,c=\"\".concat(l,\" \").concat(u);n[l]=u+1;var h=a(c),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(s[h].references++,s[h].updater(f)):s.push({identifier:c,updater:p(f,t),references:1}),i.push(c)}return i}function u(e){var t=document.createElement(\"style\"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),\"function\"==typeof e.insert)e.insert(t);else{var s=o(e.insert||\"head\");if(!s)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");s.appendChild(t)}return t}var c,h=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join(\"\\n\")});function f(e,t,n,i){var r=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function d(e,t,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?e.setAttribute(\"media\",r):e.removeAttribute(\"media\"),o&&btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))),\" */\")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var v=null,g=0;function p(e,t){var n,i,r;if(t.singleton){var o=g++;n=v||(v=u(t)),i=f.bind(null,n,o,!1),r=f.bind(null,n,o,!0)}else n=u(t),i=d.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=r());var n=l(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=a(n[i]);s[r].references--}for(var o=l(e,t),u=0;u<n.length;u++){var c=a(n[u]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}n=o}}}},function(e,t,n){},function(e,t,n){\"use strict\";n.r(t);n(4),n(5);function i(e){const t=document.createElement(e),n=Array.prototype.slice.call(arguments,1);for(;n.length;){r(t,n.shift())}return t}function r(e,t){if(null!=t)if(\"object\"!=typeof t&&\"function\"!=typeof t)e.appendChild(document.createTextNode(t));else if(t instanceof window.Node)e.appendChild(t);else if(t instanceof Array){const n=t.length;for(let i=0;i<n;i++)r(e,t[i])}else o(e,t)}function o(e,t){for(const n in t)t.hasOwnProperty(n)&&(\"style\"===n?s(e,t.style):e.setAttribute(n,t[n]))}function s(e,t){if(t)if(\"object\"==typeof t)for(const n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);else e.style.cssText=t}function a(e){this.name=\"DivaParentElementNotFoundException\",this.message=e,this.stack=(new Error).stack}function l(e){this.name=\"NotAnIIIFManifestException\",this.message=e,this.stack=(new Error).stack}function u(e){this.name=\"ObjectDataNotSuppliedException\",this.message=e,this.stack=(new Error).stack}a.prototype=new Error,l.prototype=new Error,u.prototype=new Error;var c={Events:new class{constructor(){this._cache={}}publish(e,t,n){if(this._cache[e]){const i=this._cache[e];if(void 0!==i.global){const e=i.global,r=e.length;for(let i=0;i<r;i++)e[i].apply(n||null,t||[])}if(n&&void 0!==n.getInstanceId){const i=n.getInstanceId();if(this._cache[e][i]){const r=this._cache[e][i],o=r.length;for(let e=0;e<o;e++)r[e].apply(n,t||[])}}}}subscribe(e,t,n){return this._cache[e]||(this._cache[e]={}),\"string\"==typeof n?(this._cache[e][n]||(this._cache[e][n]=[]),this._cache[e][n].push(t)):(this._cache[e].global||(this._cache[e].global=[]),this._cache[e].global.push(t)),n?[e,t,n]:[e,t]}unsubscribe(e,t){const n=e[0];if(this._cache[n]){let i;const r=3===e.length?e[2]:\"global\";if(i=this._cache[n][r],!i)return!1;if(t)return delete this._cache[n][r],i.length>0;let o=i.length;for(;o--;)if(i[o]===e[1])return this._cache[n][r].splice(o,1),!0}return!1}unsubscribeAll(e){if(e){const t=Object.keys(this._cache);let n,i=t.length;for(;i--;)n=t[i],void 0!==this._cache[n][e]&&delete this._cache[n][e]}else this._cache={}}}};var h={onDoubleClick:function(e,t){e.addEventListener(\"dblclick\",(function(e){e.ctrlKey||t(e,v(e.currentTarget,e))}));const n=d(500);e.addEventListener(\"contextmenu\",(function(e){e.preventDefault(),e.ctrlKey&&(n.isTriggered()?(n.reset(),t(e,v(e.currentTarget,e))):n.trigger())}))},onPinch:function(e,t){let n=0;e.addEventListener(\"touchstart\",(function(e){e.preventDefault(),2===e.originalEvent.touches.length&&(n=f(e.originalEvent.touches[0].clientX,e.originalEvent.touches[0].clientY,e.originalEvent.touches[1].clientX,e.originalEvent.touches[1].clientY))})),e.addEventListener(\"touchmove\",(function(e){if(e.preventDefault(),2===e.originalEvent.touches.length){const i=e.originalEvent.touches,r=f(i[0].clientX,i[0].clientY,i[1].clientX,i[1].clientY),o=r-n;if(Math.abs(o)>0){const o={pageX:(i[0].clientX+i[1].clientX)/2,pageY:(i[0].clientY+i[1].clientY)/2};t(e,v(e.currentTarget,o),n,r)}}}))},onDoubleTap:function(e,t){const n=d(250);let i=null;e.addEventListener(\"touchend\",e=>{if(e.preventDefault(),n.isTriggered()){n.reset();const r={pageX:e.originalEvent.changedTouches[0].clientX,pageY:e.originalEvent.changedTouches[0].clientY};f(i.pageX,i.pageY,r.pageX,r.pageY)<50&&t(e,v(e.currentTarget,r)),i=null}else i={pageX:e.originalEvent.changedTouches[0].clientX,pageY:e.originalEvent.changedTouches[0].clientY},n.trigger()})}};function f(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))}function d(e){let t=!1,n=null;return{trigger(){t=!0,i(),n=setTimeout((function(){t=!1,n=null}),e)},isTriggered:()=>t,reset(){t=!1,i()}};function i(){null!==n&&(clearTimeout(n),n=null)}}function v(e,t){const n=e.getBoundingClientRect();return{left:t.pageX-n.left,top:t.pageY-n.top}}var g=n(0);class p{constructor(e,t){this.page=e,this._viewerCore=t,this._innerElement=this._viewerCore.getSettings().innerElement,this._pageToolsElem=null,this.labelWidth=0}mount(){null===this._pageToolsElem&&(this._buttons=this._initializePageToolButtons(),this._pageToolsElem=i(\"div\",{class:\"diva-page-tools-wrapper\"},i(\"div\",{class:\"diva-page-tools\"},this._buttons)),this._pageLabelsElem=i(\"div\",{class:\"diva-page-labels-wrapper\"},i(\"div\",{class:\"diva-page-labels\"},this._viewerCore.settings.manifest.pages[this.page].l))),this.refresh(),this._innerElement.appendChild(this._pageToolsElem),this._innerElement.appendChild(this._pageLabelsElem)}_initializePageToolButtons(){const e=this._viewerCore.getSettings(),t=this._viewerCore.getPublicInstance(),n=this.page;return this._viewerCore.getPageTools().map(i=>{const r=i.pageToolsIcon.cloneNode(!0);return r.addEventListener(\"click\",r=>{i.handleClick.call(i,r,e,t,n)},!1),r.addEventListener(\"touchend\",r=>{r.preventDefault(),i.handleClick.call(i,r,e,t,n)},!1),r})}unmount(){this._innerElement.removeChild(this._pageToolsElem),this._innerElement.removeChild(this._pageLabelsElem)}refresh(){const e=this._viewerCore.getPageRegion(this.page,{includePadding:!0,incorporateViewport:!0});let t=window.getComputedStyle(this._innerElement,null).getPropertyValue(\"margin-left\");this._pageToolsElem.style.top=`${e.top}px`,this._pageToolsElem.style.left=`${e.left-parseInt(t)}px`,this._pageLabelsElem.style.top=`${e.top}px`,this._pageLabelsElem.style.left=`${e.right-parseInt(t)-this.labelWidth-5}px`}}class m{constructor(e){if(this._viewerCore=e,this._viewerState=e.getInternalState(),this._overlays=[],this._viewerCore.getPageTools().length){const t=e.getSettings().numPages;for(let n=0;n<t;n++){const t=new p(n,e);this._overlays.push(t),this._viewerCore.addPageOverlay(t);let i=document.createElement(\"span\");i.innerHTML=e.settings.manifest.pages[n].l,i.classList.add(\"diva-page-labels\"),i.setAttribute(\"style\",\"display: inline-block;\"),document.body.appendChild(i);let r=i.clientWidth;document.body.removeChild(i),t.labelWidth=r}}}onDoubleClick(e,t){const n=this._viewerCore.getSettings(),i=e.ctrlKey?n.zoomLevel-1:n.zoomLevel+1,r=this._viewerCore.getPagePositionAtViewportOffset(t);this._viewerCore.zoom(i,r)}onPinch(e,t,n,i){const r=this._viewerCore.getInternalState(),o=this._viewerCore.getSettings();let s=Math.log(Math.pow(2,o.zoomLevel)*i/(n*Math.log(2)))/Math.log(2);if(s=Math.max(o.minZoomLevel,s),s=Math.min(o.maxZoomLevel,s),s===o.zoomLevel)return;const a=this._viewerCore.getPagePositionAtViewportOffset(t),l=this._viewerCore.getCurrentLayout().getPageToViewportCenterOffset(a.anchorPage,r.viewport),u=1/Math.pow(2,o.zoomLevel-s);this._viewerCore.reload({zoomLevel:s,goDirectlyTo:a.anchorPage,horizontalOffset:l.x-a.offset.left+a.offset.left*u,verticalOffset:l.y-a.offset.top+a.offset.top*u})}onViewWillLoad(){this._viewerCore.publish(\"DocumentWillLoad\",this._viewerCore.getSettings())}onViewDidLoad(){this._handleZoomLevelChange();const e=this._viewerCore.getSettings().activePageIndex,t=this._viewerCore.getPageName(e);this._viewerCore.publish(\"DocumentDidLoad\",e,t)}onViewDidUpdate(e,t){const n=null!==t?t:function(e,t,n){const i=n.top+n.height/2,r=n.left+n.width/2,o=Object(g.maxBy)(e,e=>{const n=t.getPageDimensions(e),o=t.getPageOffset(e,{includePadding:!0}),s=o.left+n.width/2,a=o.top+n.height/2,l=Math.max(Math.abs(r-s)-n.width/2,0),u=Math.max(Math.abs(i-a)-n.height/2,0);return-(l*l+u*u)});return null!=o?o:null}(e,this._viewerCore.getCurrentLayout(),this._viewerCore.getViewport());let i=this._viewerState.viewport.intersectionTolerance;this._viewerState.viewport.intersectionTolerance=0;let r=e.filter(e=>this._viewerState.renderer.isPageVisible(e));this._viewerState.viewport.intersectionTolerance=i,null!==n&&this._viewerCore.setCurrentPages(n,r),null!==t&&this._viewerCore.publish(\"ViewerDidJump\",t),this._handleZoomLevelChange()}_handleZoomLevelChange(){const e=this._viewerState,t=e.options.zoomLevel;e.oldZoomLevel!==t&&e.oldZoomLevel>=0&&(e.oldZoomLevel<t?this._viewerCore.publish(\"ViewerDidZoomIn\",t):this._viewerCore.publish(\"ViewerDidZoomOut\",t),this._viewerCore.publish(\"ViewerDidZoom\",t)),e.oldZoomLevel=t}destroy(){this._overlays.forEach(e=>{this._viewerCore.removePageOverlay(e)},this)}}class w{constructor(e){this._viewerCore=e}onDoubleClick(e,t){const n=this._viewerCore.getPagePositionAtViewportOffset(t),i=this._viewerCore.getCurrentLayout(),r=this._viewerCore.getViewport(),o=i.getPageToViewportCenterOffset(n.anchorPage,r);this._viewerCore.reload({inGrid:!1,goDirectlyTo:n.anchorPage,horizontalOffset:o.x+n.offset.left,verticalOffset:o.y+n.offset.top})}onPinch(){this._viewerCore.reload({inGrid:!1})}onViewWillLoad(){}onViewDidLoad(){}onViewDidUpdate(e,t){if(0===e.length)return;let n=this._viewerCore.viewerState.viewport.intersectionTolerance;this._viewerCore.viewerState.viewport.intersectionTolerance=0;let i=e.filter(e=>this._viewerCore.viewerState.renderer.isPageVisible(e));if(this._viewerCore.viewerState.viewport.intersectionTolerance=n,null!==t)return void this._viewerCore.setCurrentPages(t,i);const r=this._viewerCore.getCurrentLayout(),o=[];e.forEach(e=>{const t=r.getPageInfo(e).group;0!==o.length&&t===o[o.length-1]||o.push(t)});const s=this._viewerCore.getViewport();let a;a=1===o.length||o[0].region.top>=s.top?o[0]:o[1].region.bottom<=s.bottom?o[1]:function(e,t){const n=t.top+t.height/2;return Object(g.maxBy)(e,e=>{const t=e.region.top+e.dimensions.height/2;return-Math.abs(n-t)})}(o,s);const l=this._viewerCore.getSettings().activePageIndex;a.pages.some(e=>e.index===l)||this._viewerCore.setCurrentPages(a.pages[0].index,i)}destroy(){}}class _{constructor(){this._pages={},this._renderedPages=[],this._renderedPageMap={}}addOverlay(e){(this._pages[e.page]||(this._pages[e.page]=[])).push(e),this._renderedPageMap[e.page]&&e.mount()}removeOverlay(e){const t=e.page,n=this._pages[t];if(!n)return;const i=n.indexOf(e);-1!==i&&(this._renderedPageMap[t]&&n[i].unmount(),n.splice(i,1),0===n.length&&delete this._pages[t])}updateOverlays(e){const t=this._renderedPages,n={};e.map(e=>{n[e]=!0,this._renderedPageMap[e]||(this._renderedPageMap[e]=!0,this._invokeOnOverlays(e,e=>{e.mount()}))}),t.map(e=>{n[e]?this._invokeOnOverlays(e,e=>{e.refresh()}):(delete this._renderedPageMap[e],this._invokeOnOverlays(e,e=>{e.unmount()}))}),this._renderedPages=e}_invokeOnOverlays(e,t){const n=this._pages[e];n&&n.map(e=>t(e))}}class y{constructor(e,t){this._rows=e,this._cols=t,this._map=new Array(e).fill(null).map(()=>new Array(t).fill(!1))}isLoaded(e,t){return e>=this._rows||t>=this._cols||this._map[e][t]}set(e,t,n){this._map[e][t]=n}}class b{constructor(e){this._levels=e;const t=this._urlsToTiles={};e.forEach(e=>{e.tiles.forEach(n=>{t[n.url]={zoomLevel:e.zoomLevel,row:n.row,col:n.col}})}),this.clear()}clear(){const e=this._loadedByLevel={};this._levels.forEach(t=>{e[t.zoomLevel]=new y(t.rows,t.cols)})}getTiles(e){const t=[],n=this._levels[0].zoomLevel,i=new y(this._levels[0].rows,this._levels[0].cols);let r;if(null===e)r=0;else{const t=Math.ceil(e);r=function(e,t){const n=e.length;for(let i=0;i<n;i++)if(t(e[i],i))return i;return-1}(this._levels,e=>e.zoomLevel<=t)}this._levels.slice(0,r+1).reverse().concat(this._levels.slice(r+1)).forEach(e=>{const r=this._loadedByLevel[e.zoomLevel];let o=e.tiles.filter(e=>r.isLoaded(e.row,e.col));const s=Math.pow(2,n-e.zoomLevel);o=o.filter(e=>{let t=!1;const n=e.row*s,r=e.col*s;for(let e=0;e<s;e++)for(let o=0;o<s;o++)i.isLoaded(n+e,r+o)||(t=!0,i.set(n+e,r+o,!0));return t}),t.push(o)},this),t.reverse();const o=[];return t.forEach(e=>{o.push.apply(o,e)}),o}updateFromCache(e){this.clear(),this._levels.forEach(t=>{const n=this._loadedByLevel[t.zoomLevel];t.tiles.forEach(t=>{e.has(t.url)&&n.set(t.row,t.col,!0)})},this)}updateWithLoadedUrls(e){e.forEach(e=>{const t=this._urlsToTiles[e];this._loadedByLevel[t.zoomLevel].set(t.row,t.col,!0)},this)}}class S{constructor(e,t){const n=function(e,t){const n=null===t?e.pageLayouts:function(e,t){const n=Math.pow(2,t-e.maxZoomLevel);return e.pageLayouts.map(e=>({dimensions:P(e.dimensions,n),pages:e.pages.map(e=>({index:e.index,groupOffset:{top:Math.floor(e.groupOffset.top*n),left:Math.floor(e.groupOffset.left*n)},dimensions:P(e.dimensions,n)}))}))}(e,t),i=function(e,t){let n,i;const r=e.padding.document;e.verticallyOriented?(n=\"width\",i=r.left+r.right):(n=\"height\",i=r.top+r.bottom);return i+t.reduce((e,t)=>Math.max(t.dimensions[n],e),0)}(e,n);let r=e.verticallyOriented?e.padding.document.top:e.padding.document.left;const o=[],s={top:e.padding.page.top,left:e.padding.page.left};let a,l;n.forEach((t,n)=>{let a,l;e.verticallyOriented?(a=r,l=(i-t.dimensions.width)/2):(a=(i-t.dimensions.height)/2,l=r);const u={top:a,bottom:a+s.top+t.dimensions.height,left:l,right:l+s.left+t.dimensions.width};o.push({index:n,dimensions:t.dimensions,pages:t.pages,region:u,padding:s}),r=e.verticallyOriented?u.bottom:u.right}),e.verticallyOriented?(a=r+s.top,l=i):(a=i,l=r+s.left);return{dimensions:{height:a,width:l},pageGroups:o}}(e,t);this.dimensions=n.dimensions,this.pageGroups=n.pageGroups,this._pageLookup=function(e){const t={};return e.forEach(e=>{e.pages.forEach(n=>{t[n.index]={index:n.index,group:e,dimensions:n.dimensions,groupOffset:n.groupOffset}})}),t}(n.pageGroups)}getPageInfo(e){return this._pageLookup[e]||null}getPageDimensions(e){if(!this._pageLookup||!this._pageLookup[e])return null;const t=C(this._pageLookup[e]);return{height:t.bottom-t.top,width:t.right-t.left}}getPageOffset(e,t){const n=this.getPageRegion(e,t);return n?{top:n.top,left:n.left}:null}getPageRegion(e,t){const n=this._pageLookup[e];if(!n)return null;const i=C(n),r=n.group.padding;return t&&t.includePadding?{top:i.top+r.top,left:i.left+r.left,bottom:i.bottom,right:i.right}:{top:i.top,left:i.left,bottom:i.bottom+r.top,right:i.right}}getPageToViewportCenterOffset(e,t){const n=t.left,i=t.right-t.left,r=this.getPageOffset(e),o=n-r.left+parseInt(i/2,10),s=t.top,a=t.bottom-t.top;return{x:o,y:s-r.top+parseInt(a/2,10)}}}function C(e){const t=e.groupOffset.top+e.group.region.top,n=t+e.dimensions.height,i=e.groupOffset.left+e.group.region.left;return{top:t,bottom:n,left:i,right:i+e.dimensions.width}}function P(e,t){return{height:Math.floor(e.height*t),width:Math.floor(e.width*t)}}const x=n(1)(\"diva:ImageCache\");class L{constructor(e){e=e||{maxKeys:100},this.maxKeys=e.maxKeys||100,this._held={},this._urls={},this._lru=[]}get(e){const t=this._urls[e];return t?t.img:null}has(e){return!!this._urls[e]}put(e,t){let n=this._urls[e];n?(n.img=t,this._promote(n)):(n={img:t,url:e},this._urls[e]=n,this._tryEvict(1),this._lru.unshift(n))}_promote(e){const t=this._lru.indexOf(e);this._lru.splice(t,1),this._lru.unshift(e)}_tryEvict(e){const t=this.maxKeys-e;if(this._lru.length<=t)return;let n=this._lru.length-1;for(;;){const e=this._lru[n];if(!this._held[e.url]&&(x(\"Evicting image %s\",e.url),this._lru.splice(n,1),delete this._urls[e.url],this._lru.length<=t))break;if(0===n){x.enabled&&x(\"Cache overfull by %s (all entries are being held)\",this._lru.length-t);break}n--}}acquire(e){this._held[e]=(this._held[e]||0)+1,this._promote(this._urls[e])}release(e){this._held[e]>1?this._held[e]--:delete this._held[e],this._tryEvict(0)}}class O{constructor(e){this._url=e.url,this._callback=e.load,this._errorCallback=e.error,this.timeoutTime=e.timeoutTime||0,this._aborted=this._complete=!1,this._crossOrigin=e.settings.imageCrossOrigin,this.timeout=setTimeout(()=>{this._image=new Image,this._image.crossOrigin=this._crossOrigin,this._image.onload=this._handleLoad.bind(this),this._image.onerror=this._handleError.bind(this),this._image.src=e.url},this.timeoutTime)}abort(){clearTimeout(this.timeout),this._image&&(this._image.onload=this._image.onerror=null,this._image.src=\"\"),this._aborted=!0}_handleLoad(){this._aborted?console.error(\"ImageRequestHandler invoked on cancelled request for \"+this._url):this._complete?console.error(\"ImageRequestHandler invoked on completed request for \"+this._url):(this._complete=!0,this._callback(this._image))}_handleError(){this._errorCallback(this._image)}}var E={animate:function(e){const t=e.duration,n=e.parameters,i=e.onUpdate,r=e.onEnd,o=I(),s=o+t,a={},l={},u=Object.keys(n);u.forEach(e=>{const t=n[e];a[e]=function(e,t,n){return i=>e+(t-e)*n(i)}(t.from,t.to,t.easing||T)});let c=requestAnimationFrame((function e(){const n=I();(function(e){u.forEach(t=>{l[t]=a[t](e)})})(Math.min((n-o)/t,1)),i(l),n<s?c=requestAnimationFrame(e):h({interrupted:!1})}));return{cancel(){null!==c&&(cancelAnimationFrame(c),h({interrupted:!0}))}};function h(e){c=null,r&&r(e)}},easing:{linear:function(e){return e},cubic:T}};let I;function T(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}I=\"undefined\"!=typeof performance&&performance.now?()=>performance.now():()=>Date.now();class D{constructor(e,t){this._viewport=e.viewport,this._outerElement=e.outerElement,this._documentElement=e.innerElement,this._settings=e.settings,this._hooks=t||{},this._canvas=i(\"canvas\",{class:\"diva-viewer-canvas\"}),this._ctx=this._canvas.getContext(\"2d\"),this.layout=null,this._sourceResolver=null,this._renderedPages=null,this._config=null,this._zoomLevel=null,this._compositeImages=null,this._renderedTiles=null,this._animation=null,this._cache=new L,this._pendingRequests={}}static getCompatibilityErrors(){return\"undefined\"!=typeof HTMLCanvasElement?null:[\"Your browser lacks support for the \",i(\"pre\",\"canvas\"),\" element. Please upgrade your browser.\"]}load(e,t,n){if(this._clearAnimation(),this._hooks.onViewWillLoad&&this._hooks.onViewWillLoad(),this._sourceResolver=n,this._config=e,this._compositeImages={},this._setLayoutToZoomLevel(t.zoomLevel),!this.layout.getPageInfo(t.anchorPage))throw new Error(\"invalid page: \"+t.anchorPage);this._canvas.width===this._viewport.width&&this._canvas.height===this._viewport.height||(this._canvas.width=this._viewport.width,this._canvas.height=this._viewport.height),this.goto(t.anchorPage,t.verticalOffset,t.horizontalOffset),this._canvas.parentNode!==this._outerElement&&this._outerElement.insertBefore(this._canvas,this._outerElement.firstChild),this._hooks.onViewDidLoad&&this._hooks.onViewDidLoad()}_setViewportPosition(e){if(e.zoomLevel!==this._zoomLevel){if(null===this._zoomLevel)throw new TypeError(\"The current view is not zoomable\");if(null===e.zoomLevel)throw new TypeError(\"The current view requires a zoom level\");this._setLayoutToZoomLevel(e.zoomLevel)}this._goto(e.anchorPage,e.verticalOffset,e.horizontalOffset)}_setLayoutToZoomLevel(e){this.layout=new S(this._config,e),this._zoomLevel=e,o(this._documentElement,{style:{height:this.layout.dimensions.height+\"px\",width:this.layout.dimensions.width+\"px\"}}),this._viewport.setInnerDimensions(this.layout.dimensions)}adjust(){this._clearAnimation(),this._render(),this._hooks.onViewDidUpdate&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),null)}_render(){const e=[];this.layout.pageGroups.forEach(t=>{if(!this._viewport.intersectsRegion(t.region))return;const n=t.pages.filter((function(e){return this.isPageVisible(e.index)}),this).map(e=>e.index);e.push.apply(e,n)},this),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._paintOutline(e),e.forEach(e=>{if(!this._compositeImages[e]){const t=this.layout.getPageInfo(e),n=this._sourceResolver.getAllZoomLevelsForPage(t),i=new b(n);i.updateFromCache(this._cache),this._compositeImages[e]=i}},this),this._initiateTileRequests(e);const t=M(this._renderedPages||[],e);t.removed.forEach(e=>{delete this._compositeImages[e]},this),this._renderedPages=e,this._paint(),this._hooks.onPageWillLoad&&t.added.forEach(e=>{this._hooks.onPageWillLoad(e)},this)}_paint(){const e=[];this._renderedPages.forEach(t=>{this._compositeImages[t].getTiles(this._zoomLevel).forEach(n=>{const i=z(n,this._zoomLevel);this._isTileVisible(t,i)&&(e.push(n.url),this._drawTile(t,i,this._cache.get(n.url)))})});const t=this._cache,n=M(this._renderedTiles||[],e);n.added.forEach(e=>{t.acquire(e)}),n.removed.forEach(e=>{t.release(e)}),n.removed&&this._renderedPages.forEach(e=>{this._compositeImages[e].updateFromCache(this._cache)},this),this._renderedTiles=e}_paintOutline(e){e.forEach(e=>{let t=this.layout.getPageInfo(e),n=this._getImageOffset(e),i=Math.max(0,(this._viewport.width-this.layout.dimensions.width)/2),r=Math.max(0,(this._viewport.height-this.layout.dimensions.height)/2),o=n.left-this._viewport.left+i,s=n.top-this._viewport.top+r,a=o<0?-o:0,l=s<0?-s:0,u=Math.max(0,o),c=Math.max(0,s),h=t.dimensions.width-a,f=t.dimensions.height-l;this._ctx.strokeStyle=\"#AAA\",this._ctx.strokeRect(u+.5,c+.5,h,f)})}_initiateTileRequests(e){const t={},n=(e,n)=>{const i=this._compositeImages[n];t[e.url]=new O({url:e.url,timeoutTime:250,settings:this._settings,load:t=>{delete this._pendingRequests[e.url],this._cache.put(e.url,t),i===this._compositeImages[n]?(i.updateWithLoadedUrls([e.url]),this._isTileForSourceVisible(n,e)&&this._paint()):this._isTileForSourceVisible(n,e)&&this._paint()},error:()=>{delete this._pendingRequests[e.url]}})};for(let i=0;i<e.length;i++){const r=e[i],o=this._sourceResolver.getBestZoomLevelForPage(this.layout.getPageInfo(r)).tiles;for(let e=0;e<o.length;e++){const i=o[e];!this._cache.has(i.url)&&this._isTileForSourceVisible(r,i)&&(this._pendingRequests[i.url]?(t[i.url]=this._pendingRequests[i.url],delete this._pendingRequests[i.url]):n(i,r))}}for(const e in this._pendingRequests)this._pendingRequests[e].abort();this._pendingRequests=t}_drawTile(e,t,n){let i=this._getTileToDocumentOffset(e,t),r=Math.max(0,(this._viewport.width-this.layout.dimensions.width)/2),o=Math.max(0,(this._viewport.height-this.layout.dimensions.height)/2),s=i.left-this._viewport.left+r,a=i.top-this._viewport.top+o,l=s<0?-s:0,u=a<0?-a:0,c=Math.max(0,s),h=Math.max(0,a),f=l/t.scaleRatio,d=u/t.scaleRatio,v=Math.min(t.dimensions.width,n.width*t.scaleRatio)-l,g=Math.min(t.dimensions.height,n.height*t.scaleRatio)-u,p=Math.max(1,Math.round(v)),m=Math.max(1,Math.round(g)),w=p/t.scaleRatio,_=m/t.scaleRatio;this._ctx.drawImage(n,f,d,w,_,c,h,p,m)}_isTileForSourceVisible(e,t){return this._isTileVisible(e,z(t,this._zoomLevel))}_isTileVisible(e,t){const n=this._getTileToDocumentOffset(e,t);return this._viewport.intersectsRegion({top:n.top,bottom:n.top+t.dimensions.height,left:n.left,right:n.left+t.dimensions.width})}_getTileToDocumentOffset(e,t){const n=this._getImageOffset(e);return{top:n.top+t.offset.top,left:n.left+t.offset.left}}_getImageOffset(e){return this.layout.getPageOffset(e,{includePadding:!0})}goto(e,t,n){this._clearAnimation(),this._goto(e,t,n),this._hooks.onViewDidUpdate&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),e)}_goto(e,t,n){const i=this.layout.getPageOffset(e),r=i.top+t-Math.round(this._viewport.height/2),o=i.left+n-Math.round(this._viewport.width/2);this._viewport.top=r,this._viewport.left=o,this._render()}transitionViewportPosition(e){this._clearAnimation();const t=e.getPosition,n=this._hooks.onViewDidTransition;this._animation=E.animate({duration:e.duration,parameters:e.parameters,onUpdate:e=>{this._setViewportPosition(t(e)),this._hooks.onZoomLevelWillChange(e.zoomLevel),n&&n()},onEnd:t=>{e.onEnd&&e.onEnd(t),this._hooks.onViewDidUpdate&&!t.interrupted&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),null)}})}_clearAnimation(){this._animation&&(this._animation.cancel(),this._animation=null)}isPageVisible(e){if(!this.layout)return!1;return!!this.layout.getPageInfo(e)&&this._viewport.intersectsRegion(this.layout.getPageRegion(e))}getRenderedPages(){return this._renderedPages.slice()}destroy(){this._clearAnimation(),Object.keys(this._pendingRequests).forEach(e=>{const t=this._pendingRequests[e];delete this._pendingRequests[e],t.abort()},this),this._canvas.parentNode.removeChild(this._canvas)}}function z(e,t){let n;return n=null===t?1:Math.pow(2,t-e.zoomLevel),{sourceZoomLevel:e.zoomLevel,scaleRatio:n,row:e.row,col:e.col,dimensions:{width:e.dimensions.width*n,height:e.dimensions.height*n},offset:{left:e.offset.left*n,top:e.offset.top*n},url:e.url}}function M(e,t){if(e===t)return{added:[],removed:[]};const n=e.filter(e=>-1===t.indexOf(e));return{added:t.filter(t=>-1===e.indexOf(t)),removed:n}}function k(e,t){const n=t.getMaxPageDimensions(e);return{width:Math.floor(n.width),height:Math.floor(n.height)}}function A(e){return function(e){const t=e.manifest,n=[];let i=null,r=[];const o=()=>{for(let e=0,t=r.length;e<t;e++)n.push([r[e]]);r=[]};t.pages.forEach((s,a)=>{const l={index:a,dimensions:k(a,t),paged:!t.paged||s.paged};(e.showNonPagedPages||l.paged)&&(l.paged?0===a||s.facingPages?(n.push([l]),o()):null===i?i=l:(n.push([i,l]),i=null,o()):r.push(l))}),null!==i&&(n.push([i]),o());return n}(e).map(t=>function(e,t){const n=e.verticallyOriented;if(2===t.length)return function(e,t,n){const i=e.dimensions,r=t.dimensions,o=Math.max(i.height,r.height);let s,a,l;if(n){const e=Math.max(i.width,r.width);s=2*e,a=e-i.width,l=e}else s=i.width+r.width,a=0,l=i.width;return{dimensions:{height:o,width:s},pages:[{index:e.index,dimensions:i,groupOffset:{top:0,left:a}},{index:t.index,dimensions:r,groupOffset:{top:0,left:l}}]}}(t[0],t[1],n);const i=t[0],r=i.dimensions;let o;o=i.paged?0===i.index&&n?r.width:0:n?r.width/2:0;const s=n&&!e.manifest.pages[i.index].facingPages;return{dimensions:{height:r.height,width:s?2*r.width:r.width},pages:[{index:i.index,groupOffset:{top:0,left:o},dimensions:r}]}}(e,t))}function j(e){const t=e.viewport.width,n=e.manifest,i=e.pagesPerRow,r=e.fixedHeightGrid,o=e.fixedPadding,s=e.showNonPagedPages,a=(t-o*(i+1))/i,l=a,u=r?o+n.minRatio*a:o+n.maxRatio*a,c=[];let h=[];const f={height:u,width:t};return n.pages.forEach((e,t)=>{if(!s&&n.paged&&!e.paged)return;const a=(e=>{const t=e.d[e.d.length-1],n=t.h/t.w;let i,s;return r?(i=(u-o)/n,s=u-o):(i=l,s=i*n),{width:Math.round(i),height:Math.round(s)}})(e);let d=Math.floor(h.length*(o+l)+o);r&&(d+=(l-a.width)/2),h.push({index:t,dimensions:a,groupOffset:{top:0,left:d}}),h.length===i&&(c.push({dimensions:f,pages:h}),h=[])}),h.length>0&&c.push({dimensions:f,pages:h}),c}function F(e){if(e.inGrid)return j(V(e,[\"manifest\",\"viewport\",\"pagesPerRow\",\"fixedHeightGrid\",\"fixedPadding\",\"showNonPagedPages\"]));{const t=V(e,[\"manifest\",\"verticallyOriented\",\"showNonPagedPages\"]);return e.inBookLayout?A(t):function(e){const t=e.manifest,n=[];return t.pages.forEach((i,r)=>{if(!e.showNonPagedPages&&t.paged&&!i.paged)return;const o=k(r,t);n.push({dimensions:o,pages:[{index:r,groupOffset:{top:0,left:0},dimensions:o}]})}),n}(t)}}function V(e,t){const n={};return t.forEach((function(t){n[t]=e[t]})),n}function R(e){const t={};return e.forEach(e=>{!function(e,t){Object.keys(t).forEach(n=>{Object.defineProperty(e,n,{get:()=>t[n],set:()=>{throw new TypeError(\"Cannot set settings.\"+n)}})})}(t,e)}),t}class B{constructor(e){this.whitelistedKeys=e.whitelistedKeys||[],this.additionalProperties=e.additionalProperties||[],this.validations=e.validations}isValid(e,t,n){let i=null;if(this.validations.some((t,n)=>t.key===e&&(i=n,!0)),null===i)return!0;const r={};r[e]=t;const o=Z(n,r,this);return!this._runValidation(i,t,o)}validate(e){this._validateOptions({},e)}getValidatedOptions(e,t){const n=Object.assign({},t);return this._validateOptions(e,n),n}_validateOptions(e,t){const n=Z(e,t,this);this._applyValidations(t,n)}_applyValidations(e,t){this.validations.forEach((n,i)=>{if(!e.hasOwnProperty(n.key))return;const r=e[n.key],o=this._runValidation(i,r,t);o&&(o.warningSuppressed||function(e,t,n){console.warn(\"Invalid value for \"+e+\": \"+t+\". Using \"+n+\" instead.\")}(n.key,r,o.value),e[n.key]=o.value)},this)}_runValidation(e,t,n){const i=this.validations[e];n.index=e;let r=!1;const o={suppressWarning:()=>{r=!0}},s=i.validate(t,n.proxy,o);return void 0===s||s===t?null:{value:s,warningSuppressed:r}}}function Z(e,t,n){const i={proxy:{},index:null},r=H.bind(null,e,t),o={};return n.whitelistedKeys.forEach(e=>{o[e]={get:r.bind(null,e)}}),n.additionalProperties.forEach(e=>{o[e.key]={get:e.get}}),n.validations.forEach((e,t)=>{o[e.key]={get:()=>{if(t<i.index)return r(e.key);const o=n.validations[i.index].key;throw new TypeError(\"Cannot access setting \"+e.key+\" while validating \"+o)}}}),Object.defineProperties(i.proxy,o),i}function H(e,t,n){return n in t?t[n]:e[n]}class N{constructor(e,t){t=t||{},this.intersectionTolerance=t.intersectionTolerance||0,this.outer=e,this._top=this._left=this._width=this._height=this._innerDimensions=null,this.invalidate()}intersectsRegion(e){return this.hasHorizontalOverlap(e)&&this.hasVerticalOverlap(e)}hasVerticalOverlap(e){const t=this.top-this.intersectionTolerance,n=this.bottom+this.intersectionTolerance;return U(e.top,t,n)||U(e.bottom,t,n)||e.top<=t&&e.bottom>=n}hasHorizontalOverlap(e){const t=this.left-this.intersectionTolerance,n=this.right+this.intersectionTolerance;return U(e.left,t,n)||U(e.right,t,n)||e.left<=t&&e.right>=n}invalidate(){this._width=this.outer.clientWidth,this._height=this.outer.clientHeight,this._top=this.outer.scrollTop,this._left=this.outer.scrollLeft}setInnerDimensions(e){this._innerDimensions=e,e&&(this._top=Y(this._top,0,e.height-this._height),this._left=Y(this._left,0,e.width-this._width))}}function W(e,t){const n=\"_\"+e,i=\"scroll\"+e.charAt(0).toUpperCase()+e.slice(1);return{get:function(){return this[n]},set:function(e){let r;if(this._innerDimensions){r=Y(e,0,this._innerDimensions[t]-this[t])}else r=q(e,0);this[n]=this.outer[i]=r}}}function G(e){return{get:function(){return this[\"_\"+e]}}}function U(e,t,n){return e>=t&&e<=n}function Y(e,t,n){return q(function(e,t){return Math.min(e,t)}(e,n),t)}function q(e,t){return Math.max(e,t)}Object.defineProperties(N.prototype,{top:W(\"top\",\"height\"),left:W(\"left\",\"width\"),width:G(\"width\"),height:G(\"height\"),bottom:{get:function(){return this._top+this._height}},right:{get:function(){return this._left+this._width}}});const $=n(1)(\"diva:ViewerCore\");function X(){return X.counter++}X.counter=1;const K=[{key:\"goDirectlyTo\",validate:(e,t)=>{if(e<0||e>=t.manifest.pages.length)return 0}},{key:\"minPagesPerRow\",validate:e=>Math.max(2,e)},{key:\"maxPagesPerRow\",validate:(e,t)=>Math.max(e,t.minPagesPerRow)},{key:\"pagesPerRow\",validate:(e,t)=>{if(e<t.minPagesPerRow||e>t.maxPagesPerRow)return t.maxPagesPerRow}},{key:\"maxZoomLevel\",validate:(e,t,n)=>{if(n.suppressWarning(),e<0||e>t.manifest.maxZoom)return t.manifest.maxZoom}},{key:\"minZoomLevel\",validate:(e,t,n)=>e>t.manifest.maxZoom?(n.suppressWarning(),0):e<0||e>t.maxZoomLevel?0:void 0},{key:\"zoomLevel\",validate:(e,t,n)=>e>t.manifest.maxZoom?(n.suppressWarning(),0):e<t.minZoomLevel||e>t.maxZoomLevel?t.minZoomLevel:void 0}];class J{constructor(e,t,n){this.parentObject=e,this.publicInstance=n,this.viewerState={currentPageIndices:[0],activePageIndex:0,horizontalOffset:0,horizontalPadding:0,ID:null,initialKeyScroll:!1,initialSpaceScroll:!1,innerElement:null,innerObject:{},isActiveDiva:!0,isScrollable:!0,isZooming:!1,loaded:!1,manifest:null,mobileWebkit:!1,numPages:0,oldZoomLevel:-1,options:t,outerElement:null,outerObject:{},pageOverlays:new _,pageTools:[],parentObject:this.parentObject,pendingManifestRequest:null,pluginInstances:[],renderer:null,resizeTimer:-1,scrollbarWidth:0,selector:\"\",throbberTimeoutID:-1,toolbar:null,verticalOffset:0,verticalPadding:0,viewHandler:null,viewport:null,viewportElement:null,viewportObject:null,zoomDuration:400},this.settings=R([t,this.viewerState]);const r=X();this.viewerState.ID=\"diva-\"+r+\"-\",this.viewerState.selector=this.settings.ID,Object.defineProperties(this.settings,{panelHeight:{get:()=>this.viewerState.viewport.height},panelWidth:{get:()=>this.viewerState.viewport.width}}),this.optionsValidator=new B({additionalProperties:[{key:\"manifest\",get:()=>this.viewerState.manifest}],validations:K}),this.viewerState.scrollbarWidth=function(){let e=document.createElement(\"p\");e.style.width=\"100%\",e.style.height=\"200px\";let t=document.createElement(\"div\");t.style.position=\"absolute\",t.style.top=\"0px\",t.style.left=\"0px\",t.style.visibility=\"hidden\",t.style.width=\"200px\",t.style.height=\"150px\",t.style.overflow=\"hidden\",t.appendChild(e),document.body.appendChild(t);let n=e.offsetWidth;t.style.overflow=\"scroll\";let i=e.offsetWidth;return n===i&&(i=t.clientWidth),document.body.removeChild(t),n-i}(),this.viewerState.mobileWebkit=void 0!==window.orientation,null===t.hashParamSuffix&&(t.hashParamSuffix=1===r?\"\":r+\"\");const o=i(\"div\",this.elemAttrs(\"inner\",{class:\"diva-inner\"})),s=i(\"div\",this.elemAttrs(\"viewport\"),o),a=i(\"div\",this.elemAttrs(\"outer\"),s,i(\"div\",this.elemAttrs(\"throbber\"),[i(\"div\",{class:\"cube cube1\"}),i(\"div\",{class:\"cube cube2\"}),i(\"div\",{class:\"cube cube3\"}),i(\"div\",{class:\"cube cube4\"}),i(\"div\",{class:\"cube cube5\"}),i(\"div\",{class:\"cube cube6\"}),i(\"div\",{class:\"cube cube7\"}),i(\"div\",{class:\"cube cube8\"}),i(\"div\",{class:\"cube cube9\"})]));this.viewerState.innerElement=o,this.viewerState.viewportElement=s,this.viewerState.outerElement=a,this.viewerState.innerObject=o,this.viewerState.viewportObject=s,this.viewerState.outerObject=a,this.settings.parentObject.append(a),this.viewerState.viewport=new N(this.viewerState.viewportElement,{intersectionTolerance:this.settings.viewportMargin}),this.boundScrollFunction=this.scrollFunction.bind(this),this.boundEscapeListener=this.escapeListener.bind(this),this.initPlugins(),this.handleEvents(),this.showThrobber()}isValidOption(e,t){return this.optionsValidator.isValid(e,t,this.viewerState.options)}elemAttrs(e,t){const n={id:this.settings.ID+e,class:\"diva-\"+e};return t?Object.assign(n,t):n}getPageData(e,t){return this.settings.manifest.pages[e].d[this.settings.zoomLevel][t]}clearViewer(){this.viewerState.viewport.top=0,clearTimeout(this.viewerState.resizeTimer)}hasChangedOption(e,t){return t in e&&e[t]!==this.settings[t]}escapeListener(e){27===e.keyCode&&this.publicInstance.leaveFullscreenMode()}reloadViewer(e){const t=[];if(e=this.optionsValidator.getValidatedOptions(this.settings,e),this.hasChangedOption(e,\"zoomLevel\")&&(this.viewerState.oldZoomLevel=this.settings.zoomLevel,this.viewerState.options.zoomLevel=e.zoomLevel,t.push([\"ZoomLevelDidChange\",e.zoomLevel])),this.hasChangedOption(e,\"pagesPerRow\")&&(this.viewerState.options.pagesPerRow=e.pagesPerRow,t.push([\"GridRowNumberDidChange\",e.pagesPerRow])),this.hasChangedOption(e,\"verticallyOriented\")&&(this.viewerState.options.verticallyOriented=e.verticallyOriented),this.hasChangedOption(e,\"showNonPagedPages\")&&(this.viewerState.options.showNonPagedPages=e.showNonPagedPages),\"goDirectlyTo\"in e?(this.viewerState.options.goDirectlyTo=e.goDirectlyTo,\"verticalOffset\"in e&&(this.viewerState.verticalOffset=e.verticalOffset),\"horizontalOffset\"in e&&(this.viewerState.horizontalOffset=e.horizontalOffset)):this.viewerState.options.goDirectlyTo=this.settings.activePageIndex,(this.hasChangedOption(e,\"inGrid\")||this.hasChangedOption(e,\"inBookLayout\"))&&(\"inGrid\"in e&&(this.viewerState.options.inGrid=e.inGrid),\"inBookLayout\"in e&&(this.viewerState.options.inBookLayout=e.inBookLayout),t.push([\"ViewDidSwitch\",this.settings.inGrid])),this.hasChangedOption(e,\"inFullscreen\")&&(this.viewerState.options.inFullscreen=e.inFullscreen,this.prepareModeChange(e),t.push([\"ModeDidSwitch\",this.settings.inFullscreen])),this.clearViewer(),this.updateViewHandlerAndRendering(),this.viewerState.renderer){const e={pageLayouts:F(this.settings),padding:this.getPadding(),maxZoomLevel:this.settings.inGrid?null:this.viewerState.manifest.maxZoom,verticallyOriented:this.settings.verticallyOriented||this.settings.inGrid},t={zoomLevel:this.settings.inGrid?null:this.settings.zoomLevel,anchorPage:this.settings.goDirectlyTo,verticalOffset:this.viewerState.verticalOffset,horizontalOffset:this.viewerState.horizontalOffset},n=this.getCurrentSourceProvider();if($.enabled){const t=Object.keys(e).filter((function(e){return\"pageLayouts\"!==e&&\"padding\"!==e})).map((function(t){const n=e[t];return t+\": \"+JSON.stringify(n)})).join(\", \");$(\"reload with %s\",t)}this.viewerState.renderer.load(e,t,n)}return t.forEach(e=>{this.publish.apply(this,e)}),!0}prepareModeChange(e){const t=e.inFullscreen?\"add\":\"remove\";this.viewerState.outerObject.classList[t](\"diva-fullscreen\"),document.body.classList[t](\"diva-hide-scrollbar\"),this.settings.parentObject.classList[t](\"diva-full-width\");const n=this.settings.panelHeight,i=this.settings.panelWidth;if(this.viewerState.viewport.invalidate(),!(this.viewerState.loaded||this.settings.inGrid||\"verticalOffset\"in e)){const e=this.settings.panelHeight,t=this.settings.panelWidth;this.viewerState.verticalOffset+=(n-e)/2,this.viewerState.horizontalOffset+=(i-t)/2}e.inFullscreen?document.addEventListener(\"keyup\",this.boundEscapeListener):document.removeEventListener(\"keyup\",this.boundEscapeListener)}updateViewHandlerAndRendering(){const e=this.settings.inGrid?w:m;!this.viewerState.viewHandler||this.viewerState.viewHandler instanceof e||(this.viewerState.viewHandler.destroy(),this.viewerState.viewHandler=null),this.viewerState.viewHandler||(this.viewerState.viewHandler=new e(this)),this.viewerState.renderer||this.initializeRenderer()}initializeRenderer(){const e=D.getCompatibilityErrors();if(e)this.showError(e);else{const e={viewport:this.viewerState.viewport,outerElement:this.viewerState.outerElement,innerElement:this.viewerState.innerElement,settings:this.settings},t={onViewWillLoad:()=>{this.viewerState.viewHandler.onViewWillLoad()},onViewDidLoad:()=>{this.updatePageOverlays(),this.viewerState.viewHandler.onViewDidLoad()},onViewDidUpdate:(e,t)=>{this.updatePageOverlays(),this.viewerState.viewHandler.onViewDidUpdate(e,t)},onViewDidTransition:()=>{this.updatePageOverlays()},onPageWillLoad:e=>{this.publish(\"PageWillLoad\",e)},onZoomLevelWillChange:e=>{this.publish(\"ZoomLevelWillChange\",e)}};this.viewerState.renderer=new D(e,t)}}getCurrentSourceProvider(){if(this.settings.inGrid){const e={getAllZoomLevelsForPage:t=>[e.getBestZoomLevelForPage(t)],getBestZoomLevelForPage:e=>({zoomLevel:1,rows:1,cols:1,tiles:[{url:this.settings.manifest.getPageImageURL(e.index,{width:e.dimensions.width}),zoomLevel:1,row:0,col:0,dimensions:e.dimensions,offset:{top:0,left:0}}]})};return e}const e={width:this.settings.tileWidth,height:this.settings.tileHeight};return{getBestZoomLevelForPage:t=>this.settings.manifest.getPageImageTiles(t.index,Math.ceil(this.settings.zoomLevel),e),getAllZoomLevelsForPage:t=>{const n=[],i=this.viewerState.manifest.maxZoom;for(let r=0;r<=i;r++)n.push(this.settings.manifest.getPageImageTiles(t.index,r,e));return n.reverse(),n}}}getPadding(){let e,t,n,i;return this.settings.inGrid?(n=this.settings.fixedPadding,e=t=i=0):(e=this.settings.verticallyOriented?this.viewerState.verticalPadding:0,t=this.settings.verticallyOriented?0:this.viewerState.horizontalPadding,n=this.settings.verticallyOriented?0:this.viewerState.verticalPadding,i=this.settings.verticallyOriented?this.viewerState.horizontalPadding:0),{document:{top:n,bottom:n,left:i,right:i},page:{top:e,bottom:0,left:t,right:0}}}updatePageOverlays(){this.viewerState.pageOverlays.updateOverlays(this.viewerState.renderer.getRenderedPages())}handleZoom(e,t){if(!this.isValidOption(\"zoomLevel\",e))return!1;if(this.viewerState.viewportObject.removeEventListener(\"scroll\",this.boundScrollFunction),!t){const e=this.viewerState.viewport,n=this.viewerState.renderer.layout.getPageRegion(this.settings.activePageIndex);t={anchorPage:this.settings.activePageIndex,offset:{left:e.width/2-(n.left-e.left),top:e.height/2-(n.top-e.top)}}}const n=this.viewerState.renderer.layout.getPageRegion(t.anchorPage),i=n.left+t.offset.left-(this.settings.viewport.left+this.settings.viewport.width/2),r=n.top+t.offset.top-(this.settings.viewport.top+this.settings.viewport.height/2),o=(e,n)=>{const o=Math.pow(2,e-n),s=t.offset.left*o-i,a=t.offset.top*o-r;return{zoomLevel:e,anchorPage:t.anchorPage,verticalOffset:a,horizontalOffset:s}};this.viewerState.options.zoomLevel=e;let s=this.viewerState.oldZoomLevel;this.viewerState.oldZoomLevel=this.settings.zoomLevel;const a=o(e,s);this.viewerState.options.goDirectlyTo=a.anchorPage,this.viewerState.verticalOffset=a.verticalOffset,this.viewerState.horizontalOffset=a.horizontalOffset,this.viewerState.renderer.transitionViewportPosition({duration:this.settings.zoomDuration,parameters:{zoomLevel:{from:s,to:e}},getPosition:e=>o(e.zoomLevel,s),onEnd:t=>{this.viewerState.viewportObject.addEventListener(\"scroll\",this.boundScrollFunction),t.interrupted&&(this.viewerState.oldZoomLevel=e)}});let l=document.getElementById(this.settings.selector+\"zoom-in-button\"),u=document.getElementById(this.settings.selector+\"zoom-out-button\");return l.disabled=!0,u.disabled=!0,setTimeout(()=>{l.disabled=!1,u.disabled=!1},this.settings.zoomDuration),this.publish(\"ZoomLevelDidChange\",e),!0}getYOffset(e,t){let n=void 0===e?this.settings.activePageIndex:e;return\"center\"===t||\"centre\"===t?parseInt(this.getPageData(n,\"h\")/2,10):\"bottom\"===t?parseInt(this.getPageData(n,\"h\")-this.settings.panelHeight/2,10):parseInt(this.settings.panelHeight/2,10)}getXOffset(e,t){let n=void 0===e?this.settings.activePageIndex:e;return\"left\"===t?parseInt(this.settings.panelWidth/2,10):\"right\"===t?parseInt(this.getPageData(n,\"w\")-this.settings.panelWidth/2,10):parseInt(this.getPageData(n,\"w\")/2,10)}updatePanelSize(){return this.viewerState.viewport.invalidate(),this.viewerState.renderer&&(this.updateOffsets(),this.viewerState.renderer.goto(this.settings.activePageIndex,this.viewerState.verticalOffset,this.viewerState.horizontalOffset)),!0}updateOffsets(){const e=this.viewerState.renderer.layout.getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);e&&(this.viewerState.horizontalOffset=e.x,this.viewerState.verticalOffset=e.y)}bindMouseEvents(){this.viewerState.viewportObject.classList.add(\"dragscroll\"),h.onDoubleClick(this.viewerState.viewportObject,(e,t)=>{$(\"Double click at %s, %s\",t.left,t.top),this.viewerState.viewHandler.onDoubleClick(e,t)})}onResize(){this.updatePanelSize(),clearTimeout(this.viewerState.resizeTimer),this.viewerState.resizeTimer=setTimeout(()=>{const e=this.viewerState.renderer.layout.getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);e?this.reloadViewer({goDirectlyTo:this.settings.activePageIndex,verticalOffset:e.y,horizontalOffset:e.x}):this.reloadViewer({goDirectlyTo:this.settings.activePageIndex})},200)}bindTouchEvents(){this.settings.blockMobileMove&&document.body.addEventListener(\"touchmove\",e=>(e.originalEvent.preventDefault(),!1)),h.onPinch(this.viewerState.viewportObject,(function(e,t,n,i){$(\"Pinch %s at %s, %s\",i-n,t.left,t.top),this.viewerState.viewHandler.onPinch(e,t,n,i)})),h.onDoubleTap(this.viewerState.viewportObject,(function(e,t){$(\"Double tap at %s, %s\",t.left,t.top),this.viewerState.viewHandler.onDoubleClick(e,t)}))}scrollFunction(){const e=this.viewerState.viewport.top,t=this.viewerState.viewport.left;let n;this.viewerState.viewport.invalidate();const i=this.viewerState.viewport.top,r=this.viewerState.viewport.left;n=this.settings.verticallyOriented||this.settings.inGrid?i-e:r-t,this.viewerState.renderer.adjust();const o=this.settings.verticallyOriented||this.settings.inGrid?i:r;this.publish(\"ViewerDidScroll\",o),n>0?this.publish(\"ViewerDidScrollDown\",o):n<0&&this.publish(\"ViewerDidScrollUp\",o),this.updateOffsets()}handleEvents(){this.viewerState.innerObject.addEventListener(\"mousedown\",()=>{this.viewerState.innerObject.classList.add(\"diva-grabbing\")}),this.viewerState.innerObject.addEventListener(\"mouseup\",()=>{this.viewerState.innerObject.classList.remove(\"diva-grabbing\")}),this.bindMouseEvents(),this.viewerState.viewportObject.addEventListener(\"scroll\",this.boundScrollFunction);document.addEventListener(\"keydown.diva\",e=>{if(!this.viewerState.isActiveDiva)return!0;if(this.settings.enableSpaceScroll&&!e.shiftKey&&32===e.keyCode||this.settings.enableKeyScroll&&34===e.keyCode)return this.viewerState.viewport.top+=this.settings.panelHeight,!1;if(this.settings.enableSpaceScroll||32!==e.keyCode||e.preventDefault(),this.settings.enableKeyScroll){if(e.shiftKey||e.ctrlKey||e.metaKey)return!0;switch(e.keyCode){case 33:return this.viewerState.viewport.top-=this.settings.panelHeight,!1;case 38:return this.viewerState.viewport.top-=this.settings.arrowScrollAmount,!1;case 40:return this.viewerState.viewport.top+=this.settings.arrowScrollAmount,!1;case 37:return this.viewerState.viewport.left-=this.settings.arrowScrollAmount,!1;case 39:return this.viewerState.viewport.left+=this.settings.arrowScrollAmount,!1;case 36:return this.viewerState.viewport.top=0,!1;case 35:return this.settings.verticallyOriented?this.viewerState.viewport.top=1/0:this.viewerState.viewport.left=1/0,!1;default:return!0}}return!0}),c.Events.subscribe(\"ViewerDidTerminate\",(function(){document.removeEventListener(\"keydown.diva\")}),this.settings.ID),window.addEventListener(\"resize\",this.onResize.bind(this),!1),c.Events.subscribe(\"ViewerDidTerminate\",(function(){window.removeEventListener(\"resize\",this.onResize,!1)}),this.settings.ID),\"onorientationchange\"in window&&(window.addEventListener(\"orientationchange\",this.onResize,!1),c.Events.subscribe(\"ViewerDidTerminate\",(function(){window.removeEventListener(\"orientationchange\",this.onResize,!1)}),this.settings.ID)),c.Events.subscribe(\"PanelSizeDidChange\",this.updatePanelSize,this.settings.ID),c.Events.subscribe(\"ViewerDidTerminate\",()=>{this.viewerState.renderer&&this.viewerState.renderer.destroy(),clearTimeout(this.viewerState.resizeTimer)},this.settings.ID)}initPlugins(){if(!this.settings.hasOwnProperty(\"plugins\"))return null;this.viewerState.pluginInstances=this.settings.plugins.map(e=>{const t=new e(this);return t.isPageTool&&this.viewerState.pageTools.push(t),t})}showThrobber(){this.hideThrobber(),this.viewerState.throbberTimeoutID=setTimeout(()=>{let e=document.getElementById(this.settings.selector+\"throbber\");e&&(e.style.display=\"block\")},this.settings.throbberTimeout)}hideThrobber(){clearTimeout(this.viewerState.throbberTimeoutID);let e=document.getElementById(this.settings.selector+\"throbber\");e&&(e.style.display=\"none\")}showError(e){const t=i(\"div\",this.elemAttrs(\"error\"),[i(\"button\",this.elemAttrs(\"error-close\",{\"aria-label\":\"Close dialog\"})),i(\"p\",i(\"strong\",\"Error\")),i(\"div\",e)]);this.viewerState.outerObject.appendChild(t),document.getElementById(this.settings.selector+\"error-close\").addEventListener(\"click\",()=>{t.parentNode.removeChild(t)})}setManifest(e,t){if(this.viewerState.manifest=e,this.hideThrobber(),this.viewerState.numPages=this.settings.manifest.pages.length,this.optionsValidator.validate(this.viewerState.options),this.publish(\"NumberOfPagesDidChange\",this.settings.numPages),this.settings.adaptivePadding>0){const e=Math.floor((this.settings.minZoomLevel+this.settings.maxZoomLevel)/2);this.viewerState.horizontalPadding=parseInt(this.settings.manifest.getAverageWidth(e)*this.settings.adaptivePadding,10),this.viewerState.verticalPadding=parseInt(this.settings.manifest.getAverageHeight(e)*this.settings.adaptivePadding,10)}else this.viewerState.horizontalPadding=this.settings.fixedPadding,this.viewerState.verticalPadding=this.settings.fixedPadding;let n,r;this.viewerState.pageTools.length&&(this.viewerState.verticalPadding=Math.max(40,this.viewerState.verticalPadding)),this.settings.manifest.paged&&(this.viewerState.options.inBookLayout=!0),this.publish(\"ObjectDidLoad\",this.settings),this.updatePanelSize();let o=!1,s=!1;if(null==t.goDirectlyTo?(t.goDirectlyTo=this.settings.goDirectlyTo,n=r=!0):(n=null==t.horizontalOffset||isNaN(t.horizontalOffset),r=null==t.verticalOffset||isNaN(t.verticalOffset)),n&&(0===t.goDirectlyTo&&this.settings.inBookLayout&&this.settings.verticallyOriented?t.horizontalOffset=this.viewerState.horizontalPadding:(s=!0,t.horizontalOffset=this.getXOffset(t.goDirectlyTo,\"center\"))),r&&(o=!0,t.verticalOffset=this.getYOffset(t.goDirectlyTo,\"top\")),this.reloadViewer(t),this.updatePanelSize(),this.settings.enableAutoTitle){let e=document.getElementById(this.settings.selector+\"title\");e?e.innerHTML=this.settings.manifest.itemTitle:this.settings.parentObject.insertBefore(i(\"div\",this.elemAttrs(\"title\"),[this.settings.manifest.itemTitle]),this.settings.parentObject.firstChild)}this.settings.verticallyOriented?this.viewerState.innerElement.style.minWidth=this.settings.panelWidth+\"px\":this.viewerState.innerElement.style.minHeight=this.settings.panelHeight+\"px\",(o||s)&&(o&&(this.viewerState.verticalOffset=this.getYOffset(this.settings.activePageIndex,\"top\")),s&&(this.viewerState.horizontalOffset=this.getXOffset(this.settings.activePageIndex,\"center\")),this.viewerState.renderer.goto(this.settings.activePageIndex,this.viewerState.verticalOffset,this.viewerState.horizontalOffset)),this.viewerState.loaded=!0,this.publish(\"ViewerDidLoad\",this.settings)}publish(e){const t=Array.prototype.slice.call(arguments,1);c.Events.publish(e,t,this.publicInstance)}getSettings(){return this.settings}getInternalState(){return this.viewerState}getPublicInstance(){return this.publicInstance}getPageTools(){return this.viewerState.pageTools}getCurrentLayout(){return this.viewerState.renderer?this.viewerState.renderer.layout:null}getViewport(){const e=this.viewerState.viewport;return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,width:e.width,height:e.height}}addPageOverlay(e){this.viewerState.pageOverlays.addOverlay(e)}removePageOverlay(e){this.viewerState.pageOverlays.removeOverlay(e)}getPageRegion(e,t){const n=this.viewerState.renderer.layout,i=n.getPageRegion(e,t);if(t&&t.incorporateViewport){const e=this.settings.verticallyOriented?\"width\":\"height\";if(this.viewerState.viewport[e]>n.dimensions[e]){const t=(this.viewerState.viewport[e]-n.dimensions[e])/2;return this.settings.verticallyOriented?{top:i.top,bottom:i.bottom,left:i.left+t,right:i.right+t}:{top:i.top+t,bottom:i.bottom+t,left:i.left,right:i.right}}}return i}getPagePositionAtViewportOffset(e){const t=e.left+this.viewerState.viewport.left,n=e.top+this.viewerState.viewport.top,i=this.viewerState.renderer.getRenderedPages(),r=i.length;for(let e=0;e<r;e++){const r=i[e],o=this.viewerState.renderer.layout.getPageRegion(r);if(o.left<=t&&o.right>=t&&o.top<=n&&o.bottom>=n)return{anchorPage:r,offset:{left:t-o.left,top:n-o.top}}}const o=this.viewerState.renderer.layout.getPageRegion(this.settings.activePageIndex);return{anchorPage:this.settings.activePageIndex,offset:{left:t-o.left,top:n-o.top}}}setCurrentPages(e,t){!function(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}(this.viewerState.currentPageIndices,t)?(this.viewerState.currentPageIndices=t,this.viewerState.activePageIndex!==e&&(this.viewerState.activePageIndex=e,this.publish(\"ActivePageDidChange\",e)),this.publish(\"VisiblePageDidChange\",t),this.viewerState.manifest.pages[e].otherImages.length>0&&this.publish(\"VisiblePageHasAlternateViews\",e)):this.viewerState.activePageIndex!==e&&(this.viewerState.activePageIndex=e,this.publish(\"ActivePageDidChange\",e))}getPageName(e){return this.viewerState.manifest.pages[e].f}reload(e){this.reloadViewer(e)}zoom(e,t){return this.handleZoom(e,t)}enableScrollable(){this.viewerState.isScrollable||(this.bindMouseEvents(),this.enableDragScrollable(),this.viewerState.options.enableKeyScroll=this.viewerState.initialKeyScroll,this.viewerState.options.enableSpaceScroll=this.viewerState.initialSpaceScroll,this.viewerState.viewportElement.style.overflow=\"auto\",this.viewerState.isScrollable=!0)}enableDragScrollable(){this.viewerState.viewportObject.hasAttribute(\"nochilddrag\")&&this.viewerState.viewportObject.removeAttribute(\"nochilddrag\")}disableScrollable(){this.viewerState.isScrollable&&(this.disableDragScrollable(),this.viewerState.outerObject.dblclick=null,this.viewerState.outerObject.contextmenu=null,this.viewerState.viewportElement.style.overflow=\"hidden\",this.viewerState.initialKeyScroll=this.settings.enableKeyScroll,this.viewerState.initialSpaceScroll=this.settings.enableSpaceScroll,this.viewerState.options.enableKeyScroll=!1,this.viewerState.options.enableSpaceScroll=!1,this.viewerState.isScrollable=!1)}disableDragScrollable(){this.viewerState.viewportObject.hasAttribute(\"nochilddrag\")||this.viewerState.viewportObject.setAttribute(\"nochilddrag\",\"\")}clear(){this.clearViewer()}setPendingManifestRequest(e){this.viewerState.pendingManifestRequest=e}destroy(){this.publish(\"ViewerWillTerminate\",this.settings),this.settings.pendingManifestRequest&&this.settings.pendingManifestRequest.abort(),document.body.removeClass(\"diva-hide-scrollbar\"),this.settings.parentObject.parent().empty().removeData(\"diva\"),this.settings.parentObject.parent().removeAttr(\"style\").removeAttr(\"class\"),this.publish(\"ViewerDidTerminate\",this.settings),c.Events.unsubscribeAll(this.settings.ID)}}function Q(e){let t,n=e.label,i=\"object\"==typeof n?n[Object.keys(n)[0]][0]:n,r=e.value;return t=Array.isArray(r)?r.map(e=>e[Object.keys(e)[0]]):\"object\"==typeof r?r[Object.keys(r)[0]]:r,Array.isArray(t)&&(t=t.join(\", \")),{label:i,value:t}}const ee=(e,t)=>{const n=Math.max(e,t);return n<128?0:Math.ceil(Math.log((n+1)/257)/Math.log(2))},te=(e,t)=>e/Math.pow(2,t),ne=(e,t)=>e.map(e=>{const n=e.width,i=e.height,r=re(e),o=\"/\"!==r.url.slice(-1)?r.url+\"/\":r.url,s=new Array(t+1);for(let e=0;e<t+1;e++)s[e]={h:Math.floor(te(i,t-e)),w:Math.floor(te(n,t-e))};return{f:r.url,url:o,il:e.label||\"\",d:s}});function ie(e){let t=e[\"@context\"];if(!t)return console.error(\"Invalid IIIF Manifest; No @context found.\"),null;const n=(e=>\"http://iiif.io/api/presentation/2/context.json\"===e?2:Array.isArray(e)&&e.includes(\"http://iiif.io/api/presentation/2/context.json\")?2:Array.isArray(e)&&e.includes(\"http://iiif.io/api/presentation/3/context.json\")?3:2)(t),i=e.sequences?e.sequences[0]:null,r=i?i.canvases:e.items,o=r.length,s=new Array(r.length);let a,l,u,c,h,f,d,v,g,p,m,w,_,y,b,S,C,P=[],x=100,L=0,O=100;for(let e=0;e<o;e++){const t=r[e],n=t.width,i=t.height,o=ee(n,i),s=i/n;L=Math.max(s,L),O=Math.min(s,O),x=Math.min(x,o)}const E=new Array(x+1).fill(0),I=new Array(x+1).fill(0),T=new Array(x+1).fill(0),D=new Array(x+1).fill(0);for(let e=0;e<o;e++){if(a=r[e],w=a[\"@id\"]||a.id,_=a.label,l=a.images?a.images[0].resource:a.items[0].items[0].body,P=[],\"oa:Choice\"===l[\"@type\"]||\"Choice\"===l.type?(u=l.default||l.items[0],c=l.item||l.items.slice(1),P=ne(c,x)):u=l,g=a.width||u.width,p=a.height||u.height,g<=0||p<=0){console.warn(\"Invalid width or height for canvas \"+_+\". Skipping\");continue}m=ee(g,p),y=u.label||null,d=re(u),f=\"/\"!==d.url.slice(-1)?d.url+\"/\":d.url,h=u.service[\"@context\"]||u.service.type,v=\"http://iiif.io/api/image/2/context.json\"===h||\"ImageService2\"===h?2:\"http://library.stanford.edu/iiif/image-api/1.1/context.json\"===h?1.1:1,b=new Array(x+1);for(let e=0;e<x+1;e++)S=Math.floor(te(g,x-e)),C=Math.floor(te(p,x-e)),b[e]={h:C,w:S},E[e]+=S,I[e]+=C,T[e]=Math.max(S,T[e]),D[e]=Math.max(C,D[e]);let t=\"non-paged\"!==a.viewingHint||!!a.behavior&&\"non-paged\"!==a.behavior[0],n=\"facing-pages\"===a.viewingHint||!!a.behavior&&\"facing-pages\"===a.behavior[0];s[e]={d:b,m:m,l:_,il:y,f:d.url,url:f,api:v,paged:t,facingPages:n,canvas:w,otherImages:P,xoffset:d.x||null,yoffset:d.y||null}}const z=new Array(x+1),M=new Array(x+1);for(let e=0;e<x+1;e++)z[e]=E[e]/o,M[e]=I[e]/o;const k={a_wid:z,a_hei:M,max_w:T,max_h:D,max_ratio:L,min_ratio:O,t_hei:I,t_wid:E};return{version:n,item_title:Q(e).label,metadata:e.metadata||null,dims:k,max_zoom:x,pgs:s,paged:\"paged\"===e.viewingHint||!!e.behaviour&&\"paged\"===e.behaviour[0]||!!i&&\"paged\"===i.viewingHint}}function re(e){let t=e[\"@id\"]||e.id;const n=/#xywh=([0-9]+,[0-9]+,[0-9]+,[0-9]+)/;let i=\"\",r=!0;if(/\\/([0-9]+,[0-9]+,[0-9]+,[0-9]+)\\//.test(t)){const e=t.split(\"/\");i=e[e.length-4]}else if(n.test(t)){i=n.exec(t)[1]}else e.service&&(e.service[\"@id\"]||e.service.id)&&(t=e.service[\"@id\"]||e.service.id,r=!1);r&&(t=t.split(\"/\").slice(0,-4).join(\"/\"));const o={url:t};if(i.length){const e=i.split(\",\");o.x=parseInt(e[0],10),o.y=parseInt(e[1],10),o.w=parseInt(e[2],10),o.h=parseInt(e[3],10)}return o}class oe{getPageImageURL(e,t,n){let i;i=!n||null==n.width&&null==n.height?\"full\":(null==n.width?\"\":n.width)+\",\"+(null==n.height?\"\":n.height);const r=e.pages[t],o=r.api>1.1?\"default\":\"native\";return encodeURI(r.url+\"full/\"+i+\"/0/\"+o+\".jpg\")}getTileImageURL(e,t,n){const i=e.pages[t];let r,o;r=n.row===n.rowCount-1?i.d[n.zoomLevel].h-(n.rowCount-1)*n.tileDimensions.height:n.tileDimensions.height,o=n.col===n.colCount-1?i.d[n.zoomLevel].w-(n.colCount-1)*n.tileDimensions.width:n.tileDimensions.width;const s=Math.pow(2,e.maxZoom-n.zoomLevel);let a=n.col*n.tileDimensions.width*s,l=n.row*n.tileDimensions.height*s;i.hasOwnProperty(\"xoffset\")&&(a+=i.xoffset,l+=i.yoffset);const u=[a,l,o*s,r*s].join(\",\"),c=i.api>1.1?\"default\":\"native\";return encodeURI(i.url+u+\"/\"+o+\",\"+r+\"/0/\"+c+\".jpg\")}}class se{constructor(e,t){this.pages=e.pgs,this.maxZoom=e.max_zoom,this.maxRatio=e.dims.max_ratio,this.minRatio=e.dims.min_ratio,this.itemTitle=e.item_title,this.metadata=e.metadata,this.paged=!!e.paged,this._maxWidths=e.dims.max_w,this._maxHeights=e.dims.max_h,this._averageWidths=e.dims.a_wid,this._averageHeights=e.dims.a_hei,this._totalHeights=e.dims.t_hei,this._totalWidths=e.dims.t_wid,this._urlAdapter=t}static fromIIIF(e){const t=ie(e);return new se(t,new oe)}isPageValid(e,t){return!(!t&&this.paged&&!this.pages[e].paged)&&(e>=0&&e<this.pages.length)}getMaxPageDimensions(e){const t=this.pages[e].d[this.maxZoom];return{height:t.h,width:t.w}}getPageDimensionsAtZoomLevel(e,t){const n=this.pages[e].d[this.maxZoom],i=(r=this.maxZoom,o=t,1/Math.pow(2,r-o));var r,o;return{height:n.h*i,width:n.w*i}}getPageImageURL(e,t){return this._urlAdapter.getPageImageURL(this,e,t)}getPageImageTiles(e,t,n){const i=this.pages[e];if(!isFinite(t)||t%1!=0)throw new TypeError(\"Zoom level must be an integer: \"+t);const r=Math.ceil(i.d[t].h/n.height),o=Math.ceil(i.d[t].w/n.width),s=[];let a,l,u;for(a=0;a<r;a++)for(l=0;l<o;l++)u=this._urlAdapter.getTileImageURL(this,e,{row:a,col:l,rowCount:r,colCount:o,zoomLevel:t,tileDimensions:n}),s.push({row:a,col:l,zoomLevel:t,dimensions:{height:n.height,width:n.width},offset:{top:a*n.height,left:l*n.width},url:u});return{zoomLevel:t,rows:r,cols:o,tiles:s}}}function ae(e){return function(t){return this[e][t]}}se.prototype.getMaxWidth=ae(\"_maxWidths\"),se.prototype.getMaxHeight=ae(\"_maxHeights\"),se.prototype.getAverageWidth=ae(\"_averageWidths\"),se.prototype.getAverageHeight=ae(\"_averageHeights\"),se.prototype.getTotalWidth=ae(\"_totalWidths\"),se.prototype.getTotalHeight=ae(\"_totalHeights\");class le{constructor(e){this.viewer=e,this.settings=e.settings}_elemAttrs(e,t){const n={id:this.settings.ID+e,class:\"diva-\"+e};return t?Object.assign(n,t):n}_subscribe(e,t){c.Events.subscribe(e,t,this.settings.ID)}createButton(e,t,n,r){const o=i(\"button\",{type:\"button\",id:this.settings.ID+e,class:\"diva-\"+e+\" diva-button\",title:t,\"aria-label\":t});return r&&o.appendChild(r),n&&o.addEventListener(\"click\",n),o}createLabel(e,t,n,r,o){return i(\"div\",{id:this.settings.ID+t,class:e+\" diva-label\"},[n,i(\"span\",{id:this.settings.ID+r},o)])}createZoomButtons(){let e=this._createZoomOutIcon(),t=this._createZoomInIcon(),n=[this.createButton(\"zoom-out-button\",\"Zoom Out\",()=>{this.viewer.setZoomLevel(this.settings.zoomLevel-1)},e),this.createButton(\"zoom-in-button\",\"Zoom In\",()=>{this.viewer.setZoomLevel(this.settings.zoomLevel+1)},t),this.createLabel(\"diva-zoom-label\",\"zoom-label\",\"Zoom level: \",\"zoom-level\",this.settings.zoomLevel+1)],r=function(){document.getElementById(this.settings.ID+\"zoom-level\").textContent=this.settings.zoomLevel+1};return this._subscribe(\"ZoomLevelDidChange\",r),this._subscribe(\"ViewerDidLoad\",r),i(\"div\",{id:this.settings.ID+\"zoom-controls\",style:\"display: none\"},n)}createGridControls(){let e=this._createGridMoreIcon(),t=this._createGridFewerIcon(),n=[this.createButton(\"grid-out-button\",\"Fewer\",()=>{this.viewer.setGridPagesPerRow(this.settings.pagesPerRow-1)},t),this.createButton(\"grid-in-button\",\"More\",()=>{this.viewer.setGridPagesPerRow(this.settings.pagesPerRow+1)},e),this.createLabel(\"diva-grid-label\",\"grid-label\",\"Pages per row: \",\"pages-per-row\",this.settings.pagesPerRow)];return this._subscribe(\"GridRowNumberDidChange\",(function(){document.getElementById(this.settings.ID+\"pages-per-row\").textContent=this.settings.pagesPerRow})),i(\"div\",{id:this.settings.ID+\"grid-controls\",style:\"display:none\"},n)}createPageLabel(){const e=i(\"span\",{id:this.settings.ID+\"current-page\"}),t=()=>{let t=this.viewer.getCurrentPageIndices(),n=t[0],i=t[t.length-1],r=this.settings.manifest.pages[n].l,o=this.settings.manifest.pages[i].l;n!==i?this.settings.enableIndexAsLabel?e.textContent=n+\" - \"+i:e.textContent=r+\" - \"+o:this.settings.enableIndexAsLabel?e.textContent=n:e.textContent=r};return this._subscribe(\"VisiblePageDidChange\",t),this._subscribe(\"ViewerDidLoad\",t),this._subscribe(\"ViewDidSwitch\",t),i(\"span\",{class:\"diva-page-label diva-label\"},e)}createGotoPageForm(){const e=i(\"input\",{id:this.settings.ID+\"goto-page-input\",class:\"diva-input diva-goto-page-input\",autocomplete:\"off\",type:\"text\",\"aria-label\":\"Page Input\"}),t=i(\"input\",{id:this.settings.ID+\"goto-page-submit\",class:\"diva-button diva-button-text\",type:\"submit\",value:\"Go\"}),n=i(\"div\",{id:this.settings.ID+\"input-suggestions\",class:\"diva-input-suggestions\"}),r=i(\"form\",{id:this.settings.ID+\"goto-page\",class:\"diva-goto-form\"},e,t,n);var o,s,a;return r.addEventListener(\"submit\",t=>{t.preventDefault();const i=e.value;if(this.settings.onGotoSubmit&&\"function\"==typeof this.settings.onGotoSubmit){const e=this.settings.onGotoSubmit(i);this.viewer.gotoPageByIndex(e)||window.alert(\"No page could be found with that label or page number\")}else this.viewer.gotoPageByLabel(i)||window.alert(\"No page could be found with that label or page number\");return n.style.display=\"none\",!1}),[\"input\",\"focus\"].forEach(t=>{e.addEventListener(t,()=>{n.innerHTML=\"\";const t=e.value;let r=0;if(this.settings.enableGotoSuggestions&&t){const e=this.settings.manifest.pages;for(let o=0,s=e.length;o<s&&r<10;o++)if(e[o].l.toLowerCase().indexOf(t.toLowerCase())>-1){const t=i(\"div\",{class:\"diva-input-suggestion\"},e[o].l);n.appendChild(t),r++}r>0&&(n.style.display=\"block\")}else n.style.display=\"none\"})}),e.addEventListener(\"keydown\",t=>{let n;if(13===t.keyCode){const t=document.getElementsByClassName(\"active\")[0];void 0!==t&&(e.value=t.innerText)}if(38===t.keyCode){n=document.getElementsByClassName(\"active\")[0];const e=n?n.previousSibling:void 0;if(void 0!==e)n.classList.remove(\"active\"),null!==e&&e.classList.add(\"active\");else{let e=document.getElementsByClassName(\"diva-input-suggestion\").length-1;document.getElementsByClassName(\"diva-input-suggestion\")[e].classList.add(\"active\")}}else if(40===t.keyCode){n=document.getElementsByClassName(\"active\")[0];const e=n?n.nextSibling:void 0;void 0!==e?(n.classList.remove(\"active\"),null!==e&&e.classList.add(\"active\")):document.getElementsByClassName(\"diva-input-suggestion\")[0].classList.add(\"active\")}}),o=\"mousedown\",s=\".diva-input-suggestion\",a=function(){e.value=this.textContent,n.style.display=\"none\";let t=new Event(\"submit\",{cancelable:!0});r.dispatchEvent(t)},n.addEventListener(o,(function(e){for(var t=e.target;t&&t!==this;)t.matches(s)&&a.call(t,e),t=t.parentNode})),e.addEventListener(\"blur\",()=>{n.style.display=\"none\"}),r}createViewMenu(){const e=i(\"div\",this._elemAttrs(\"view-options\")),t=this._createGridViewIcon(),n=this._createBookViewIcon(),r=this._createPageViewIcon(),o=this.createButton(\"view-icon\",\"Change view\",()=>{e.style.display=\"none\"===e.style.display?\"block\":\"none\"}),s=t=>{this.viewer.changeView(t),e.style.display=\"none\"},a=()=>{this.settings.inGrid?(o.appendChild(t),o.className=\"diva-grid-icon diva-view-icon diva-button\"):this.settings.inBookLayout?(o.appendChild(n),o.className=\"diva-book-icon diva-view-icon diva-button\"):(o.appendChild(r),o.className=\"diva-document-icon diva-view-icon diva-button\");const i=document.createDocumentFragment();for((this.settings.inGrid||this.settings.inBookLayout)&&i.appendChild(this.createButton(\"document-icon\",\"Document View\",s.bind(null,\"document\"),r)),!this.settings.inGrid&&this.settings.inBookLayout||i.appendChild(this.createButton(\"book-icon\",\"Book View\",s.bind(null,\"book\"),n)),this.settings.inGrid||i.appendChild(this.createButton(\"grid-icon\",\"Grid View\",s.bind(null,\"grid\"),t));e.firstChild;)e.removeChild(e.firstChild);e.appendChild(i)};return document.addEventListener(\"mouseup\",t=>{e!==t.target&&(e.style.display=\"none\")}),this._subscribe(\"ViewDidSwitch\",a),this._subscribe(\"ObjectDidLoad\",a),i(\"div\",this._elemAttrs(\"view-menu\"),o,e)}createFullscreenButton(){let e=this._createFullscreenIcon();return this.createButton(\"fullscreen-icon\",\"Toggle fullscreen mode\",()=>{this.viewer.toggleFullscreenMode()},e)}toggleZoomGridControls(){this.settings.inGrid?(document.getElementById(this.settings.ID+\"zoom-controls\").style.display=\"none\",document.getElementById(this.settings.ID+\"grid-controls\").style.display=\"block\"):(document.getElementById(this.settings.ID+\"zoom-controls\").style.display=\"block\",document.getElementById(this.settings.ID+\"grid-controls\").style.display=\"none\")}render(){this._subscribe(\"ViewDidSwitch\",this.toggleZoomGridControls),this._subscribe(\"ObjectDidLoad\",this.toggleZoomGridControls);let e=[this.createZoomButtons(),this.createGridControls()],t=[this.createPageLabel(),this.createViewMenu()];this.settings.enableFullscreen&&t.push(this.createFullscreenButton()),this.settings.enableGotoPage&&t.splice(1,0,this.createGotoPageForm());let n=this.viewer.viewerState.pluginInstances;for(let i=0,o=n.length;i<o;i++){let o=n[i];o.toolbarSide&&(o.toolbarIcon=o.createIcon(),o.toolbarIcon&&(\"right\"===o.toolbarSide?t.splice(2,0,o.toolbarIcon):\"left\"===o.toolbarSide&&e.splice(2,0,o.toolbarIcon),o.toolbarIcon.addEventListener(\"click\",r.bind(this,o))))}function r(e){e.handleClick(this.viewer)}const o=i(\"div\",this._elemAttrs(\"tools\"),i(\"div\",this._elemAttrs(\"tools-left\"),e),i(\"div\",this._elemAttrs(\"tools-right\"),t));this.settings.toolbarParentObject.insertBefore(o,this.settings.toolbarParentObject.firstChild)}_createToolbarIcon(e){let t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");t.setAttributeNS(null,\"viewBox\",\"0 0 25 25\"),t.setAttributeNS(null,\"x\",\"0px\"),t.setAttributeNS(null,\"y\",\"0px\"),t.setAttributeNS(null,\"style\",\"enable-background:new 0 0 48 48;\");let n=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\");return n.setAttributeNS(null,\"transform\",\"matrix(1, 0, 0, 1, -12, -12)\"),e.forEach(e=>{let t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");t.setAttributeNS(null,\"d\",e),n.appendChild(t)}),t.appendChild(n),t}_createZoomOutIcon(){return this._createToolbarIcon([\"M19.5,23c-0.275,0-0.5-0.225-0.5-0.5v-1c0-0.275,0.225-0.5,0.5-0.5h7c0.275,0,0.5,0.225,0.5,0.5v1c0,0.275-0.225,0.5-0.5,0.5H19.5z\",\"M37.219,34.257l-2.213,2.212c-0.202,0.202-0.534,0.202-0.736,0l-6.098-6.099c-1.537,0.993-3.362,1.577-5.323,1.577c-5.431,0-9.849-4.418-9.849-9.849c0-5.431,4.418-9.849,9.849-9.849c5.431,0,9.849,4.418,9.849,9.849c0,1.961-0.584,3.786-1.576,5.323l6.098,6.098C37.422,33.722,37.422,34.054,37.219,34.257z M29.568,22.099c0-3.706-3.014-6.72-6.72-6.72c-3.706,0-6.72,3.014-6.72,6.72c0,3.706,3.014,6.72,6.72,6.72C26.555,28.818,29.568,25.805,29.568,22.099z\"])}_createZoomInIcon(){return this._createToolbarIcon([\"M37.469,34.257l-2.213,2.212c-0.202,0.202-0.534,0.202-0.736,0l-6.098-6.099c-1.537,0.993-3.362,1.577-5.323,1.577c-5.431,0-9.849-4.418-9.849-9.849c0-5.431,4.418-9.849,9.849-9.849c5.431,0,9.849,4.418,9.849,9.849c0,1.961-0.584,3.786-1.576,5.323l6.098,6.098C37.672,33.722,37.672,34.054,37.469,34.257z M29.818,22.099c0-3.706-3.014-6.72-6.72-6.72c-3.706,0-6.72,3.014-6.72,6.72c0,3.706,3.014,6.72,6.72,6.72C26.805,28.818,29.818,25.805,29.818,22.099z M26.5,21H24v-2.5c0-0.275-0.225-0.5-0.5-0.5h-1c-0.275,0-0.5,0.225-0.5,0.5V21h-2.5c-0.275,0-0.5,0.225-0.5,0.5v1c0,0.275,0.225,0.5,0.5,0.5H22v2.5c0,0.275,0.225,0.5,0.5,0.5h1c0.275,0,0.5-0.225,0.5-0.5V23h2.5c0.275,0,0.5-0.225,0.5-0.5v-1C27,21.225,26.775,21,26.5,21z\"])}_createGridMoreIcon(){return this._createToolbarIcon([\"M29.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z\"])}_createGridFewerIcon(){return this._createToolbarIcon([\"M25.5,35c-0.275,0-0.5-0.225-0.5-0.5v-9c0-0.275,0.225-0.5,0.5-0.5h9c0.275,0,0.5,0.225,0.5,0.5v9c0,0.275-0.225,0.5-0.5,0.5H25.5z M22.5,35c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H22.5z M34.5,23c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H34.5z M22.5,23c0.275,0,0.5-0.225,0.5-0.5v-9c0-0.275-0.225-0.5-0.5-0.5h-9c-0.275,0-0.5,0.225-0.5,0.5v9c0,0.275,0.225,0.5,0.5,0.5H22.5z\"])}_createGridViewIcon(){return this._createToolbarIcon([\"M29.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,35c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,27c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z M29.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H29.5z M21.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H21.5z M13.5,19c-0.275,0-0.5-0.225-0.5-0.5v-5c0-0.275,0.225-0.5,0.5-0.5h5c0.275,0,0.5,0.225,0.5,0.5v5c0,0.275-0.225,0.5-0.5,0.5H13.5z\"])}_createBookViewIcon(){return this._createToolbarIcon([\"M35,16.8v-1.323c0,0-2.292-1.328-5.74-1.328c-3.448,0-5.26,1.25-5.26,1.25s-1.813-1.25-5.26-1.25c-3.448,0-5.74,1.328-5.74,1.328V16.8l-1,0.531v0.021v15.687c0,0,4.531-1.578,6.999-1.578c2.468,0,5.001,0.885,5.001,0.885s2.532-0.885,5-0.885c0.306,0,0.643,0.024,1,0.066v4.325l1.531-2.016L33,35.852v-3.72c2,0.43,3,0.906,3,0.906V17.352v-0.021L35,16.8z M23,29.03c-1-0.292-2.584-0.679-3.981-0.679c-2.246,0-3.019,0.404-4.019,0.699V16.634c0,0,1.125-0.699,4.019-0.699c1.694,0,2.981,0.417,3.981,1.126V29.03z M33,29.051c-1-0.295-1.773-0.699-4.02-0.699c-1.396,0-2.981,0.387-3.98,0.679V17.06c1-0.709,2.286-1.126,3.98-1.126c2.895,0,4.02,0.699,4.02,0.699V29.051z\"])}_createPageViewIcon(){return this._createToolbarIcon([\"M29.425,29h4.47L29,33.934v-4.47C29,29.19,29.151,29,29.425,29z M34,14.563V28h-5.569C28.157,28,28,28.196,28,28.47V34H14.497C14.223,34,14,33.71,14,33.437V14.563C14,14.29,14.223,14,14.497,14h18.9C33.672,14,34,14.29,34,14.563z M25.497,26.497C25.497,26.223,25.275,26,25,26h-7c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,27.777,17.725,28,18,28h7c0.275,0,0.497-0.223,0.497-0.497V26.497z M30.497,22.497C30.497,22.223,30.275,22,30,22H18c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,23.777,17.725,24,18,24h12c0.275,0,0.497-0.223,0.497-0.497V22.497z M30.497,18.497C30.497,18.223,30.275,18,30,18H18c-0.275,0-0.497,0.223-0.497,0.497v1.006C17.503,19.777,17.725,20,18,20h12c0.275,0,0.497-0.223,0.497-0.497V18.497z\"])}_createFullscreenIcon(){return this._createToolbarIcon([\"M35,12H13c-0.55,0-1,0.45-1,1v22c0,0.55,0.45,1,1,1h22c0.55,0,1-0.45,1-1V13C36,12.45,35.55,12,35,12z M34,34H14V14h20V34z\",\"M17,21.75v-4.5c0-0.138,0.112-0.25,0.25-0.25h4.5c0.138,0,0.17,0.08,0.073,0.177l-1.616,1.616l1.823,1.823c0.097,0.097,0.097,0.256,0,0.354l-1.061,1.06c-0.097,0.097-0.256,0.097-0.354,0l-1.823-1.823l-1.616,1.616C17.08,21.92,17,21.888,17,21.75z M20.97,25.97c-0.097-0.097-0.256-0.097-0.354,0l-1.823,1.823l-1.616-1.616C17.08,26.08,17,26.112,17,26.25v4.5c0,0.138,0.112,0.25,0.25,0.25h4.5c0.138,0,0.17-0.08,0.073-0.177l-1.616-1.616l1.823-1.823c0.097-0.097,0.097-0.256,0-0.354L20.97,25.97z M30.75,17h-4.5c-0.138,0-0.17,0.08-0.073,0.177l1.616,1.616l-1.823,1.823c-0.097,0.097-0.097,0.256,0,0.354l1.061,1.06c0.097,0.097,0.256,0.097,0.354,0l1.823-1.823l1.616,1.616C30.92,21.92,31,21.888,31,21.75v-4.5C31,17.112,30.888,17,30.75,17z M30.823,26.177l-1.616,1.616l-1.823-1.823c-0.097-0.097-0.256-0.097-0.354,0l-1.061,1.06c-0.097,0.097-0.097,0.256,0,0.354l1.823,1.823l-1.616,1.616C26.08,30.92,26.112,31,26.25,31h4.5c0.138,0,0.25-0.112,0.25-0.25v-4.5C31,26.112,30.92,26.08,30.823,26.177z M26,22.5c0-0.275-0.225-0.5-0.5-0.5h-3c-0.275,0-0.5,0.225-0.5,0.5v3c0,0.275,0.225,0.5,0.5,0.5h3c0.275,0,0.5-0.225,0.5-0.5V22.5z\"])}}var ue={get:ce,update:function(e,t){const n=ce(e),i=window.location.hash;if(n!==t)if(\"string\"==typeof n){const r=i.indexOf(\"&\"+e+\"=\")>0?i.indexOf(\"&\"+e+\"=\"):i.indexOf(\"#\"+e+\"=\"),o=r+e.length+2+n.length,s=0===r?\"#\":\"&\";window.location.replace(i.substring(0,r)+s+e+\"=\"+t+i.substring(o))}else 0===i.length?window.location.replace(\"#\"+e+\"=\"+t):window.location.replace(i+\"&\"+e+\"=\"+t)}};function ce(e){const t=window.location.hash;if(\"\"!==t){let n=t.indexOf(\"&\"+e+\"=\")>0?t.indexOf(\"&\"+e+\"=\"):t.indexOf(\"#\"+e+\"=\");if(n>=0){n+=e.length+2;const i=t.indexOf(\"&\",n);return i>n?decodeURIComponent(t.substring(n,i)):i<0?decodeURIComponent(t.substring(n)):\"\"}return!1}return!1}class he{constructor(e,t){if(!(e instanceof HTMLElement)&&(this.element=document.getElementById(e),null===this.element))throw new a;if(!t.objectData)throw new u(\"You must supply either a URL or a literal object to the `objectData` key.\");this.options=Object.assign({adaptivePadding:.05,arrowScrollAmount:40,blockMobileMove:!1,objectData:\"\",enableAutoTitle:!0,enableFilename:!0,enableFullscreen:!0,enableGotoPage:!0,enableGotoSuggestions:!0,enableGridIcon:!0,enableGridControls:\"buttons\",enableImageTitles:!0,enableIndexAsLabel:!1,enableKeyScroll:!0,enableLinkIcon:!0,enableNonPagedVisibilityIcon:!0,enableSpaceScroll:!1,enableToolbar:!0,enableZoomControls:\"buttons\",fillParentHeight:!0,fixedPadding:10,fixedHeightGrid:!0,goDirectlyTo:0,hashParamSuffix:null,imageCrossOrigin:\"anonymous\",inFullscreen:!1,inBookLayout:!1,inGrid:!1,maxPagesPerRow:8,maxZoomLevel:-1,minPagesPerRow:2,minZoomLevel:0,onGotoSubmit:null,pageAliases:{},pageAliasFunction:function(){return!1},pageLoadTimeout:200,pagesPerRow:5,requestHeaders:{Accept:\"application/json\"},showNonPagedPages:!1,throbberTimeout:100,tileHeight:256,tileWidth:256,toolbarParentObject:null,verticallyOriented:!0,viewportMargin:200,zoomLevel:2},t);const n=i(\"div\",{class:`diva-wrapper${this.options.fillParentHeight?\" diva-wrapper-flexbox\":\"\"}`});this.element.appendChild(n),this.options.toolbarParentObject=this.options.toolbarParentObject||n;const r=new J(n,this.options,this);this.viewerState=r.getInternalState(),this.settings=r.getSettings(),this.toolbar=this.settings.enableToolbar?new le(this):null,n.id=this.settings.ID+\"wrapper\",this.divaState={viewerCore:r,toolbar:this.toolbar};let o=c.Events.subscribe(\"ObjectDidLoad\",()=>{null!==this.toolbar&&this.toolbar.render(),c.Events.unsubscribe(o)});this.hashState=this._getHashParamState(),this._loadOrFetchObjectData()}_loadOrFetchObjectData(){if(\"object\"==typeof this.settings.objectData)setTimeout(()=>{this._loadObjectData(this.settings.objectData,this.hashState)},0);else{const e=fetch(this.settings.objectData,{headers:this.settings.requestHeaders}).then(e=>{if(!e.ok){c.Events.publish(\"ManifestFetchError\",[e],this),this._ajaxError(e);let t=new Error(e.statusText);throw t.response=e,t}return e.json()}).then(e=>{this._loadObjectData(e,this.hashState)});this.divaState.viewerCore.setPendingManifestRequest(e)}}_showError(e){this.divaState.viewerCore.showError(e)}_ajaxError(e){const t=[\"Invalid objectData setting. Error code: \"+e.status+\" \"+e.statusText];if(0===this.settings.objectData.lastIndexOf(\"http\",0)){const e=this.settings.objectData.replace(/https?:\\/\\//i,\"\").split(/[/?#]/)[0];window.location.hostname!==e&&t.push(i(\"p\",\"Attempted to access cross-origin data without CORS.\"),i(\"p\",\"You may need to update your server configuration to support CORS. For help, see the \",i(\"a\",{href:\"https://github.com/DDMAL/diva.js/wiki/Installation#a-note-about-cross-site-requests\",target:\"_blank\"},\"cross-site request documentation.\")))}this._showError(t)}_loadObjectData(e,t){let n;if(!e.hasOwnProperty(\"@context\")&&(-1===e[\"@context\"].indexOf(\"iiif\")||-1===e[\"@context\"].indexOf(\"shared-canvas\")))throw new l(\"This does not appear to be a IIIF Manifest.\");c.Events.publish(\"ManifestDidLoad\",[e],this),n=se.fromIIIF(e);const i=t?this._getLoadOptionsForState(t,n):{};this.divaState.viewerCore.setManifest(n,i)}_getHashParamState(){const e={};return[\"f\",\"v\",\"z\",\"n\",\"i\",\"p\",\"y\",\"x\"].forEach(t=>{const n=ue.get(t+this.settings.hashParamSuffix);!1!==n&&(e[t]=n)}),\"true\"===e.f?e.f=!0:\"false\"===e.f&&(e.f=!1),[\"z\",\"n\",\"p\",\"x\",\"y\"].forEach(t=>{t in e&&(e[t]=parseInt(e[t],10))}),e}_getLoadOptionsForState(e,t){t=t||this.settings.manifest;const n=\"v\"in e?this._getViewState(e.v):{};\"f\"in e&&(n.inFullscreen=e.f),\"z\"in e&&(n.zoomLevel=e.z),\"n\"in e&&(n.pagesPerRow=e.n);let i=this._getPageIndexForManifest(t,e.i);if(i>=0&&i<t.pages.length||(i=e.p-1,i>=0&&i<t.pages.length||(i=null)),null!==i){const t=parseInt(e.x,10),r=parseInt(e.y,10);n.goDirectlyTo=i,n.horizontalOffset=t,n.verticalOffset=r}return n}_getViewState(e){switch(e){case\"d\":return{inGrid:!1,inBookLayout:!1};case\"b\":return{inGrid:!1,inBookLayout:!0};case\"g\":return{inGrid:!0,inBookLayout:!1};default:return{}}}_getPageIndexForManifest(e,t){let n;const i=e.pages.length;for(n=0;n<i;n++)if(e.pages[n].f===t)return n;return-1}_getState(){let e;e=this.settings.inGrid?\"g\":this.settings.inBookLayout?\"b\":\"d\";const t=this.divaState.viewerCore.getCurrentLayout().getPageToViewportCenterOffset(this.settings.activePageIndex,this.viewerState.viewport);return{f:this.settings.inFullscreen,v:e,z:this.settings.zoomLevel,n:this.settings.pagesPerRow,i:!!this.settings.enableFilename&&this.settings.manifest.pages[this.settings.activePageIndex].f,p:!this.settings.enableFilename&&this.settings.activePageIndex+1,y:!!t&&t.y,x:!!t&&t.x}}_getURLHash(){const e=this._getState(),t=[];let n;for(n in e)!1!==e[n]&&t.push(n+this.settings.hashParamSuffix+\"=\"+encodeURIComponent(e[n]));return t.join(\"&\")}_getPageIndex(e){return this._getPageIndexForManifest(this.settings.manifest,e)}_checkLoaded(){return!!this.viewerState.loaded||(console.warn(\"The viewer is not completely initialized. This is likely because it is still downloading data. To fix this, only call this function if the isReady() method returns true.\"),!1)}_toggleFullscreen(){let e;this._reloadViewer({inFullscreen:!this.settings.inFullscreen});let t=!1,n=document.getElementById(this.settings.selector+\"tools\");function i(){n.style.opacity=1,clearTimeout(e),!t&&this.settings.inFullscreen&&(e=setTimeout((function(){n.style.opacity=0}),2e3))}this.settings.inFullscreen?(n.classList.add(\"diva-fullscreen-tools\"),document.addEventListener(\"mousemove\",i.bind(this)),document.getElementsByClassName(\"diva-viewport\")[0].addEventListener(\"scroll\",i.bind(this)),n.addEventListener(\"mouseenter\",(function(){t=!0})),n.addEventListener(\"mouseleave\",(function(){t=!1}))):n.classList.remove(\"diva-fullscreen-tools\")}_togglePageLayoutOrientation(){const e=!this.settings.verticallyOriented;return this._reloadViewer({inGrid:!1,verticallyOriented:e,goDirectlyTo:this.settings.activePageIndex,verticalOffset:this.divaState.viewerCore.getYOffset(),horizontalOffset:this.divaState.viewerCore.getXOffset()}),e}_changeView(e){switch(e){case\"document\":return this._reloadViewer({inGrid:!1,inBookLayout:!1});case\"book\":return this._reloadViewer({inGrid:!1,inBookLayout:!0});case\"grid\":return this._reloadViewer({inGrid:!0});default:return!1}}_gotoPageByIndex(e,t,n){let i=parseInt(e,10);if(this._isPageIndexValid(i)){const e=this.divaState.viewerCore.getXOffset(i,t),r=this.divaState.viewerCore.getYOffset(i,n);return this.viewerState.renderer.goto(i,r,e),!0}return!1}_isPageIndexValid(e){return this.settings.manifest.isPageValid(e,this.settings.showNonPagedPages)}_getPageIndexForPageXYValues(e,t){const n=this.viewerState.outerElement.getBoundingClientRect(),i=n.top,r=n.left,o=n.bottom,s=n.right;if(e<r||e>s)return-1;if(t<i||t>o)return-1;const a=document.getElementsByClassName(\"diva-page\");let l=a.length;for(;l--;){const n=a[l],i=n.getBoundingClientRect();if(!(e<i.left||e>i.right)&&!(t<i.top||t>i.bottom))return n.getAttribute(\"data-index\")}return-1}_reloadViewer(e){return this.divaState.viewerCore.reload(e)}_getCurrentURL(){return location.protocol+\"//\"+location.host+location.pathname+location.search+\"#\"+this._getURLHash()}activate(){this.viewerState.isActiveDiva=!0}changeObject(e){this.viewerState.loaded=!1,this.divaState.viewerCore.clear(),this.viewerState.renderer&&this.viewerState.renderer.destroy(),this.viewerState.options.objectData=e,this._loadOrFetchObjectData()}changeView(e){this._changeView(e)}deactivate(){this.viewerState.isActiveDiva=!1}destroy(){this.divaState.viewerCore.destroy()}disableScrollable(){this.divaState.viewerCore.disableScrollable()}enableScrollable(){this.divaState.viewerCore.enableScrollable()}disableDragScrollable(){this.divaState.viewerCore.disableDragScrollable()}enableDragScrollable(){this.divaState.viewerCore.enableDragScrollable()}enterFullscreenMode(){return!this.settings.inFullscreen&&(this._toggleFullscreen(),!0)}enterGridView(){return!this.settings.inGrid&&(this._changeView(\"grid\"),!0)}getAllPageURIs(){return this.settings.manifest.pages.map(e=>e.f)}getCurrentCanvas(){return this.settings.manifest.pages[this.settings.activePageIndex].canvas}getCurrentPageDimensionsAtCurrentZoomLevel(){return this.getPageDimensionsAtCurrentZoomLevel(this.settings.activePageIndex)}getCurrentPageFilename(){return console.warn(\"This method will be deprecated in the next version of Diva. Please use getCurrentPageURI instead.\"),this.settings.manifest.pages[this.settings.activePageIndex].f}getCurrentPageIndices(){return this.settings.currentPageIndices}getActivePageIndex(){return this.settings.activePageIndex}getCurrentPageOffset(){return this.getPageOffset(this.settings.activePageIndex)}getCurrentPageURI(){return this.settings.manifest.pages[this.settings.activePageIndex].f}getCurrentURL(){return this._getCurrentURL()}getFilenames(){return console.warn(\"This will be removed in the next version of Diva. Use getAllPageURIs instead.\"),this.settings.manifest.pages.map(e=>e.f)}getGridPagesPerRow(){return this.settings.pagesPerRow}getInstanceId(){return this.settings.ID}getInstanceSelector(){return this.divaState.viewerCore.selector}getItemTitle(){return this.settings.manifest.itemTitle}getMaxZoomLevel(){return this.settings.maxZoomLevel}getMaxZoomLevelForPage(e){return!!this._checkLoaded()&&this.settings.manifest.pages[e].m}getMinZoomLevel(){return this.settings.minZoomLevel}getNumberOfPages(){return!!this._checkLoaded()&&this.settings.numPages}getOtherImages(e){return this.settings.manifest.pages[e].otherImages}getPageDimensions(e){return this._checkLoaded()?this.divaState.viewerCore.getCurrentLayout().getPageDimensions(e):null}getPageDimensionsAtCurrentZoomLevel(e){let t=parseInt(e,10);if(!this._isPageIndexValid(t))throw new Error(\"Invalid Page Index\");return this.divaState.viewerCore.getCurrentLayout().getPageDimensions(t)}getPageDimensionsAtZoomLevel(e,t){if(!this._checkLoaded())return!1;t>this.settings.maxZoomLevel&&(t=this.settings.maxZoomLevel);const n=this.settings.manifest.pages[parseInt(e,10)].d[parseInt(t,10)];return{width:n.w,height:n.h}}getPageImageURL(e,t){return this.settings.manifest.getPageImageURL(e,t)}getPageIndexForPageXYValues(e,t){return this._getPageIndexForPageXYValues(e,t)}getPageOffset(e,t){const n=this.divaState.viewerCore.getPageRegion(e,t);return{top:n.top,left:n.left}}getSettings(){return this.settings}getState(){return this._getState()}getZoomLevel(){return this.settings.zoomLevel}gotoPageByIndex(e,t,n){return this._gotoPageByIndex(e,t,n)}gotoPageByLabel(e,t,n){const i=this.settings.manifest.pages;let r=e.toLowerCase();for(let e=0,o=i.length;e<o;e++)if(i[e].l.toLowerCase().indexOf(r)>-1)return this._gotoPageByIndex(e,t,n);const o=parseInt(e,10)-1;return this._gotoPageByIndex(o,t,n)}gotoPageByName(e,t,n){console.warn(\"This method will be removed in the next version of Diva.js. Use gotoPageByURI instead.\");const i=this._getPageIndex(e);return this._gotoPageByIndex(i,t,n)}gotoPageByURI(e,t,n){const i=this._getPageIndex(e);return this._gotoPageByIndex(i,t,n)}hasOtherImages(e){return!0===this.settings.manifest.pages[e].otherImages}hideNonPagedPages(){this._reloadViewer({showNonPagedPages:!1})}isInFullscreen(){return this.settings.inFullscreen}isPageIndexValid(e){return this._isPageIndexValid(e)}isPageInViewport(e){return this.viewerState.renderer.isPageVisible(e)}isReady(){return this.viewerState.loaded}isRegionInViewport(e,t,n,i,r){const o=this.divaState.viewerCore.getCurrentLayout();if(!o)return!1;const s=o.getPageOffset(e),a=s.top+n,l=s.left+t;return this.viewerState.viewport.intersectsRegion({top:a,bottom:a+r,left:l,right:l+i})}isVerticallyOriented(){return this.settings.verticallyOriented}leaveFullscreenMode(){return!!this.settings.inFullscreen&&(this._toggleFullscreen(),!0)}leaveGridView(){return!!this.settings.inGrid&&(this._reloadViewer({inGrid:!1}),!0)}setGridPagesPerRow(e){return!!this.divaState.viewerCore.isValidOption(\"pagesPerRow\",e)&&this._reloadViewer({inGrid:!0,pagesPerRow:e})}setState(e){this._reloadViewer(this._getLoadOptionsForState(e))}setZoomLevel(e){return this.settings.inGrid&&this._reloadViewer({inGrid:!1}),this.divaState.viewerCore.zoom(e)}showNonPagedPages(){this._reloadViewer({showNonPagedPages:!0})}toggleFullscreenMode(){this._toggleFullscreen()}toggleNonPagedPagesVisibility(){this._reloadViewer({showNonPagedPages:!this.settings.showNonPagedPages})}toggleOrientation(){return this._togglePageLayoutOrientation()}translateFromMaxZoomLevel(e){const t=this.settings.maxZoomLevel-this.settings.zoomLevel;return e/Math.pow(2,t)}translateToMaxZoomLevel(e){const t=this.settings.maxZoomLevel-this.settings.zoomLevel;return 0===t?e:e*Math.pow(2,t)}zoomIn(){return this.setZoomLevel(this.settings.zoomLevel+1)}zoomOut(){return this.setZoomLevel(this.settings.zoomLevel-1)}}he.Events=c.Events;var fe;t.default=he;\"undefined\"!=typeof window&&((fe=window).Diva=fe.Diva||he)}]);"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourceRoot":""}